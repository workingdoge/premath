{"id":"bd-1","title":"Conformance: Spec Traceability Matrix for Promoted Draft Specs","description":"Build and maintain a spec-to-vector traceability matrix mapping promoted draft specs under specs/premath/draft/ to executable conformance vectors and checks. Identify unmapped specs and add required coverage targets.","notes":"Completed spec traceability pass: added draft/SPEC-TRACEABILITY matrix, linked from draft README/SPEC-INDEX/CONFORMANCE, and opened discovered coverage targets bd-13..bd-18 (T-IC-01, T-GATE-01, T-WID-01, T-INDEX-01, T-DINF-01, T-KERNEL-01).","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-21T21:41:39.724462Z","updated_at":"2026-02-22T00:22:51.923596Z","closed_at":"2026-02-22T00:22:51.923598Z","ephemeral":false,"dependencies":[{"issue_id":"bd-1","depends_on_id":"bd-5","type":"blocks"}]}
{"id":"bd-10","title":"[Coherence v1] Observation Coherence Dashboard + Attention Projections","description":"Add explicit observation projections for policy drift, unknown classification rate, proposal reject classes, blocked-vs-ready partition integrity, and stale claims; expose through observe_* and docs dashboard.","notes":"Implemented observation coherence projections end-to-end. Observation Surface now computes summary.coherence with policy drift, instruction unknown-rate, proposal reject class aggregation, ready-vs-blocked partition integrity, and stale/contended lease health from .premath/issues.jsonl. Exposed through observe_latest/needs_attention (Rust UX + CLI), updated docs dashboard panels/metrics, and added reducer + semantics tests. Verified with `python3 tools/ci/test_observation_surface.py`, `cargo test -p premath-surreal`, `cargo test -p premath-ux`, `cargo test -p premath-cli`, `mise run ci-observation-check`.","status":"closed","priority":3,"issue_type":"task","assignee":"codex","created_at":"2026-02-21T23:07:04.277911Z","updated_at":"2026-02-22T01:24:24.930622Z","closed_at":"2026-02-22T01:24:24.930624Z","ephemeral":false,"dependencies":[{"issue_id":"bd-10","depends_on_id":"bd-7","type":"blocks"},{"issue_id":"bd-10","depends_on_id":"bd-9","type":"blocks"},{"issue_id":"bd-10","depends_on_id":"bd-12","type":"blocks"},{"issue_id":"bd-10","depends_on_id":"bd-4","type":"discovered-from"}]}
{"id":"bd-100","title":"[Docs] Codify lane separation for CwF, spans, SigPi adjoints, and Squeak transport","description":"Patch normative/informative architecture docs so lane ownership is explicit and non-overlapping:\n- semantic lane: kernel + adjoints/sites (`\\Sigma_f -| f* -| \\Pi_f`, SigPi),\n- strict checker lane: coherence CwF equalities,\n- witness lane: span/square commutation artifacts,\n- runtime transport lane: Squeak core/site.\n\nAcceptance:\n- UNIFICATION-DOCTRINE has explicit lane map + anti-fork rule,\n- SPEC-INDEX reading guidance reflects lane order for SigPi + Squeak integrators,\n- decision-log entry records boundary clarification.","notes":"Completed docs lane-separation pass for SigPi + Squeak composition (historical alias: Sig/Pi).\n\nDelivered:\n- Added `draft/UNIFICATION-DOCTRINE` §9 lane-separation contract with explicit roles for semantic doctrine, strict checker (CwF), span/square witness commutation, and Squeak runtime transport.\n- Added SigPi and Squeak composition rules (single authority boundary, no parallel semantic schema).\n- Updated `draft/SPEC-INDEX` with joint capability note (`adjoints_sites` + `squeak_site`) and composed reading order.\n- Added Decision 0083 in `specs/process/decision-log.md`.\n\nValidation:\n- python3 tools/conformance/check_spec_traceability.py\n- mise run docs-coherence-check\n- mise run coherence-check","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:20:58.418897Z","updated_at":"2026-02-23T04:23:58.090011Z","closed_at":"2026-02-22T17:22:55.388552Z","ephemeral":false}
{"id":"bd-101","title":"[Contract] Extend control-plane contract with evidence-lane bindings","description":"Extend typed control-plane contract surface to declare deterministic lane/kind bindings for evidence artifacts.\n\nScope:\n- add canonical lane registry in `draft/CONTROL-PLANE-CONTRACT.json` (lane IDs, artifact kinds, ownership constraints),\n- include explicit SigPi (`\\Sigma_f -| f* -| \\Pi_f`) and span/square witness-lane bindings where applicable,\n- encode lane ownership constraints: CwF strict equalities remain checker-core and MUST NOT be profile-scoped,\n- bind lane records to (`normalizerId`, `policyDigest`) where required,\n- declare deterministic lane-boundary failure classes and fail-closed behavior,\n- ensure doctrine/coherence checks reject unknown lanes, unbound kinds, or lane-ownership violations.\n\nAcceptance:\n- contract schema updated with lane map + ownership constraints + failure-class vocabulary,\n- coherence/docs checks consume it,\n- no duplicate hard-coded lane lists across adapters.","notes":"Closed as contract-scaffold completion.\n\nDelivered:\n- `draft/CONTROL-PLANE-CONTRACT.json` includes lane registry/ownership/failure-class fields.\n- `tools/ci/control_plane_contract.py` validates and exports lane registry surfaces.\n- `tools/ci/test_control_plane_contract.py` + `mise run ci-pipeline-test` coverage added.\n- docs/spec references now point to this contract as the lane-binding source.\n\nFollow-up implementation work (checker enforcement parity) continues under bd-108.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:21:04.104741Z","updated_at":"2026-02-23T04:24:21.314819Z","closed_at":"2026-02-22T17:52:41.013042Z","ephemeral":false,"dependencies":[{"issue_id":"bd-101","depends_on_id":"bd-100","type":"blocks"},{"issue_id":"bd-101","depends_on_id":"bd-104","type":"blocks"}]}
{"id":"bd-102","title":"[Conformance] Cross-lane invariance vectors for SigPi + squeak-site + span-square","description":"Add executable vectors proving composed lane behavior stays deterministic when SigPi adjoint obligations (`\\Sigma_f -| f* -| \\Pi_f`, shorthand `sig\\Pi`) and Squeak transport/site obligations interact through typed span/square witness paths.\n\nAcceptance:\n- new vectors for composed accept/reject/invariance cases,\n- deterministic failure-class mapping across semantic/checker/witness/transport lanes,\n- explicit span/square pullback/base-change witness routing validated,\n- adversarial vectors for lane-ownership violations (including attempts to profile-scope CwF strict equalities) reject deterministically,\n- included in conformance suite and baseline closure.","notes":"Implemented composed cross-lane capability semantics for SigPi+squeak-site+span-square in conformance runner; added 5 new vectors (golden/adversarial/invariance) and manifest wiring; updated CAPABILITY-VECTORS + ADJOINTS-AND-SITES requirements; added Decision 0090. Validated with: python3 tools/conformance/run_capability_vectors.py; python3 tools/conformance/check_stub_invariance.py; mise run conformance-run; mise run coherence-check; mise run docs-coherence-check.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:21:15.768960Z","updated_at":"2026-02-23T04:23:58.787463Z","closed_at":"2026-02-22T18:22:08.026038Z","ephemeral":false,"dependencies":[{"issue_id":"bd-102","depends_on_id":"bd-104","type":"blocks"},{"issue_id":"bd-102","depends_on_id":"bd-107","type":"blocks"}]}
{"id":"bd-103","title":"[Implementation] Single evidence projector path for CLI/MCP/CI","description":"Implement one shared projector path that reads canonical evidence/event substrate and emits deterministic projections for CLI/MCP/CI consumers.\n\nAcceptance:\n- one shared projector module/API,\n- existing consumers migrated,\n- duplicate projection validation logic removed,\n- regression tests prove parity and fail-closed behavior.","notes":"Implemented a shared Observation projector path for CI/CLI/MCP alignment.\n\nDelivered:\n- Added canonical core projector API in `premath-surreal` (`build_surface`, `build_events`) with deterministic normalization/coherence projections and fail-closed error handling.\n- Added `premath observe-build` command in `premath-cli` to build `artifacts/observation/latest.json` and `artifacts/observation/events.jsonl` from CI witness + issue memory substrates.\n- Migrated `mise run ci-observation-build` and `mise run ci-observation-query` to core CLI command surfaces.\n- Migrated `tools/ci/check_observation_semantics.py` to compare against fresh `premath observe-build` output.\n- Converted `tools/ci/observation_surface.py` into a compatibility wrapper that calls `premath observe-build` (removes parallel reducer authority semantics).\n- Added coverage: `premath-surreal` projector tests + `premath-cli` smoke test `observe_build_json_smoke`.\n- Added Decision 0091 documenting the projector unification boundary.\n\nValidation:\n- cargo test -p premath-surreal\n- cargo test -p premath-cli --test cli_smoke observe\n- python3 tools/ci/test_observation_surface.py\n- mise run ci-observation-build\n- mise run ci-observation-check\n- mise run ci-observation-query\n- mise run docs-coherence-check\n- mise run ci-command-surface-check\n- mise run coherence-check","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:21:20.407211Z","updated_at":"2026-02-23T04:24:22.065686Z","closed_at":"2026-02-22T18:38:16.400344Z","ephemeral":false,"dependencies":[{"issue_id":"bd-103","depends_on_id":"bd-101","type":"blocks"},{"issue_id":"bd-103","depends_on_id":"bd-102","type":"blocks"},{"issue_id":"bd-103","depends_on_id":"bd-106","type":"blocks"}]}
{"id":"bd-104","title":"[Profile] Compose SigPi adjoints, spans, and Squeak transport as one capability overlay","description":"Define a profile-level composition contract that ties:\n- SigPi adjoint/site obligations (`\\Sigma_f -| f* -| \\Pi_f`, Beck-Chevalley),\n- typed span/square commutation obligations for cross-lane pullback/base-change claims,\n- runtime Squeak transport/site obligations,\nunder one declared capability overlay and deterministic binding discipline.\n\nConstraints:\n- CwF strict substitution/comprehension laws remain checker-core (`draft/PREMATH-COHERENCE`) and are referenced, not re-owned, by profile overlays.\n\nAcceptance:\n- profile doc section (or new profile doc) with composed obligation set,\n- capability claim + requiredChecks mapping clarified,\n- deterministic witness/failure lineage requirements specified,\n- concise authority mapping table added (Kernel/Gate vs Coherence(CwF) vs Span/Square vs Profile),\n- no parallel semantic authority encoding introduced.","notes":"Completed composed overlay contract pass.\n\nDelivered:\n- `profile/ADJOINTS-AND-SITES` now has Section 10 defining composed SigPi + spans + Squeak routing, composed obligation boundary, authority mapping table, and deterministic witness-lineage constraints.\n- `draft/SPEC-INDEX` composed integration path now points to `profile/ADJOINTS-AND-SITES` §10.\n- `docs/design/ARCHITECTURE-MAP` now includes current unification execution order aligned with this composition path.\n- Decision 0086 records the contract/ordering clarification.\n\nValidation:\n- `mise run docs-coherence-check`\n- `mise run coherence-check`\n- `python3 tools/conformance/check_spec_traceability.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:21:24.565587Z","updated_at":"2026-02-23T04:23:59.554974Z","closed_at":"2026-02-22T17:52:35.784292Z","ephemeral":false,"dependencies":[{"issue_id":"bd-104","depends_on_id":"bd-100","type":"blocks"},{"issue_id":"bd-104","depends_on_id":"bd-106","type":"blocks"}]}
{"id":"bd-105","title":"[Docs Surface] Canonical minimal authority path + de-dup reading entrypoint","description":"Reduce documentation surface-area ambiguity by defining one canonical minimal authority path and routing readers there before optional overlays.\n\nScope:\n- add concise authority-first entrypoint in draft README/SPEC-INDEX,\n- avoid duplicated long reading lists across docs where one canonical pointer suffices,\n- keep capability overlays additive and explicitly optional.\n\nAcceptance:\n- one minimal-authority path section exists and is cross-linked,\n- docs-coherence/traceability/coherence checks stay green,\n- decision-log note or issue notes capture rationale.","notes":"Completed minimal-authority surface reduction pass.\n\nDelivered:\n- `specs/premath/draft/README.md`: added explicit minimal authority path and a surface-reduction rule; moved remaining docs under additive overlay guidance.\n- `specs/premath/draft/SPEC-INDEX.md`: added default minimal authority reading path + explicit guidance to add overlays only for claimed capabilities/profiles.\n\nValidation:\n- python3 tools/conformance/check_spec_traceability.py\n- mise run docs-coherence-check\n- mise run coherence-check","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:26:32.459500Z","updated_at":"2026-02-22T17:27:21.107616Z","closed_at":"2026-02-22T17:27:21.107619Z","ephemeral":false,"dependencies":[{"issue_id":"bd-105","depends_on_id":"bd-99","type":"discovered-from"}]}
{"id":"bd-106","title":"[Spec] Formalize Ev as a site-indexed evidence stack with universal mapping property","description":"Define a canonical evidence object `Ev : Ctx^op -> V` (Set/Groupoid/Spaces profile-selected) and specify its universal factoring property for control-plane artifact families.\n\nScope:\n- specify admissible artifact families `F` and required natural transformation shape `F => Ev`,\n- define the attested-surface category in which `Ev` is terminal/final,\n- bind `Ev` transport/descent laws to existing checker obligations (naturality, descent/glue-or-witness, refinement invariance),\n- define how span/square witnesses encode pullback/base-change commutation into `Ev` lineage,\n- map deterministic binding (`normalizerId`, `policyDigest`) into `Ev` comparison/equality contract.\n\nAcceptance:\n- normative draft section or new draft spec linked from SPEC-INDEX,\n- explicit non-authority constraints preserved (proposal/projection outputs cannot bypass discharge),\n- one compact law set (`Ev` transport, descent, determinism, authority-boundary laws),\n- traceability row + at least one executable vector path planned for invariance checks.","notes":"Completed Unified Evidence Plane doctrine clarification pass.\n\nDelivered:\n- Added `draft/UNIFICATION-DOCTRINE` §10 (`Ev : Ctx^op -> V`) with canonical evidence surface semantics, universal factoring (`F => Ev`), compact law set (transport, descent/glue-or-witness, determinism binding, authority-boundary non-bypass), and span/square commutation routing requirement.\n- Updated `draft/SPEC-INDEX` to reference §10 explicitly and added a dedicated Unified Evidence Plane reading path.\n- Added Decision 0085 documenting this boundary.\n\nTraceability/execution path:\n- Existing matrix row for `UNIFICATION-DOCTRINE` remains instrumented via docs/coherence checks.\n- Execution follow-up for lane-registry enforcement and vectors continues under bd-101/bd-107(+follow-up checker issue).","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:37:01.683494Z","updated_at":"2026-02-23T04:24:22.773806Z","closed_at":"2026-02-22T17:46:49.026433Z","ephemeral":false}
{"id":"bd-107","title":"[Conformance] Enforce lane-ownership boundary vectors (CwF core vs profile overlays)","description":"Add explicit conformance vectors and checker assertions for lane-ownership boundaries.\n\nScope:\n- Phase 1 (smoke):\n  - one accept vector: composed profile routes pullback/base-change through span/square witness,\n  - one reject vector: profile material attempts to own CwF strict equalities,\n  - one reject vector: cross-lane claim missing required span/square witness route.\n- Phase 2 (invariance): paired profile vectors proving boundary behavior is profile-invariant where intended.\n- deterministic failure classes for ownership violations and misrouted claims.\n\nAcceptance:\n- smoke vectors integrated and baseline-gated first,\n- invariance vectors integrated into coherence/conformance suites,\n- docs/traceability linked to lane-ownership contract references,\n- deterministic failure-class mapping asserted in tests.","notes":"Completed lane-ownership boundary vector integration.\n\nDelivered:\n- Extended `gate_chain_parity` to consume executable obligation vectors via the existing coherence-site fixture harness (`check_site_obligation(..., \"gate_chain_parity\", ...)`).\n- Added lane-registry evaluator reuse for vector execution (`evaluate_gate_chain_lane_registry`) and per-vector case evaluation (`evaluate_site_case_gate_chain_parity`).\n- Added fixture vectors under `tests/conformance/fixtures/coherence-site`:\n  - `golden/gate_chain_parity_lane_ownership_accept`\n  - `adversarial/gate_chain_parity_lane_ownership_violation_reject`\n  - `adversarial/gate_chain_parity_lane_route_missing_reject`\n  - `invariance/gate_chain_parity_lane_ownership_permuted_accept`\n  - `invariance/gate_chain_parity_lane_ownership_permuted_accept_external`\n- Updated coherence-site manifest with `obligationVectors.gate_chain_parity` bindings.\n- `gate_chain_parity` witness details now include `laneOwnershipVectors` (polarity + invariance accounting).\n- Added Decision 0089 in `specs/process/decision-log.md` documenting this executable boundary closure.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `mise run conformance-check`\n- `mise run conformance-run`\n- `mise run docs-coherence-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:39:20.329153Z","updated_at":"2026-02-23T04:24:58.907598Z","closed_at":"2026-02-22T18:15:23.956899Z","ephemeral":false,"dependencies":[{"issue_id":"bd-107","depends_on_id":"bd-101","type":"blocks"},{"issue_id":"bd-107","depends_on_id":"bd-108","type":"blocks"}]}
{"id":"bd-108","title":"[Coherence] Enforce CONTROL-PLANE lane registry parity in premath-coherence","description":"Implement deterministic checker enforcement for optional lane registry fields in `draft/CONTROL-PLANE-CONTRACT.json`.\n\nScope:\n- validate `evidenceLanes` shape and uniqueness,\n- validate `laneArtifactKinds` references declared lane IDs,\n- validate `laneOwnership` constraints (including checker-core-only CwF obligations),\n- validate deterministic `laneFailureClasses` surface,\n- emit deterministic coherence failure classes on violations.\n\nAcceptance:\n- `premath coherence-check` enforces lane-registry parity when fields are present,\n- unit tests cover malformed/missing/contradictory lane registry cases,\n- docs/coherence checks pass with updated contract.","notes":"Completed lane-registry parity enforcement in `premath-coherence` gate-chain checks.\n\nDelivered:\n- Extended `ControlPlaneProjectionContract` parsing for optional lane fields (`evidenceLanes`, `laneArtifactKinds`, `laneOwnership`, `laneFailureClasses`).\n- Enforced fail-closed lane parity in `check_gate_chain_parity`:\n  - reject unknown/duplicate/empty lane IDs,\n  - reject unbound lane artifact-kind mappings,\n  - enforce checker-core CwF ownership boundary for `checkerCoreOnlyObligations`,\n  - require `requiredCrossLaneWitnessRoute.pullbackBaseChange == span_square_commutation`,\n  - enforce required lane failure class surface presence.\n- Added deterministic failure classes:\n  - `coherence.gate_chain_parity.lane_unknown`\n  - `coherence.gate_chain_parity.lane_kind_unbound`\n  - `coherence.gate_chain_parity.lane_ownership_violation`\n  - `coherence.gate_chain_parity.lane_route_missing`\n  - `coherence.gate_chain_parity.lane_failure_class_mismatch`\n- Added unit tests for valid/invalid lane registry cases.\n- Updated normative docs:\n  - `draft/PREMATH-COHERENCE` §4.3 now states lane-registry fail-closed parity behavior.\n  - Decision 0088 added to `specs/process/decision-log.md`.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `mise run docs-coherence-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:46:49.090889Z","updated_at":"2026-02-22T18:08:43.465541Z","closed_at":"2026-02-22T18:08:43.465543Z","ephemeral":false,"dependencies":[{"issue_id":"bd-108","depends_on_id":"bd-101","type":"blocks"}]}
{"id":"bd-109","title":"[BD] Add dependency edge maintenance (remove/replace + cycle diagnostics)","description":"Issue graph hygiene currently supports edge adds but not first-class edge removal/replacement/cycle diagnostics, which makes long-running dependency planning drift-prone.\n\nScope:\n- add deterministic dep remove/update operations to MCP + CLI surfaces,\n- add cycle/self-loop diagnostics for dependency graph mutations,\n- add projection/status visibility for dependency-graph integrity.\n\nAcceptance:\n- users can remove or replace stale blockers without manual JSONL edits,\n- cycle/self-loop attempts fail with deterministic classes,\n- tests cover add/remove/update + diagnostics paths,\n- docs/tooling guidance updated for issue graph maintenance.","notes":"Completed dependency edge maintenance + diagnostics across CLI/MCP.\n\nDelivered:\n- `premath-bd`:\n  - Added `remove_dependency` and `replace_dependency` memory operations.\n  - Added deterministic cycle/self-loop guards on dependency add:\n    - rejects self-loops,\n    - rejects cycle-introducing edges with deterministic cycle-path diagnostics.\n  - Added dependency graph helpers (`find_dependency_path`, `find_any_dependency_cycle`).\n- CLI (`premath dep`):\n  - Added `dep remove`.\n  - Added `dep replace` (`--from-type`, `--to-type`, optional `--created-by`).\n  - Added `dep diagnostics` with integrity payload (`hasCycle`, `cyclePath`).\n  - `dep project` now includes integrity status in JSON/text output.\n- MCP:\n  - Added `dep_remove` and `dep_replace` tools.\n  - Wired instruction-linked mutation policy capability checks for new actions (`dep.remove`, `dep.replace`).\n- Docs:\n  - Updated command surfaces in `AGENTS.md` and `README.md`.\n\nValidation:\n- `cargo fmt --all`\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `mise run ci-command-surface-check`\n- `mise run ci-drift-budget-check`\n- `mise run docs-coherence-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:52:24.006135Z","updated_at":"2026-02-23T04:26:30.524737Z","closed_at":"2026-02-22T18:57:29.047431Z","ephemeral":false,"dependencies":[{"issue_id":"bd-109","depends_on_id":"bd-110","type":"blocks","created_by":"codex"}]}
{"id":"bd-11","title":"[Coherence v1] Add Profile Overlay Claim Plumbing (specs/premath/profile)","description":"Introduce profile-overlay claim wiring in this repo (directory, claim declaration surface, doctrine-site/spec-index integration) so optional overlays are explicit and additive to base claims.","notes":"Completed profile overlay plumbing: added specs/premath/profile/ADJOINTS-AND-SITES.md and profile/README.md; updated draft/SPEC-INDEX with overlay claim scope + reading order; updated draft/README related links; added Decision 0010 in specs/process/decision-log.md.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T23:07:45.864868Z","updated_at":"2026-02-21T23:13:54.898148Z","closed_at":"2026-02-21T23:13:54.898152Z","ephemeral":false}
{"id":"bd-110","title":"[Unification] Drift budget sentinels across docs/contracts/checkers","description":"Add one deterministic drift-budget surface that fails closed when authority-layer surfaces diverge.\n\nScope:\n- verify parity across: SPEC-INDEX capability/doc map, CAPABILITY-REGISTRY, CONTROL-PLANE-CONTRACT lane fields, COHERENCE-CONTRACT required obligation sets, and checker-exported constants,\n- assert canonical naming/notation drift guards for SigPi terms in normative docs,\n- verify fixture-cache input closures include all files consumed by coherence/control-plane loaders,\n- emit deterministic drift classes and compact summary output for CI/observation surfaces.\n\nAcceptance:\n- one merge-gated check task added to baseline,\n- failing fixture for each drift class,\n- docs reference in ARCHITECTURE-MAP + decision log,\n- no duplicate hard-coded vocabularies left unguarded in CI/checker adapters.","notes":"Completed drift-budget sentinel implementation and baseline wiring.\n\nDelivered:\n- Added `tools/ci/check_drift_budget.py` (`ci.drift_budget.v1`) with deterministic drift classes:\n  - `spec_index_capability_map_drift`\n  - `control_plane_lane_binding_drift`\n  - `coherence_required_obligation_drift`\n  - `sigpi_notation_drift`\n  - `coherence_cache_input_closure_drift`\n- Added `mise run ci-drift-budget-check` and wired it into `mise run baseline`.\n- Added deterministic unit coverage in `tools/ci/test_drift_budget.py` (one failing case per drift class).\n- Added control-plane loader path into coherence-cache input closure (`tools/conformance/run_fixture_suites.py`) and tests.\n- Updated docs/command surfaces (`AGENTS.md`, `README.md`, `tools/ci/README.md`, `docs/design/CI-CLOSURE.md`).\n- Added Decision 0092 (`specs/process/decision-log.md`).\n\nValidation:\n- `python3 tools/ci/test_drift_budget.py`\n- `python3 tools/conformance/test_run_fixture_suites.py`\n- `mise run ci-pipeline-test`\n- `mise run docs-coherence-check`\n- `mise run ci-drift-budget-check`\n- `mise run ci-command-surface-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:54:06.868091Z","updated_at":"2026-02-23T04:25:13.264864Z","closed_at":"2026-02-22T18:57:22.272165Z","ephemeral":false,"dependencies":[{"issue_id":"bd-110","depends_on_id":"bd-103","type":"blocks","created_by":"codex"},{"issue_id":"bd-110","depends_on_id":"bd-114","type":"blocks","created_by":"codex"}]}
{"id":"bd-111","title":"[Docs] Consolidate design lanes and add canonical Squeak design entrypoint","description":"Consolidate non-normative design docs into explicit lanes (Tusk runtime, Squeak/SigPi transport/placement, control/CI), add a canonical Squeak design doc, and preserve compatibility aliases to avoid broken paths.\n\nAcceptance:\n- docs/design README grouped by lane,\n- canonical `docs/design/SQUEAK-DESIGN.md` added,\n- `docs/design/TUSK-SIGPI.md` retained as compatibility alias,\n- docs index boundary rule explicit (`docs` explanatory, `specs` normative).","notes":"Completed in same refinement pass.\n\nDelivered:\n- `docs/design/README.md` now classifies docs by lane (Tusk runtime, Squeak/SigPi transport+placement, control/CI).\n- Added `docs/design/SQUEAK-DESIGN.md` as canonical Squeak transport/placement design note.\n- Converted `docs/design/TUSK-SIGPI.md` into a compatibility alias pointing to `SQUEAK-DESIGN.md`.\n- Updated `docs/README.md` with explicit boundary rule (`docs` explanatory, `specs` normative).\n- Added Decision 0087 in `specs/process/decision-log.md`.\n\nValidation:\n- `mise run docs-coherence-check`\n- `python3 tools/conformance/check_spec_traceability.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T17:58:45.129493Z","updated_at":"2026-02-22T17:58:51.956929Z","closed_at":"2026-02-22T17:58:51.956933Z","ephemeral":false,"dependencies":[{"issue_id":"bd-111","depends_on_id":"bd-99","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-112","title":"[Security] Control-plane threat model and hardening matrix","description":"Define a first-class threat model for instruction/proposal/coherence/CI and issue-memory mutation surfaces.\n\nScope:\n- model trust boundaries for CLI/MCP/CI entrypoints and witness artifacts,\n- enumerate attacker goals (policy bypass, witness spoofing, stale lease takeover, projection poisoning, replay abuse),\n- define deterministic mitigations and required checks per boundary,\n- add adversarial vectors for each mitigation class.\n\nAcceptance:\n- threat-model doc under `specs/premath/draft/` or `specs/process/`,\n- required checks mapped into control-plane/coherence pipelines,\n- conformance adversarial vectors for key bypass classes,\n- decision-log entry for trust model and non-goals.","notes":"Completed control-plane threat model + hardening matrix pass.\n\nDelivered:\n- Added `docs/design/CONTROL-PLANE-THREAT-MODEL.md` with:\n  - trust boundaries and protected assets,\n  - threat matrix (`CP-01..CP-08`) across instruction/mutation/witness/projection/dependency/cache surfaces,\n  - hardening matrix tied to concrete gates/tasks and open follow-ups (`bd-113`, `bd-67`, `bd-115`).\n- Updated design navigation and architecture docs:\n  - `docs/design/README.md` (new control-plane threat-model entry),\n  - `docs/design/ARCHITECTURE-MAP.md` (baseline includes drift-budget checks).\n\nValidation:\n- `mise run docs-coherence-check`\n- `mise run ci-command-surface-check`\n- `mise run ci-drift-budget-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T18:00:14.294609Z","updated_at":"2026-02-23T04:25:13.958230Z","closed_at":"2026-02-22T18:59:07.139501Z","ephemeral":false,"dependencies":[{"issue_id":"bd-112","depends_on_id":"bd-110","type":"blocks","created_by":"codex"},{"issue_id":"bd-112","depends_on_id":"bd-109","type":"blocks","created_by":"codex"}]}
{"id":"bd-113","title":"[Lifecycle] Schema/version evolution and deprecation contract","description":"Define a single schema evolution contract for witness kinds, contract kinds, and compatibility aliases.\n\nScope:\n- versioning policy for `*.contract.v*`, witness kinds, and projection kinds,\n- compatibility window + deprecation/removal rules,\n- migration witness requirements for breaking shape changes,\n- deterministic checker enforcement for unsupported/expired schema versions.\n\nAcceptance:\n- normative policy section + references in SPEC-INDEX,\n- tests for accepted legacy aliases and deterministic rejections past support window,\n- no silent fallback to ambiguous schema interpretations,\n- decision-log entry capturing policy and migration expectations.","notes":"Completed on branch codex/coherence-followup-20260222-140539.\n\nDelivered:\n- Added `schemaLifecycle` contract to `specs/premath/draft/CONTROL-PLANE-CONTRACT.json` with canonical kind families for contract/witness/decision/projection/delta kinds and explicit alias windows.\n- Centralized lifecycle parsing + deterministic alias/expiry enforcement in `tools/ci/control_plane_contract.py` (`resolve_schema_kind`).\n- Routed CI client validators through lifecycle resolver (`required_witness`, `required_witness_decide`, `required_projection`, `required_delta`, `instruction_witness`).\n- Added alias acceptance + expiry rejection tests (`tools/ci/test_control_plane_contract.py`) and integration alias tests across client suites.\n- Added normative lifecycle/deprecation language in `draft/UNIFICATION-DOCTRINE` §5.1 and linked references in SPEC-INDEX/README/PREMATH-COHERENCE.\n- Added Decision 0093 documenting policy and consequences.\n\nValidation:\n- `mise run ci-pipeline-test` passed.\n- `mise run baseline` passed.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T18:00:14.316379Z","updated_at":"2026-02-23T04:26:31.159126Z","closed_at":"2026-02-22T19:13:38.246834Z","ephemeral":false,"dependencies":[{"issue_id":"bd-113","depends_on_id":"bd-103","type":"blocks","created_by":"codex"},{"issue_id":"bd-113","depends_on_id":"bd-112","type":"blocks","created_by":"codex"}]}
{"id":"bd-114","title":"[Cleanup] Tree coherence pass for unified observation projector","description":"Do a focused cleanup pass after observe-build unification so the tree stays coherent and low-encoding.\n\nScope:\n- prune stale/duplicate reducer semantics from compatibility wrappers,\n- keep one canonical observation projection path (`premath observe-build`) across CI/CLI/MCP surfaces,\n- tighten docs/task references to the canonical path,\n- run targeted validation and update issue notes.\n\nAcceptance:\n- no parallel observation projection authority remains,\n- wrapper/tooling surfaces are explicitly compatibility-only,\n- docs/task surfaces are aligned and checks stay green.","notes":"Completed tree cleanup pass for unified observation projector.\n\nDelivered:\n- Rewrote `tools/ci/observation_surface.py` as a strict compatibility wrapper around core `premath observe-build` (removed parallel reducer semantics and stale duplicated coherence/projection logic).\n- Kept only compatibility surfaces needed by scripts/tests (`build_surface`, `build_events`, `query_surface`, CLI wrapper entrypoints).\n- Preserved deterministic event/query behavior and output surface.\n\nValidation:\n- python3 tools/ci/test_observation_surface.py\n- mise run ci-observation-check\n- mise run ci-command-surface-check\n- cargo test -p premath-cli --test cli_smoke observe","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T18:40:04.180730Z","updated_at":"2026-02-23T04:26:31.883365Z","closed_at":"2026-02-22T18:41:38.834699Z","ephemeral":false}
{"id":"bd-115","title":"[BD] Make issue_ready blocker-aware by dependency type","description":"`issue.ready` currently stalls when non-blocking metadata edges (for example `discovered-from`) remain unresolved. Add deterministic blocker semantics so only blocking dep types gate readiness, while provenance/lineage edges remain query-visible but non-blocking.\n\nScope:\n- define canonical blocking dep type set,\n- update ready/blocked projections to use that set,\n- add tests for mixed dep types.\n\nAcceptance:\n- ready queue reflects actionable work even when provenance edges are open,\n- deterministic output documents which deps blocked readiness and why.","notes":"Closed as already implemented by current code path.\n\nEvidence:\n- `DepType::is_blocking` classifies only blocking edge types (`blocks`, `parent-child`, `conditional-blocks`, `waits-for`) as readiness blockers (`crates/premath-bd/src/dependency.rs`).\n- `MemoryStore::ready_open_ids` now evaluates only `blocking_dependencies_of`, so provenance edges (`discovered-from`, `related`, `relates-to`, etc.) do not block ready queue (`crates/premath-bd/src/memory.rs`).\n- MCP `issue_blocked` surfaces deterministic blocker rows (`dependsOnId`, `depType`, `status`) documenting why issues are blocked (`crates/premath-cli/src/commands/mcp_serve.rs`).\n- Executable coverage: `dep_replace_and_remove_update_ready_status` and related tests pass in baseline (`crates/premath-cli/src/commands/mcp_serve.rs` tests; `mise run baseline`).","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T18:45:22.379098Z","updated_at":"2026-02-23T04:26:32.568511Z","closed_at":"2026-02-22T19:14:08.160888Z","ephemeral":false,"dependencies":[{"issue_id":"bd-115","depends_on_id":"bd-109","type":"blocks"},{"issue_id":"bd-115","depends_on_id":"bd-113","type":"blocks","created_by":"codex"}]}
{"id":"bd-116","title":"[EPIC] Control-plane lifecycle coherence: one contract, one checker truth","description":"Close the remaining architecture gap between normative lifecycle policy and checker enforcement.\n\nScope:\n- make `premath-coherence` enforce `schemaLifecycle` deterministically (parity with control-plane loader),\n- refresh architecture docs to post-UEP steady state,\n- add epoch rollover/discipline checks so alias deprecation cannot drift indefinitely.\n\nAcceptance:\n1) coherence checker enforces lifecycle requirements declared in PREMATH-COHERENCE,\n2) docs reflect current epic status and canonical flow,\n3) CI/drift checks enforce lifecycle epoch discipline with deterministic failures.","notes":"Epic complete. Delivered control-plane lifecycle coherence path: checker-side schemaLifecycle enforcement in premath-coherence gate_chain_parity (bd-117), architecture map/docs coherence refresh to post-UEP issue-graph pointer model (bd-118), and CI loader/schemaLifecycle rollover policy enforcement with bounded epoch discipline (bd-119). All changes verified under full mise run baseline.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-22T19:25:50.682288Z","updated_at":"2026-02-22T19:33:25.319773Z","closed_at":"2026-02-22T19:33:25.319775Z","ephemeral":false,"dependencies":[{"issue_id":"bd-116","depends_on_id":"bd-117","type":"blocks"},{"issue_id":"bd-116","depends_on_id":"bd-118","type":"blocks","created_by":"codex"},{"issue_id":"bd-116","depends_on_id":"bd-119","type":"blocks","created_by":"codex"}]}
{"id":"bd-117","title":"[Checker] Enforce schemaLifecycle in coherence gate_chain_parity","description":"Implement `schemaLifecycle` validation and kind-resolution inside `premath-coherence` so gate_chain parity matches normative requirements.\n\nScope:\n- parse/control-plane lifecycle families in Rust checker,\n- resolve contract/witness/projection kinds through lifecycle policy,\n- fail closed on missing lifecycle, unknown family, malformed epoch, expired alias, or unsupported kind,\n- add deterministic unit coverage for accept/reject cases.\n\nAcceptance:\n- PREMATH-COHERENCE §4.3 lifecycle clause is executable in checker path,\n- baseline + coherence tests pass,\n- failure class lineage is deterministic.","notes":"Implemented schemaLifecycle enforcement inside coherence gate_chain_parity: added typed schemaLifecycle model, required family set validation, alias expiry checks by activeEpoch, and deterministic kind resolution for contract/projection/witness kinds. Added failure class coherence.gate_chain_parity.schema_lifecycle_invalid with structured reasons; fail-closed on missing/invalid lifecycle. Added unit tests for missing lifecycle and expired alias; ran cargo fmt and mise run baseline successfully.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:25:50.708194Z","updated_at":"2026-02-23T04:26:33.271689Z","closed_at":"2026-02-22T19:29:21.972723Z","ephemeral":false}
{"id":"bd-118","title":"[Docs] Refresh ARCHITECTURE-MAP to post-UEP steady state","description":"Remove stale execution-order text and align architecture map with closed bd-28/bd-99 status.\n\nScope:\n- replace outdated 'current sequencing' section with current steady-state loop and open governance boundary,\n- keep one canonical architecture path (kernel authority + control-plane checker/attest split).\n\nAcceptance:\n- no stale closed-epic sequencing presented as active,\n- docs-coherence remains green.","notes":"Updated docs/design/ARCHITECTURE-MAP.md to post-UEP steady-state: removed stale bd-99 static sequencing, pointed section to active issue graph, recorded active epic bd-116 and current child states, and documented schemaLifecycle fail-closed behavior (`coherence.gate_chain_parity.schema_lifecycle_invalid`) in conformance closure section. Verified with mise run docs-coherence-check and mise run ci-drift-budget-check.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:25:50.722811Z","updated_at":"2026-02-23T04:26:33.922599Z","closed_at":"2026-02-22T19:30:14.596802Z","ephemeral":false}
{"id":"bd-119","title":"[CI] Enforce schemaLifecycle epoch discipline (rollover policy)","description":"Add deterministic checks so lifecycle alias windows cannot remain effectively open forever.\n\nScope:\n- define policy for `schemaLifecycle.activeEpoch` progression (or explicit freeze declaration),\n- add CI/drift-budget check for policy conformance,\n- include deterministic failure classes/messages.\n\nAcceptance:\n- lifecycle epoch policy is machine-checked,\n- failure behavior is deterministic and documented.","notes":"Implemented CI-side schemaLifecycle epoch discipline in tools/ci/control_plane_contract.py. Added fail-closed rollover policy: all compatibility aliases in one lifecycle table must share one supportUntilEpoch; rollover runway must be positive and bounded to 12 months from activeEpoch. Added deterministic epoch discipline metadata in loader output (`rolloverEpoch`, `aliasRunwayMonths`, `maxAliasRunwayMonths`) and exported loader constants. Added unit coverage in tools/ci/test_control_plane_contract.py for mixed-rollover and overlong-runway rejection paths. Verified with python3 tools/ci/test_control_plane_contract.py and full mise run baseline.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:25:50.734346Z","updated_at":"2026-02-23T04:26:34.575585Z","closed_at":"2026-02-22T19:33:25.334413Z","ephemeral":false}
{"id":"bd-12","title":"[Coherence v1] Capability Vectors for Adjoints/Sites Obligations","description":"Add executable vectors and witness mappings for adjoint_triangle, beck_chevalley_sigma/pi, and refinement invariance under profile-scoped admissible maps, bound to (normalizerId, policyDigest).","notes":"Added executable capability claim capabilities.adjoints_sites with golden/adversarial/invariance vectors for adjoint_triangle, beck_chevalley_sigma, beck_chevalley_pi, and refinement_invariance obligations bound to (normalizerId, policyDigest). Extended instruction proposal obligation/discharge mapping to include these profile obligations and deterministic hint-based failure classes. Updated capability/conformance/spec-index docs and decision log.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T23:07:49.362129Z","updated_at":"2026-02-21T23:46:09.298712Z","closed_at":"2026-02-21T23:46:09.298715Z","ephemeral":false,"dependencies":[{"issue_id":"bd-12","depends_on_id":"bd-6","type":"blocks"},{"issue_id":"bd-12","depends_on_id":"bd-4","type":"discovered-from"}]}
{"id":"bd-120","title":"[Docs] Add lifecycle/coherence flow runbook to design surface","description":"Add one operator-facing flow document for schema lifecycle + coherence gate-chain behavior, then link it from design index/map.\n\nScope:\n- add design doc with deterministic flow steps and failure semantics,\n- link from docs/design/README.md and docs/design/ARCHITECTURE-MAP.md,\n- run docs coherence checks.\n\nAcceptance:\n- flow doc is discoverable from top-level design docs,\n- lifecycle and coherence flows are described in one place,\n- docs coherence checks remain green.","notes":"Added operator flow runbook at docs/design/LIFECYCLE-COHERENCE-FLOWS.md covering schema lifecycle flow, coherence gate-chain flow, deterministic failure semantics, and rollover checklist. Linked from docs/design/README.md and docs/design/ARCHITECTURE-MAP.md. Verified with mise run docs-coherence-check.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:35:05.893484Z","updated_at":"2026-02-22T19:35:29.955499Z","closed_at":"2026-02-22T19:35:29.955503Z","ephemeral":false}
{"id":"bd-121","title":"[EPIC] Algebraic closure: sig\\Pi/CwF/spans/evidence unification","description":"Close remaining algebraic gaps so control-plane and kernel/coherence surfaces have one explicit mathematical contract.\n\nScope:\n- make the Unified Evidence Plane universal property explicit,\n- complete span/square composition laws,\n- make CwF <-> sig\\Pi bridge explicit,\n- formalize lifecycle governance and obstruction algebra,\n- stage typed evidence-object internalization path.\n\nAcceptance:\n1) one ordered issue graph covers all remaining algebraic closure work,\n2) each task has deterministic acceptance criteria and spec anchors,\n3) no parallel semantic authority path is introduced.\n\nVerification commands:\n- `mise run coherence-check`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`","notes":"Closed after bd-127 completion.\n\nAcceptance closure:\n1) Ordered issue graph completed for remaining algebraic closure work (bd-122..bd-127 all closed).\n2) Deterministic acceptance criteria and spec anchors now implemented across:\n   - Unified Evidence Plane universal factoring + fail-closed boundary,\n   - span/square composition laws,\n   - CwF <-> sig\\Pi bridge,\n   - lifecycle governance rollover/freeze,\n   - cross-layer obstruction algebra,\n   - typed evidence-object internalization stages with rollback.\n3) No parallel authority path introduced: lane ownership + unified factoring constraints remain fail-closed and docs/coherence checks pass.","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","created_at":"2026-02-22T19:41:23.709057Z","updated_at":"2026-02-22T21:52:13.369915Z","closed_at":"2026-02-22T21:52:13.369917Z","ephemeral":false,"dependencies":[{"issue_id":"bd-121","depends_on_id":"bd-122","type":"blocks","created_by":"codex"},{"issue_id":"bd-121","depends_on_id":"bd-123","type":"blocks","created_by":"codex"},{"issue_id":"bd-121","depends_on_id":"bd-124","type":"blocks","created_by":"codex"},{"issue_id":"bd-121","depends_on_id":"bd-125","type":"blocks","created_by":"codex"},{"issue_id":"bd-121","depends_on_id":"bd-126","type":"blocks","created_by":"codex"},{"issue_id":"bd-121","depends_on_id":"bd-127","type":"blocks","created_by":"codex"}]}
{"id":"bd-122","title":"[Spec] Unified Evidence Plane universal property (terminal factorization)","description":"Write normative contract text that every control-plane artifact family factors through one attested evidence surface `Ev`.\n\nScope:\n- define `Ev` object and admissible source families,\n- require deterministic natural transformation into `Ev`,\n- fail-closed on unbound/non-factorable outputs,\n- map witness payload fields to this contract.\n\nAcceptance:\n- normative section added in spec surface (with references from SPEC-INDEX),\n- coherence/docs checks reflect one-evidence-surface rule,\n- deterministic rejection semantics are documented.","notes":"Completed normative UEP factorization tightening.\n\nDelivered:\n- Updated draft/UNIFICATION-DOCTRINE §10:\n  - Unified Evidence Plane claim now MUST define one indexed evidence family.\n  - Universal factorization rule now MUST provide one deterministic eta_F : F => Ev with uniqueness under canonical projection equality.\n  - Added fail-closed factorization boundary (§10.5) with deterministic class surface:\n    - unification.evidence_factorization.missing\n    - unification.evidence_factorization.ambiguous\n    - unification.evidence_factorization.unbound\n- Updated draft/SPEC-INDEX lane-ownership note to require (MUST) unified evidence factoring and point to §10.5.\n- Added docs-coherence enforcement for these normative markers in tools/conformance/check_docs_coherence.py and unit tests in tools/conformance/test_docs_coherence.py.\n- Added Decision 0095 in specs/process/decision-log.md.\n\nValidation:\n- python3 tools/conformance/test_docs_coherence.py\n- mise run docs-coherence-check\n- mise run traceability-check\n- mise run ci-drift-budget-check","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:41:29.647006Z","updated_at":"2026-02-23T04:26:35.238916Z","closed_at":"2026-02-22T19:47:31.427348Z","ephemeral":false}
{"id":"bd-123","title":"[Spec] Span/square composition law surface (bicategory profile)","description":"Extend span/square contract from per-case commutation checks to explicit composition laws.\n\nScope:\n- identity and associative composition of spans/squares,\n- horizontal/vertical composition compatibility,\n- interchange/coherence law statements for pipeline + base-change squares,\n- deterministic witness schema for composed squares.\n\nAcceptance:\n- spec text added with executable vector plan,\n- coherence fixture obligations include composition coverage,\n- no ambiguity in typed square composition semantics.","notes":"Completed.\n\nCompact provenance summary:\n- Normative span/square composition-law surface added and enforced (`specs/premath/draft/SPAN-SQUARE-CHECKING.md` §4).\n- Coherence checker composition-law coverage added (`specs/premath/draft/PREMATH-COHERENCE.md` §4.7).\n- Executable vectors added under `tests/conformance/fixtures/coherence-site/` for golden/adversarial/invariance composition scenarios.\n- Documentation and governance linkage recorded in Decision 0096 (`specs/process/decision-log.md`).\n\nValidation path used:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:41:33.811333Z","updated_at":"2026-02-23T04:26:35.976726Z","closed_at":"2026-02-22T19:59:06.782644Z","ephemeral":false,"dependencies":[{"issue_id":"bd-123","depends_on_id":"bd-122","type":"blocks","created_by":"codex"}]}
{"id":"bd-124","title":"[Spec] CwF <-> sig\\Pi bridge contract (strict-operational vs semantic)","description":"Specify the translation boundary between strict CwF checker equalities and sig\\Pi kernel semantics.\n\nScope:\n- define correspondence between substitution/comprehension equalities and indexed reindexing/adjoint semantics,\n- state what is strict (`\\equiv`) vs semantic (`\\approx`) at each layer,\n- define admissible bridge morphisms and failure obligations.\n\nAcceptance:\n- bridge section added to profile/spec docs with explicit law mapping,\n- obligation vocabulary alignment across kernel/coherence docs,\n- deterministic checker ownership boundaries remain unchanged.","notes":"Completed CwF <-> sig\\Pi bridge contract (strict-operational vs semantic) as a vocabulary-preserving spec/profile boundary.\n\nDelivered:\n- Added `profile/ADJOINTS-AND-SITES` §11 (`CwF <-> sig\\Pi Bridge Contract`):\n  - strict vs semantic authority split,\n  - admissible bridge morphism set (`bridge.reindex`, `bridge.comprehension`, optional `bridge.adjoint_reflection`),\n  - normative law-mapping table from CwF strict equalities to semantic obligations,\n  - deterministic failure/ownership constraints (no new bridge-owned obligation IDs).\n- Updated checker-core ownership statement in `draft/PREMATH-COHERENCE` §4.16:\n  - bridge is vocabulary-preserving and fail-closed,\n  - CwF obligations remain strict checker obligations,\n  - semantic SigPi obligations remain kernel/profile obligations.\n- Updated `draft/UNIFICATION-DOCTRINE` §9.4 with explicit CwF/SigPi bridge rule.\n- Updated `draft/SPEC-INDEX` lane ownership + reading-order references for bridge section.\n- Updated `profile/README` overlay summary to include bridge section.\n- Added Decision 0097 in `specs/process/decision-log.md`.\n- Extended docs coherence enforcement for bridge drift detection:\n  - `tools/conformance/check_docs_coherence.py` marker/regex checks,\n  - `tools/conformance/test_docs_coherence.py` unit tests.\n\nValidation:\n- `python3 tools/conformance/test_docs_coherence.py`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `mise run coherence-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:41:38.121767Z","updated_at":"2026-02-23T04:26:36.613619Z","closed_at":"2026-02-22T20:03:43.469180Z","ephemeral":false,"dependencies":[{"issue_id":"bd-124","depends_on_id":"bd-122","type":"blocks","created_by":"codex"}]}
{"id":"bd-125","title":"[Governance] Lifecycle rollover/freeze contract beyond CI profile","description":"Promote schema lifecycle epoch discipline into an explicit governance contract (not only loader behavior).\n\nScope:\n- define rollover cadence, freeze exception semantics, and accountability metadata,\n- define required decision-log footprint for lifecycle changes,\n- define checker/CI consistency requirements for governance state.\n\nAcceptance:\n- governance contract text exists and is cross-referenced from lifecycle specs,\n- deterministic validations can distinguish rollover vs freeze states,\n- migration workflow is auditable and reproducible.\n\nVerification commands:\n- `mise run ci-drift-budget-check`\n- `mise run coherence-check`\n- `mise run docs-coherence-check`","notes":"Completed.\n\nCompact provenance summary:\n- Lifecycle governance mode contract formalized with `rollover|freeze` semantics and accountability fields.\n- Canonical schema location: `specs/premath/draft/CONTROL-PLANE-CONTRACT.json` (`schemaLifecycle.governance`).\n- Process contract added: `specs/process/SCHEMA-LIFECYCLE-GOVERNANCE.md`.\n- Enforcement wired in CI loader and coherence parity surfaces; drift parity updated.\n- Governance decisions recorded in Decision 0105 (with lifecycle precursors in Decisions 0093/0094).\n\nValidation path used:\n- `python3 tools/ci/test_control_plane_contract.py`\n- `mise run ci-drift-budget-check`\n- `mise run coherence-check`\n- `mise run baseline`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:41:42.907278Z","updated_at":"2026-02-23T04:26:37.368342Z","closed_at":"2026-02-22T21:47:08.876960Z","ephemeral":false,"dependencies":[{"issue_id":"bd-125","depends_on_id":"bd-122","type":"blocks","created_by":"codex"}]}
{"id":"bd-126","title":"[Spec] Cross-layer obstruction algebra (unified failure calculus)","description":"Define a reusable algebra for obstruction classes spanning kernel, coherence, lifecycle, and control-plane surfaces.\n\nScope:\n- classify obstructions as typed constructors (semantic, structural, lifecycle, commutation),\n- map existing failure classes into this algebra without losing determinism,\n- define projection of obstructions into witness payloads and issue-memory discovery flows.\n\nAcceptance:\n- obstruction algebra spec section and mapping table added,\n- compatibility mapping preserves existing failure class stability,\n- conformance vectors include at least one cross-layer obstruction roundtrip.","notes":"Implemented cross-layer obstruction algebra v0 in UNIFICATION-DOCTRINE §11 with deterministic projection/canonicalization rules and issue-memory projection tags. Added executable ci_witnesses vectors for obstruction class -> constructor -> canonical roundtrip (golden/adversarial), wired evaluator and failure classes in tools/conformance/run_capability_vectors.py, and extended docs coherence checks/tests for required obstruction references. Validation: mise run baseline (full closure) and python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses passed.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:41:49.718500Z","updated_at":"2026-02-23T04:26:38.036617Z","closed_at":"2026-02-22T20:09:37.010477Z","ephemeral":false,"dependencies":[{"issue_id":"bd-126","depends_on_id":"bd-123","type":"blocks","created_by":"codex"},{"issue_id":"bd-126","depends_on_id":"bd-124","type":"blocks","created_by":"codex"}]}
{"id":"bd-127","title":"[Roadmap] Typed evidence-object internalization plan (Premath-native Ev)","description":"Define staged migration from JSON witness payload-first surfaces to Premath-typed evidence objects while preserving current command surfaces.\n\nScope:\n- enumerate stages, invariants, and compatibility boundaries,\n- define minimal typed core object(s) to introduce first,\n- define no-regression checks for existing CI/coherence/instruction flows.\n\nAcceptance:\n- phased plan documented with clear stage gates,\n- compatibility and rollback conditions are explicit,\n- no parallel authority path introduced during migration.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `mise run coherence-check`","notes":"Completed typed evidence-object internalization roadmap contract.\n\nDelivered:\n- Added `draft/UNIFICATION-DOCTRINE` §10.6 (`Typed evidence-object internalization stages (v0)`) with:\n  - Stage 0/1/2/3 progression,\n  - explicit stage-gate invariants (`eta_F`, deterministic binding, fail-closed factorization),\n  - explicit rollback contract (deterministic rollback, single authority artifact, decision-log + issue linkage).\n- Updated `draft/SPEC-INDEX` lane ownership note and Unified Evidence Plane reading order to include §10.6 staged migration constraints.\n- Added Decision 0106 in `specs/process/decision-log.md` documenting staged migration + rollback governance.\n- Extended docs coherence tooling to enforce §10.6 markers:\n  - `tools/conformance/check_docs_coherence.py`\n  - `tools/conformance/test_docs_coherence.py`.\n- Refreshed `docs/design/ARCHITECTURE-MAP.md` section 7 to remove stale static issue sequencing and point to dynamic issue-ready resolution.\n\nValidation:\n- `python3 tools/conformance/test_docs_coherence.py`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `mise run coherence-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T19:41:54.934156Z","updated_at":"2026-02-23T04:26:38.734356Z","closed_at":"2026-02-22T21:52:03.221275Z","ephemeral":false,"dependencies":[{"issue_id":"bd-127","depends_on_id":"bd-126","type":"blocks","created_by":"codex"},{"issue_id":"bd-127","depends_on_id":"bd-124","type":"blocks","created_by":"codex"},{"issue_id":"bd-127","depends_on_id":"bd-125","type":"blocks","created_by":"codex"}]}
{"id":"bd-128","title":"[BD] Enforce issue-graph contract (epic typing + acceptance/proof checks)","description":"Add deterministic issue-graph guardrails so issue memory stays machine-actionable with minimal encoding.\n\nScope:\n- add CI check over `.premath/issues.jsonl` that enforces:\n  - `[EPIC]` title => `issue_type=epic`,\n  - active issues include explicit acceptance criteria,\n  - active issues include at least one verification command surface.\n- emit warnings (not hard-fail) for oversized issue notes to reduce drift/churn.\n- normalize existing `[EPIC]` rows and active open issues to satisfy the contract.\n\nAcceptance:\n- new check script + unit tests added,\n- check wired into `mise run ci-hygiene-check` and baseline closure,\n- `.premath/issues.jsonl` normalized to pass check deterministically.\n\nVerification commands:\n- `python3 tools/ci/test_issue_graph.py`\n- `python3 tools/ci/check_issue_graph.py`\n- `mise run ci-hygiene-check`","notes":"Implemented deterministic issue-graph contract checks and wired them into CI hygiene gate. Delivered `tools/ci/check_issue_graph.py` + `tools/ci/test_issue_graph.py`; updated `mise` task surfaces (`ci-hygiene-check` now runs repo hygiene + issue graph checks; `ci-pipeline-test` includes test_issue_graph). Normalized `.premath/issues.jsonl`: all `[EPIC]` rows now use `issue_type=epic`, and active open issues now include explicit verification command sections. Validation: `python3 tools/ci/test_issue_graph.py`, `python3 tools/ci/check_issue_graph.py`, `mise run ci-hygiene-check`, `mise run ci-pipeline-test`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:14:35.441916Z","updated_at":"2026-02-22T20:17:06.990454Z","closed_at":"2026-02-22T20:17:06.990457Z","ephemeral":false,"dependencies":[{"issue_id":"bd-128","depends_on_id":"bd-121","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-129","title":"[BD] Compact oversized issue notes into stable references","description":"Reduce JSONL churn by compacting oversized closed-issue notes while preserving provenance.\n\nScope:\n- define note compaction policy (max note length target + required retained fields),\n- migrate oversized closed rows to concise notes with links to decision-log/spec refs,\n- keep deterministic issue-graph warnings for regressions.\n\nAcceptance:\n- oversized note rows reduced below policy threshold (or explicitly allowlisted),\n- issue history/provenance remains reconstructable from refs,\n- `python3 tools/ci/check_issue_graph.py` reports zero note-size warnings.\n\nVerification commands:\n- `python3 tools/ci/check_issue_graph.py`\n- `mise run ci-hygiene-check`","notes":"Completed.\n\nCompaction policy applied:\n- kept concise provenance summaries for oversized closed-note rows,\n- retained deterministic references (spec/docs paths, decision IDs, and verification command surfaces),\n- removed long narrative duplication now preserved in git history + referenced artifacts.\n\nCompacted rows:\n- `bd-123`\n- `bd-125`\n- `bd-134`\n- `bd-34`\n- `bd-59`\n\nVerification:\n- `python3 tools/ci/check_issue_graph.py` -> warnings=0\n- `mise run ci-hygiene-check`","status":"closed","priority":3,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:17:02.716163Z","updated_at":"2026-02-22T21:54:57.922912Z","closed_at":"2026-02-22T21:54:57.922913Z","ephemeral":false,"dependencies":[{"issue_id":"bd-129","depends_on_id":"bd-128","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-13","title":"[Traceability] T-IC-01 Interop Core executable vectors","description":"Implement executable interop-core vectors and runner integration covering KCIR-CORE, REF-BINDING, NF parser/constructor contracts, WIRE-FORMATS, and ERROR-CODES.","notes":"Completed T-IC-01: added executable interop-core vectors and deterministic runner (tools/conformance/run_interop_core_vectors.py), integrated into mise conformance-run, updated traceability matrix statuses for KCIR-CORE/REF-BINDING/NF/WIRE-FORMATS/ERROR-CODES to covered, and passed full baseline.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T00:22:24.866012Z","updated_at":"2026-02-22T00:31:56.838751Z","closed_at":"2026-02-22T00:31:56.838759Z","ephemeral":false,"dependencies":[{"issue_id":"bd-13","depends_on_id":"bd-1","type":"discovered-from"}]}
{"id":"bd-130","title":"[BD/Core] Move issue-type semantics and issue-graph invariants into premath-bd","description":"Shift issue-graph authority from CI-local checks into core issue-memory semantics.\n\nScope:\n- make `issue_type` a first-class validated field in `premath-bd` (starting with `epic` and `task`),\n- add core checker operation for issue-graph invariants (epic typing, active issue acceptance/proof requirements),\n- expose checker through CLI/MCP (`premath issue check`, MCP `issue_check`),\n- keep CI as thin wrapper that executes core checker output (no duplicate semantics),\n- retain warning surface for oversized notes and establish compaction policy linkage.\n\nAcceptance:\n- authoritative invariant checks live in Rust core + CLI/MCP surfaces,\n- CI wrapper defers to core checker only,\n- existing issue graph passes core checker deterministically,\n- docs updated to clarify authority split (core vs CI wrapper).\n\nVerification commands:\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json`\n- `mise run ci-hygiene-check`","notes":"Implemented core issue-graph authority in Rust and routed wrappers to it.\n\nDelivered:\n- Added typed issue-type normalization/validation in `premath-bd` (`epic|task`) with fail-closed serde decode and write-boundary validation helpers.\n- Added `premath-bd` issue-graph checker (`check_issue_graph`) with deterministic classes:\n  - `issue_graph.issue_type.epic_mismatch`\n  - `issue_graph.acceptance.missing`\n  - `issue_graph.verification_command.missing`\n  - warning `issue_graph.notes.large`\n- Added CLI surface: `premath issue check --issues ... --note-warn-threshold ... [--json]`.\n- Added MCP read tool: `issue_check` (core-backed).\n- Hardened add/discover mutation paths (CLI + MCP) to validate `issue_type` against allowed set.\n- Converted `tools/ci/check_issue_graph.py` into a thin wrapper over core CLI checker; replaced Python unit tests with wrapper-delegation integration tests.\n- Updated command docs (`README.md`, `AGENTS.md`, `tools/ci/README.md`).\n\nValidation:\n- cargo test -p premath-bd\n- cargo test -p premath-cli\n- python3 tools/ci/test_issue_graph.py\n- cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json\n- mise run ci-hygiene-check","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:20:30.691120Z","updated_at":"2026-02-22T20:34:06.335417Z","closed_at":"2026-02-22T20:34:06.335419Z","ephemeral":false,"dependencies":[{"issue_id":"bd-130","depends_on_id":"bd-121","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-130","depends_on_id":"bd-129","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-131","title":"[BD] Define multi-lane memory contract (issues + operations + doctrine artifacts)","description":"We need a first-class memory model broader than issue rows so agents can persist how work is done, not only what work is open.\n\nAcceptance:\n- Define canonical memory lanes and authority boundaries (at minimum: issue graph lane, operations/hygiene lane, doctrine/decision lane).\n- Specify deterministic projection/query surfaces for each lane and where they are consumed (CLI/MCP/CI/docs).\n- Clarify write discipline: what belongs in `.premath/issues.jsonl` vs `.premath/OPERATIONS.md` vs decision/spec artifacts.\n- Add one short migration plan for existing conventions currently only implied in `AGENTS.md`.\n\nVerification commands:\n- cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json\n- mise run docs-coherence-check\n- mise run ci-hygiene-check","notes":"Implemented multi-lane memory contract and write-discipline glue.\n\nDelivered:\n- Added `docs/design/MEMORY-LANES-CONTRACT.md` with canonical lane split:\n  issue graph lane (`.premath/issues.jsonl`), operations lane (`.premath/OPERATIONS.md`), doctrine/decision lane (`specs/*` + decision log).\n- Added deterministic query/projection surfaces and consumers for each lane (CLI/MCP/CI/docs).\n- Added explicit lane glue + write-discipline rules (what belongs where and what does not).\n- Updated `docs/design/README.md` to include memory-lanes contract in design index.\n- Updated `AGENTS.md` with `Memory Lane Discipline` section to reduce convention drift.\n- Updated `.premath/OPERATIONS.md` evidence schema with `Issue` and `Decision` columns for deterministic cross-lane references.\n- Added decision log entry 0104 (`specs/process/decision-log.md`) documenting lane split and rationale.\n\nVerification:\n- `cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json`\n- `mise run docs-coherence-check`\n- `mise run ci-hygiene-check`\n\nNote:\n- Existing large-note warnings remain (`bd-123`, `bd-134`, `bd-34`, `bd-59`) and are within scope of `bd-129` (compaction).","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:32:28.775613Z","updated_at":"2026-02-22T21:39:10.044830Z","closed_at":"2026-02-22T21:39:10.044831Z","ephemeral":false,"dependencies":[{"issue_id":"bd-131","depends_on_id":"bd-121","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-132","title":"[Tusk] Agent harness contract mapped to Tusk runtime (durability, hooks, trajectory evidence)","description":"Map 2026 agent-harness responsibilities into Premath/Tusk with minimum encoding and explicit authority boundaries.\n\nContext:\n- Source: https://www.philschmid.de/agent-harness-2026\n- Working hypothesis: Tusk is the harness locus in this repo.\n\nAcceptance:\n- Define a concise harness contract section for Tusk covering:\n  - lifecycle hooks (boot/step/stop),\n  - long-run durability controls (context compaction/offloading/sub-agent boundaries),\n  - deterministic verification/retry boundaries,\n  - trajectory/evidence capture surfaces (for hill-climbing and replay).\n- Map each contract clause to existing concrete surfaces (`mcp-serve`, instruction pipeline, observation surface, issue memory) and identify explicit gaps.\n- Add one implementation-slice plan with 2-4 concrete tasks that can be executed without full mathematical generalization.\n- Preserve non-authority rule: model outputs remain proposals; checker/discharge artifacts remain authoritative.\n\nVerification commands:\n- cargo run --package premath-cli -- mcp-serve --issues .premath/issues.jsonl --issue-query-backend jsonl --mutation-policy instruction-linked --surface artifacts/observation/latest.json --repo-root .\n- cargo run --package premath-cli -- observe --surface artifacts/observation/latest.json --mode latest --json\n- mise run ci-hygiene-check","notes":"Completed harness-contract definition pass and mapped it to current runtime/control surfaces.\n\nDelivered:\n- Added `docs/design/TUSK-HARNESS-CONTRACT.md` with:\n  - explicit hook model (`boot`/`step`/`stop`),\n  - durability contract (fresh-context restartability, compaction/offload, explicit sub-agent boundaries),\n  - deterministic verification/retry contract,\n  - trajectory/evidence capture contract,\n  - concrete mapping table to existing surfaces (`mcp-serve`, instruction pipeline/witness, Observation Surface, issue/event memory),\n  - explicit current gap list,\n  - 4-slice implementation plan.\n- Linked harness overlay from:\n  - `docs/design/README.md`\n  - `docs/design/TUSK-ARCHITECTURE.md`\n  - `docs/design/ARCHITECTURE-MAP.md`\n- Added decision-log entry:\n  - `specs/process/decision-log.md` Decision 0099.\n- Opened concrete follow-on implementation tasks discovered from bd-132:\n  - `bd-133` handoff artifact + bootstrap command\n  - `bd-134` typed feature ledger + closure check\n  - `bd-135` step trajectory log + witness-linked projection\n  - `bd-136` deterministic retry policy table + enforcement hook\n\nValidation:\n- `mise run docs-coherence-check`\n- `mise run ci-hygiene-check`\n- `python3 tools/conformance/check_spec_traceability.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:36:04.387622Z","updated_at":"2026-02-22T20:47:18.345205Z","closed_at":"2026-02-22T20:47:18.345207Z","ephemeral":false,"dependencies":[{"issue_id":"bd-132","depends_on_id":"bd-121","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-133","title":"[Tusk/Harness] Add session handoff artifact + bootstrap command surface","description":"Implement the minimal handoff contract for fresh-context restartability.\n\nScope:\n- define a deterministic `HarnessSession` JSON artifact schema under `.premath/` (or artifacts) with fields needed for `boot` and `stop` hooks,\n- add CLI command surface to read/write/bootstrap this artifact,\n- ensure handoff references issue id, instruction/witness refs, and next-step recommendation without duplicating full payloads.\n\nAcceptance:\n- schema documented and committed,\n- command surface supports deterministic read/write/update,\n- integration test proves one session can stop and next session can boot from artifact.\n\nVerification commands:\n- cargo test -p premath-cli\n- mise run ci-hygiene-check","notes":"Implemented `HarnessSession` stop/boot handoff slice with deterministic CLI command surface and integration smoke coverage.\n\nDelivered:\n- Added `premath harness-session` command surface:\n  - `read`, `write`, `bootstrap` subcommands in `crates/premath-cli/src/cli.rs`.\n  - dispatch wiring in `crates/premath-cli/src/main.rs`.\n  - module registration in `crates/premath-cli/src/commands/mod.rs`.\n- Added command implementation in `crates/premath-cli/src/commands/harness_session.rs`:\n  - canonical artifact kind/schema: `premath.harness.session.v1` / `schema=1`.\n  - canonical bootstrap kind: `premath.harness.bootstrap.v1`.\n  - deterministic ref normalization (sorted+deduped `instructionRefs`/`witnessRefs`).\n  - deterministic issue-memory linkage via `issuesSnapshotRef` (`store_snapshot_ref`).\n  - update-in-place behavior preserving `sessionId`/`startedAt` unless overridden.\n- Added integration smoke test:\n  - `harness_session_write_read_bootstrap_json_smoke` in `crates/premath-cli/tests/cli_smoke.rs`.\n  - validates stop->bootstrap(`resume`), update->bootstrap(`attach`), read surface, and deterministic fields.\n- Documented schema/surface:\n  - added `docs/design/TUSK-HARNESS-SESSION.md`.\n  - updated `docs/design/README.md` and `docs/design/TUSK-HARNESS-CONTRACT.md`.\n  - updated `AGENTS.md` command reference with `harness-session` commands.\n\nVerification:\n- `cargo test -p premath-cli`\n- `mise run ci-hygiene-check`\n- `mise run docs-coherence-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:46:26.736045Z","updated_at":"2026-02-22T20:55:51.330288Z","closed_at":"2026-02-22T20:55:51.330292Z","ephemeral":false,"dependencies":[{"issue_id":"bd-133","depends_on_id":"bd-132","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-134","title":"[Tusk/Harness] Add typed feature ledger + closure check","description":"Introduce machine-readable per-feature progress state to prevent one-shotting and enable deterministic stop conditions.\n\nScope:\n- define `HarnessFeatureLedger` schema (feature id, status, verification refs, last update),\n- add command/check surface to validate ledger shape + completeness,\n- integrate with boot routine to pick next unfinished feature deterministically.\n\nAcceptance:\n- ledger schema + parser/checker implemented,\n- command surface emits deterministic pass/fail details,\n- tests cover incomplete/malformed/complete ledgers.\n\nVerification commands:\n- cargo test -p premath-cli\n- mise run ci-hygiene-check","notes":"Completed.\n\nCompact provenance summary:\n- Added typed feature-ledger surface + closure checks in CLI (`harness-feature`).\n- Core implementation: `crates/premath-cli/src/commands/harness_feature.rs`.\n- Session bootstrap integration projects deterministic next-feature fields via `harness-session bootstrap`.\n- Design docs: `docs/design/TUSK-HARNESS-FEATURE-LEDGER.md`, `docs/design/TUSK-HARNESS-SESSION.md`, `docs/design/TUSK-HARNESS-CONTRACT.md`.\n- Architectural lineage: harness overlay direction captured in Decision 0099.\n\nValidation path used:\n- `cargo test -p premath-cli`\n- `mise run ci-hygiene-check`\n- `mise run docs-coherence-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:46:37.088908Z","updated_at":"2026-02-22T21:54:45.459618Z","closed_at":"2026-02-22T21:02:28.460574Z","ephemeral":false,"dependencies":[{"issue_id":"bd-134","depends_on_id":"bd-132","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-135","title":"[Tusk/Harness] Add step trajectory log + witness-linked projection","description":"Capture bounded step trajectories as first-class operational memory, linked to authoritative witness artifacts.\n\nScope:\n- define append-only step trajectory row schema (step id, issue id, action, result class, witness refs, timestamps),\n- add reducer/query projection for latest/failed/retry-needed step views,\n- keep trajectory lane non-authoritative (references only; no duplicated witness semantics).\n\nAcceptance:\n- deterministic row schema + projection query implemented,\n- command surface returns stable JSON for latest/failed subsets,\n- tests verify deterministic projection under fixed inputs.\n\nVerification commands:\n- cargo test -p premath-surreal\n- cargo test -p premath-cli\n- mise run ci-observation-test","notes":"Implemented append-only harness step trajectory lane with witness-linked deterministic projections.\n\nDelivered:\n- Added trajectory core in `premath-surreal` (`crates/premath-surreal/src/trajectory.rs`):\n  - row schema/kind: `schema=1`, `stepKind=premath.harness.step.v1`.\n  - append + read API: `append_trajectory_row`, `read_trajectory_rows`.\n  - deterministic projection API: `project_trajectory` with modes `latest|failed|retry_needed` and stable ordering (`finishedAt` desc, then `stepId`, `action`).\n  - projection kind: `premath.harness.trajectory.projection.v1`.\n- Exported trajectory APIs/constants from `crates/premath-surreal/src/lib.rs`.\n- Added CLI command surface `harness-trajectory`:\n  - `append` and `query` wired via `crates/premath-cli/src/cli.rs`, `crates/premath-cli/src/main.rs`, `crates/premath-cli/src/commands/mod.rs`, `crates/premath-cli/src/commands/harness_trajectory.rs`.\n- Added CLI smoke coverage for append/query + subsets in `crates/premath-cli/tests/cli_smoke.rs`.\n- Added design docs and cross-links:\n  - `docs/design/TUSK-HARNESS-TRAJECTORY.md`\n  - updated `docs/design/TUSK-HARNESS-CONTRACT.md`, `docs/design/README.md`, `AGENTS.md`.\n\nVerification:\n- `cargo test -p premath-surreal`\n- `cargo test -p premath-cli`\n- `mise run ci-observation-test`\n- `mise run ci-hygiene-check`\n- `mise run docs-coherence-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:46:46.197419Z","updated_at":"2026-02-22T21:08:21.308976Z","closed_at":"2026-02-22T21:08:21.308978Z","ephemeral":false,"dependencies":[{"issue_id":"bd-135","depends_on_id":"bd-132","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-136","title":"[Tusk/Harness] Encode deterministic retry policy table + hook enforcement","description":"Make retry behavior explicit and machine-checkable for long-running harness steps.\n\nScope:\n- define retry-policy table keyed by failure classes (max attempts, backoff class, escalation action),\n- add enforcement helper used by harness step loop / pipeline wrappers,\n- ensure escalation path is deterministic (`issue_discover`, blocked marker, or stop with handoff).\n\nAcceptance:\n- policy table committed in one canonical path,\n- helper returns deterministic retry/escalate decision per failure class,\n- tests cover semantic failures vs operational transient failures.\n\nVerification commands:\n- python3 tools/ci/test_pipeline_required.py\n- python3 tools/ci/test_pipeline_instruction.py\n- mise run ci-pipeline-test","notes":"Implemented deterministic harness retry policy table + enforcement hooks for provider-neutral CI wrappers.\n\nDelivered:\n- Added canonical retry policy registry and artifact:\n  - `policies/control/README.md`\n  - `policies/control/harness-retry-policy-v1.json` (`ci.harness.retry.policy.v1`, digest-validated)\n- Added shared helper:\n  - `tools/ci/harness_retry_policy.py`\n  - policy schema/digest validation\n  - deterministic failure-class extraction from witness payload/path\n  - deterministic attempt-level retry/escalation decisions\n- Wired wrappers to enforce policy:\n  - `tools/ci/pipeline_required.py`\n  - `tools/ci/pipeline_instruction.py`\n  - both now support `--retry-policy`, classify failures from emitted witness artifacts, retry deterministically, and record escalation action on terminal failure.\n  - both append retry policy + retry history to markdown summary output.\n- Added tests:\n  - `tools/ci/test_harness_retry_policy.py` (semantic vs transient/operational classification + witness extraction)\n  - extended `tools/ci/test_pipeline_required.py` and `tools/ci/test_pipeline_instruction.py` for retry metadata rendering.\n  - added new test to `mise run ci-pipeline-test` task list.\n- Updated design docs and ops guidance:\n  - `docs/design/TUSK-HARNESS-RETRY-POLICY.md` (new)\n  - `docs/design/TUSK-HARNESS-CONTRACT.md` (gap updated)\n  - `docs/design/CI-CLOSURE.md`, `docs/design/README.md`\n  - `AGENTS.md` (retry-policy wrapper conventions)\n\nVerification:\n- `python3 tools/ci/test_harness_retry_policy.py`\n- `python3 tools/ci/test_pipeline_required.py`\n- `python3 tools/ci/test_pipeline_instruction.py`\n- `mise run ci-pipeline-test`\n- `mise run docs-coherence-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T20:46:55.429480Z","updated_at":"2026-02-22T21:18:24.282661Z","closed_at":"2026-02-22T21:18:24.282664Z","ephemeral":false,"dependencies":[{"issue_id":"bd-136","depends_on_id":"bd-132","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-137","title":"[Tusk/Harness] Wire retry escalation actions to premath-bd mutations","description":"Implement deterministic escalation execution for harness retry-policy terminal actions.\n\nScope:\n- map terminal retry decisions in provider-neutral wrappers to concrete issue-memory mutations,\n- support at least:\n  - `issue_discover`: create follow-up discovered issue with retry decision + failure class context,\n  - `mark_blocked`: update active issue status to blocked with deterministic notes,\n  - `stop`: no mutation, explicit terminal log only,\n- keep wrappers fail-closed on mutation errors (no silent pass-through).\n\nInputs:\n- active issue id from env (`PREMATH_ACTIVE_ISSUE_ID` fallback `PREMATH_ISSUE_ID`),\n- witness refs (`artifacts/ciwitness/latest-required.json` or instruction witness path),\n- retry policy metadata (`policyId`, `policyDigest`, rule + failure classes + attempt).\n\nAcceptance:\n- deterministic escalation helper shared by both wrappers,\n- unit tests for each escalation action path with and without active issue id,\n- docs update for env contract and escalation behavior.\n\nVerification commands:\n- python3 tools/ci/test_pipeline_required.py\n- python3 tools/ci/test_pipeline_instruction.py\n- mise run ci-pipeline-test","notes":"Implemented deterministic terminal retry escalation wiring into premath-bd mutation flow.\n\nDelivered:\n- Added shared escalation bridge:\n  - `tools/ci/harness_escalation.py`\n  - maps retry terminal actions to `premath issue` mutations:\n    - `issue_discover` -> `premath issue discover`\n    - `mark_blocked` -> `premath issue update --status blocked --notes ...`\n    - `stop` -> no mutation\n  - active issue env contract:\n    - `PREMATH_ACTIVE_ISSUE_ID` (fallback `PREMATH_ISSUE_ID`)\n    - optional issues path override `PREMATH_ISSUES_PATH`\n  - deterministic escalation note payload + note digest.\n- Integrated wrapper enforcement:\n  - `tools/ci/pipeline_required.py`\n  - `tools/ci/pipeline_instruction.py`\n  - terminal retry decisions now execute escalation bridge and include escalation metadata in summaries.\n  - mutation errors are fail-closed (`exit 2`) with typed escalation error metadata.\n- Added tests:\n  - `tools/ci/test_harness_escalation.py` (discover / mark_blocked / stop / missing issue context / command failure)\n  - extended wrapper summary tests:\n    - `tools/ci/test_pipeline_required.py`\n    - `tools/ci/test_pipeline_instruction.py`\n  - included in `mise run ci-pipeline-test` via `.mise.toml`.\n- Updated docs/ops:\n  - `docs/design/TUSK-HARNESS-RETRY-POLICY.md`\n  - `docs/design/TUSK-HARNESS-CONTRACT.md`\n  - `docs/design/CI-CLOSURE.md`\n  - `AGENTS.md`\n  - decision log entry 0101 in `specs/process/decision-log.md`.\n\nVerification:\n- `python3 tools/ci/test_harness_escalation.py`\n- `python3 tools/ci/test_pipeline_required.py`\n- `python3 tools/ci/test_pipeline_instruction.py`\n- `mise run ci-pipeline-test`\n- `mise run docs-coherence-check`\n- `mise run ci-hygiene-check`\n- `mise run ci-command-surface-check`\n- `mise run ci-pipeline-check`\n- `mise run ci-wiring-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T21:20:31.489586Z","updated_at":"2026-02-22T21:25:08.435371Z","closed_at":"2026-02-22T21:25:08.435374Z","ephemeral":false,"dependencies":[{"issue_id":"bd-137","depends_on_id":"bd-136","type":"discovered-from"}]}
{"id":"bd-138","title":"[Spec Glue] Bind harness retry/escalation contract into normative control-plane surfaces","description":"Ensure retry/escalation behavior is represented in normative spec artifacts (not only design docs).\n\nScope:\n- extend `draft/CONTROL-PLANE-CONTRACT.json` with typed harness retry/escalation bindings,\n- update `tools/ci/control_plane_contract.py` loader and exported constants,\n- update drift checks/tests to fail closed on contract/loader drift for harness retry bindings,\n- update `raw/PREMATH-CI` and `draft/SPEC-INDEX` references so capability-scoped CI spec explicitly includes retry/escalation contract,\n- update coherence contract operation surfaces where needed.\n\nAcceptance:\n- deterministic tests pass (`test_control_plane_contract`, `ci-pipeline-test`, docs/coherence checks),\n- spec text clearly states retry/escalation boundary as control-plane authority, not semantic authority.\n\nVerification commands:\n- python3 tools/ci/test_control_plane_contract.py\n- python3 tools/ci/test_drift_budget.py\n- mise run ci-pipeline-test\n- mise run docs-coherence-check","notes":"Glued harness retry/escalation behavior into typed spec surfaces and fail-closed contract checks.\n\nDelivered:\n- Extended `draft/CONTROL-PLANE-CONTRACT.json` with `harnessRetry` contract:\n  - `policyKind`, `policyPath`, `escalationActions`, `activeIssueEnvKeys`, `issuesPathEnvKey`.\n- Extended control-plane contract loader/constants:\n  - `tools/ci/control_plane_contract.py` validates + exports harnessRetry fields.\n- Extended drift-budget parity enforcement:\n  - `tools/ci/check_drift_budget.py` now checks contract/loader parity for harnessRetry fields.\n  - Updated tests in `tools/ci/test_drift_budget.py`.\n- Extended control-plane contract tests:\n  - `tools/ci/test_control_plane_contract.py` validates harnessRetry shape and duplicate-action rejection.\n- Spec text glue updates:\n  - `specs/premath/draft/PREMATH-COHERENCE.md` (`gate_chain_parity` now includes harnessRetry binding checks)\n  - `specs/premath/raw/PREMATH-CI.md` (new retry/escalation control-loop binding clauses)\n  - `specs/premath/draft/SPEC-INDEX.md` (`CONTROL-PLANE-CONTRACT` descriptor includes harness retry/escalation bindings)\n- Decision log update:\n  - Added Decision 0102 in `specs/process/decision-log.md`.\n\nVerification:\n- `python3 tools/ci/test_control_plane_contract.py`\n- `python3 tools/ci/test_drift_budget.py`\n- `mise run ci-pipeline-test`\n- `mise run docs-coherence-check`\n- `mise run ci-drift-budget-check`\n- `mise run ci-hygiene-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T21:27:34.550608Z","updated_at":"2026-02-22T21:29:37.986132Z","closed_at":"2026-02-22T21:29:37.986136Z","ephemeral":false,"dependencies":[{"issue_id":"bd-138","depends_on_id":"bd-137","type":"discovered-from"}]}
{"id":"bd-139","title":"[Tusk/Harness] Default active issue context from harness-session artifact","description":"Ensure escalation mutation paths do not depend on externally exported env vars when harness session state already carries issue context.\n\nScope:\n- extend escalation context resolution to fallback from canonical harness-session artifact when `PREMATH_ACTIVE_ISSUE_ID` / `PREMATH_ISSUE_ID` are unset,\n- support path override env for session artifact (`PREMATH_HARNESS_SESSION_PATH`), default `.premath/harness_session.json`,\n- keep fail-closed behavior for malformed session artifacts,\n- update tests and docs.\n\nAcceptance:\n- deterministic active issue resolution source order: env -> harness-session -> none,\n- escalation tests cover session fallback,\n- docs/spec/control-plane contract reflect fallback binding.\n\nVerification commands:\n- python3 tools/ci/test_harness_escalation.py\n- python3 tools/ci/test_drift_budget.py\n- mise run ci-pipeline-test\n- mise run docs-coherence-check","notes":"Implemented deterministic active-issue resolution for escalation: env (`PREMATH_ACTIVE_ISSUE_ID`,`PREMATH_ISSUE_ID`) then harness-session artifact (`PREMATH_HARNESS_SESSION_PATH` or `.premath/harness_session.json`, field `issueId`). Added fail-closed session parse/read errors, extended control-plane contract (`harnessRetry`) + loader constants + drift-budget parity checks + unit tests. Updated design/spec docs to remove env-only gap and document session fallback binding. Verification: `mise run ci-pipeline-test`, `mise run ci-drift-budget-check`, `mise run docs-coherence-check`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T21:31:40.852315Z","updated_at":"2026-02-22T21:34:49.295418Z","closed_at":"2026-02-22T21:34:49.295421Z","ephemeral":false,"dependencies":[{"issue_id":"bd-139","depends_on_id":"bd-137","type":"discovered-from"}]}
{"id":"bd-14","title":"[Traceability] T-GATE-01 Canonical Gate vectors","description":"Promote tests/conformance/fixtures/gate from placeholder to executable deterministic golden/adversarial Gate vectors and wire into merge-gated conformance command surface.","notes":"Completed T-GATE-01: added canonical gate fixture suite under tests/conformance/fixtures/gate with deterministic runner tools/conformance/run_gate_vectors.py, integrated gate vectors into mise conformance-run, updated traceability matrix to mark GATE covered, and passed full baseline.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T00:22:29.628179Z","updated_at":"2026-02-22T00:36:32.943940Z","closed_at":"2026-02-22T00:36:32.943941Z","ephemeral":false,"dependencies":[{"issue_id":"bd-14","depends_on_id":"bd-1","type":"discovered-from"}]}
{"id":"bd-140","title":"[Ev] Stage 1 typed-core dual projection execution checklist","description":"Execute `draft/UNIFICATION-DOCTRINE` §10.6 Stage 1 (typed-core dual projection) with fail-closed parity and no parallel authority path.\n\nScope:\n- define minimal typed-core evidence identity surface for Stage 1 (typed projection profile; deterministic ref shape),\n- define deterministic dual-projection parity contract (payload authority <-> typed-core projection),\n- enforce fail-closed parity classes for mismatch/missing/unbound bindings,\n- bind parity comparison to deterministic context (`normalizerId`, `policyDigest`),\n- define rollback trigger/criteria that return to Stage 0 deterministically without identity drift,\n- wire checker/docs/conformance surfaces so Stage 1 claims are machine-checkable.\n\nAcceptance:\n1) Stage 1 checklist is explicit and executable (contract + checker hooks),\n2) dual-projection parity failures are deterministic and fail closed,\n3) no second authority artifact is introduced during Stage 1,\n4) rollback path is explicit and replayable.\n\nVerification commands:\n- `mise run coherence-check`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nDelivered:\n- Stage 1 parity contract + checker wiring (`UNIFICATION-DOCTRINE` §10.6.1/§10.6.2; `CONTROL-PLANE-CONTRACT` `evidenceStage1Parity`; `premath-coherence` fail-closed classes `stage1_parity_invalid|missing|mismatch|unbound`).\n- Stage 1 rollback witness contract (`UNIFICATION-DOCTRINE` §10.6.3; `CONTROL-PLANE-CONTRACT` `evidenceStage1Rollback`; `premath-coherence` fail-closed classes `stage1_rollback_invalid|precondition_missing|failure_class_mismatch|unbound`).\n- Coherence-site gate-chain vectors extended with Stage 1 accept/reject rows (`gate_chain_parity_stage1_*`).\n- Docs/traceability/drift glue: docs coherence parser/tests validate Stage 1 parity+rollback contract shape; traceability row updated; control-plane loader + drift-budget checks include Stage 1 fields.\n- Decision log updated (Decision 0108); Stage 1 checklist marked complete.\n\nVerification:\n`cargo test -p premath-coherence`; `python3 tools/conformance/test_docs_coherence.py`; `python3 tools/ci/test_control_plane_contract.py`; `python3 tools/ci/test_drift_budget.py`; `mise run coherence-check`; `mise run docs-coherence-check`; `mise run traceability-check`; `mise run ci-drift-budget-check`; `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T21:59:49.450390Z","updated_at":"2026-02-22T22:18:58.942731Z","closed_at":"2026-02-22T22:18:47.747593Z","ephemeral":false,"dependencies":[{"issue_id":"bd-140","depends_on_id":"bd-127","type":"discovered-from"}]}
{"id":"bd-141","title":"[Ev] Stage 2 typed-authority cutover with kernel-compliance guardrails","description":"Execute `draft/UNIFICATION-DOCTRINE` Stage 2 (`§10.6`) by making typed evidence the sole authority artifact while keeping legacy payloads as compatibility aliases only, with continuous kernel-compliance checks until bidirectional checker cutover is complete.\n\nSemantic/doctrine anchors:\n- `draft/DOCTRINE-INF` preservation boundary (lower layers must publish preserved morphism classes; no semantic authority drift),\n- `draft/PREMATH-KERNEL` + `draft/GATE` + `draft/BIDIR-DESCENT` as admissibility/discharge authority,\n- `profile/ADJOINTS-AND-SITES` as normative SigPi/site overlay obligations,\n- `raw/SEMANTICS-INFTOPOS` as informational model-theoretic semantics guide (non-normative, but alignment target for descent/sheaf intuition).\n\nScope:\n- define explicit Stage 2 authority contract fields in `draft/CONTROL-PLANE-CONTRACT.json` (typed authority kind/id + legacy alias role/bounds),\n- enforce fail-closed checker rules that reject any legacy alias used as authority,\n- enforce lifecycle-governed alias windows through existing `schemaLifecycle` table,\n- enforce deterministic typed<->alias projection parity (legacy payload is projection only),\n- add kernel-compliance guardrail checks proving Stage 2 outputs preserve kernel/Gate obligations (`stability`, `locality`, `descent_exists`, `descent_contractible`, `adjoint_triple`, `ext_gap`, `ext_ambiguous`) until full bidir checker wiring is complete,\n- add conformance vectors for Stage 2 golden/adversarial/invariance paths,\n- update docs/traceability and decision log.\n\nAcceptance:\n1) Stage 2 typed authority is explicit and machine-checked; no parallel authority route,\n2) alias expiry/misuse fails closed deterministically,\n3) Stage 2 flows continuously demonstrate kernel/Gate compliance through existing checker+vector surfaces,\n4) traceability row maps Stage 2 clauses to executable checks.\n\nSuggested deterministic failure classes (minimum):\n- `unification.evidence_stage2.authority_alias_violation`\n- `unification.evidence_stage2.alias_window_violation`\n- `unification.evidence_stage2.kernel_compliance_missing`\n- `unification.evidence_stage2.kernel_compliance_drift`\n- `unification.evidence_stage2.unbound`\n\nVerification commands:\n- `mise run coherence-check`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `mise run ci-drift-budget-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nStage 2 typed-authority cutover with kernel-compliance guardrails is now closed across the tracked workset (`bd-142`..`bd-146`):\n- typed authority contract and Stage 2 failure-class boundaries added to control-plane contract + coherence checker surfaces,\n- Stage 2 fail-closed checker enforcement + kernel-compliance sentinel checks implemented,\n- Stage 2 conformance vectors landed (`gate_chain_parity_stage2_*` + capability boundary-authority vectors),\n- typed-authority-first consumer cutover completed across required/instruction/decision/observation surfaces,\n- docs/traceability closure completed (`UNIFICATION-DOCTRINE` §10.6.4, `SPEC-TRACEABILITY` status=covered, Decision 0109).\n\nVerification set executed during closure:\n- `mise run coherence-check`\n- `python3 tools/conformance/run_capability_vectors.py`\n- `mise run ci-pipeline-test`\n- `mise run ci-command-surface-check`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T22:25:23.743848Z","updated_at":"2026-02-22T23:23:58.955483Z","closed_at":"2026-02-22T23:23:58.955489Z","ephemeral":false,"dependencies":[{"issue_id":"bd-141","depends_on_id":"bd-140","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-141","depends_on_id":"bd-142","type":"blocks","created_by":"codex"},{"issue_id":"bd-141","depends_on_id":"bd-143","type":"blocks","created_by":"codex"},{"issue_id":"bd-141","depends_on_id":"bd-144","type":"blocks","created_by":"codex"},{"issue_id":"bd-141","depends_on_id":"bd-145","type":"blocks","created_by":"codex"},{"issue_id":"bd-141","depends_on_id":"bd-146","type":"blocks","created_by":"codex"}]}
{"id":"bd-142","title":"[Ev/Stage2] Contract authority fields + alias lifecycle bounds","description":"Implement Stage 2 authority shape in `specs/premath/draft/CONTROL-PLANE-CONTRACT.json`.\n\nScope:\n- add explicit `evidenceAuthority` fields (typed authority kind/id) and explicit legacy alias role,\n- bind alias validity windows to `schemaLifecycle`,\n- define fail-closed behavior when alias is outside lifecycle window,\n- keep Stage 1 compatibility while making authority semantics unambiguous.\n\nAcceptance:\n1) Contract has machine-checkable authority/alias fields,\n2) Alias lifecycle bounds are explicit and validated,\n3) Existing consumers can read legacy aliases only as compatibility projections.\n\nVerification commands:\n- `mise run coherence-check`\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Implemented Stage 2 authority contract shape and lifecycle binding.\n\nDelivered:\n- Added `evidenceStage2Authority` to `specs/premath/draft/CONTROL-PLANE-CONTRACT.json` with typed authority refs, explicit compatibility alias role (`projection_only`), support window, and canonical Stage 2 failure classes.\n- Extended `tools/ci/control_plane_contract.py` loader validation for Stage 2 (fail-closed on role mismatch, alias window mismatch/expiry, unbound refs, and failure-class drift).\n- Added loader exports for Stage 2 constants (profile/activeStage/failure classes/alias role+window).\n- Extended docs coherence parser/tests to validate Stage 2 contract shape when present.\n- Added Stage 2 gate-chain parity evaluation in `crates/premath-coherence` with deterministic failure classes and lifecycle-window alignment checks.\n- Extended drift-budget sentinel to include Stage 2 contract/checker/loader parity.\n\nVerification:\n- `python3 tools/ci/test_control_plane_contract.py`\n- `python3 tools/conformance/test_docs_coherence.py`\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `mise run docs-coherence-check`\n- `mise run ci-drift-budget-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T22:30:19.407882Z","updated_at":"2026-02-22T22:40:35.033112Z","closed_at":"2026-02-22T22:40:35.033116Z","ephemeral":false}
{"id":"bd-143","title":"[Ev/Stage2] Checker fail-closed authority cutover + kernel-compliance sentinel","description":"Update coherence checks to enforce Stage 2 authority.\n\nScope:\n- reject legacy alias usage as authority (`authority_alias_violation`),\n- reject missing/unbound Stage 2 fields (`unbound`),\n- add deterministic kernel-compliance sentinel checks for required obligations during transition,\n- keep checks pinned to kernel/GATE/BIDIR authority boundaries.\n\nAcceptance:\n1) Stage 2 authority misuse fails closed,\n2) Kernel-compliance sentinel emits deterministic pass/fail classes,\n3) No parallel authority route remains in checker logic.\n\nVerification commands:\n- `mise run coherence-check`\n- `mise run ci-drift-budget-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nImplemented Stage 2 checker fail-closed authority cutover guardrails with kernel-compliance sentinel:\n- Added `evidenceStage2Authority.kernelComplianceSentinel` to `CONTROL-PLANE-CONTRACT` with canonical required obligations (`stability`, `locality`, `descent_exists`, `descent_contractible`, `adjoint_triple`, `ext_gap`, `ext_ambiguous`) and canonical failure classes (`kernel_compliance_missing`, `kernel_compliance_drift`).\n- Extended control-plane contract loader + tests to require/validate sentinel shape fail-closed.\n- Extended docs-coherence parser + tests to validate Stage 2 kernel sentinel and surface typed metadata.\n- Extended coherence checker to enforce Stage 2 kernel sentinel parity against required bidirectional obligations + kernel registry presence + canonical class mapping.\n- Extended gate-chain parity vectors/tests for Stage 2 kernel sentinel obligation/class mismatch rejection.\n- Extended drift-budget check to compare Stage 2 kernel sentinel contract/checker/loader surfaces.\n\nVerification:\n- `python3 tools/ci/test_control_plane_contract.py`\n- `python3 tools/conformance/test_docs_coherence.py`\n- `python3 tools/ci/test_drift_budget.py`\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `mise run docs-coherence-check`\n- `mise run ci-drift-budget-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T22:30:19.430922Z","updated_at":"2026-02-22T22:47:41.488669Z","closed_at":"2026-02-22T22:47:41.488672Z","ephemeral":false,"dependencies":[{"issue_id":"bd-143","depends_on_id":"bd-142","type":"blocks","created_by":"codex"}]}
{"id":"bd-144","title":"[Ev/Stage2] Conformance vectors for authority/alias and kernel guardrails","description":"Add Stage 2 conformance vectors and invariance/adversarial fixtures.\n\nScope:\n- golden vectors for typed-authority canonical path,\n- adversarial vectors for alias misuse/window violations,\n- invariance vectors for typed<->alias projection determinism,\n- vectors for kernel-compliance-missing and kernel-compliance-drift.\n\nAcceptance:\n1) Stage 2 vector family executes in existing conformance path,\n2) Failure classes map to deterministic checker outputs,\n3) Traceability rows can bind each Stage 2 clause to executable fixtures.\n\nVerification commands:\n- `python3 tools/conformance/run_capability_vectors.py`\n- `mise run coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nDelivered Stage 2 conformance coverage for authority/alias and kernel guardrails:\n- Extended `gate_chain_parity` fixture evaluator (`premath-coherence`) to execute Stage 2 authority checks in fixture mode (previously fixture path only exercised Stage 1 + lane registry).\n- Added Stage 2 vectors under `tests/conformance/fixtures/coherence-site`:\n  - golden: `gate_chain_parity_stage2_accept`\n  - adversarial: `gate_chain_parity_stage2_alias_role_reject`, `gate_chain_parity_stage2_alias_window_reject`, `gate_chain_parity_stage2_unbound_binding_reject`, `gate_chain_parity_stage2_kernel_missing_reject`, `gate_chain_parity_stage2_kernel_drift_reject`\n  - invariance: `gate_chain_parity_stage2_projection_permuted_accept` (+ external profile pair)\n- Wired all new Stage 2 vectors into `coherence-site/manifest.json` (`vectors` + `obligationVectors.gate_chain_parity`).\n\nOutcome:\n- Stage 2 fixture family now exercises deterministic fail-closed classes for alias misuse/window and kernel sentinel missing/drift paths through executable coherence-site vectors.\n\nVerification:\n- `mise run coherence-check`\n- `python3 tools/conformance/run_capability_vectors.py`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`\n- `cargo test -p premath-coherence`\n- `mise run docs-coherence-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T22:30:19.445010Z","updated_at":"2026-02-22T22:56:50.807187Z","closed_at":"2026-02-22T22:56:50.807191Z","ephemeral":false,"dependencies":[{"issue_id":"bd-144","depends_on_id":"bd-143","type":"blocks","created_by":"codex"}]}
{"id":"bd-145","title":"[Ev/Stage2] Documentation + traceability closure for authority flip","description":"Close Stage 2 documentation and traceability loop.\n\nScope:\n- update `UNIFICATION-DOCTRINE` Stage 2 mapping table to checker/vector surfaces,\n- record authority boundary statement in docs where control-plane semantics are defined,\n- update SPEC-INDEX/traceability row status once vectors land,\n- append decision-log entry for Stage 2 authority cutover.\n\nAcceptance:\n1) Stage 2 semantics and authority boundaries are explicit in docs,\n2) Traceability status transition is justified by executable checks,\n3) decision log records rationale and migration bounds.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nClosed Stage 2 docs/traceability loop:\n- Added `UNIFICATION-DOCTRINE` §10.6.4 Stage 2 normative clause-to-surface mapping table (contract -> checker -> vectors).\n- Updated `SPEC-INDEX` to bind Stage 2 typed-authority claims to §10.6.4 mapping surfaces.\n- Updated `SPEC-TRACEABILITY` row for `UNIFICATION-DOCTRINE.md` from `instrumented` to `covered`, explicitly listing Stage 1+Stage 2 checker/vector surfaces.\n- Added Decision 0109 documenting the closure and rationale.\n\nVerification:\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T22:30:19.458431Z","updated_at":"2026-02-22T23:23:52.853513Z","closed_at":"2026-02-22T23:23:52.853515Z","ephemeral":false,"dependencies":[{"issue_id":"bd-145","depends_on_id":"bd-144","type":"blocks","created_by":"codex"},{"issue_id":"bd-145","depends_on_id":"bd-146","type":"blocks","created_by":"codex"}]}
{"id":"bd-146","title":"[Ev/Stage2] Typed-authority consumer cutover (CLI/MCP/CI)","description":"Route all control-plane consumers to typed authority as source of truth.\n\nScope:\n- CLI/MCP/CI readers consume typed authority first,\n- legacy payload remains projection/compatibility only,\n- projection parity checks ensure deterministic typed<->alias output,\n- remove any remaining consumer-side authority fallback to aliases.\n\nAcceptance:\n1) Consumers are typed-authority first with deterministic compatibility projection,\n2) No consumer can derive authority from legacy aliases,\n3) existing command surfaces remain stable.\n\nVerification commands:\n- `mise run coherence-check`\n- `mise run ci-pipeline-test`\n- `mise run ci-command-surface-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nImplemented typed-authority-first consumer cutover across CLI/MCP/CI surfaces:\n- required witness runtime now carries `normalizerId` and emits `authorityPayloadDigest` + `typedCoreProjectionDigest`,\n- required witness verify/decide/decision-verify paths enforce typed-authority consistency fail-closed,\n- instruction witness + instruction check client emit/validate typed authority lineage,\n- delta snapshot and required decision summary paths carry typed authority fields,\n- observation projection and query surfaces prefer typed projection digest while preserving alias compatibility,\n- ci_witnesses conformance vectors updated for typed authority lineage (golden/adversarial/invariance).\n\nVerification:\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses`\n- `python3 tools/conformance/run_capability_vectors.py`\n- `mise run ci-pipeline-test`\n- `mise run ci-command-surface-check`\n- `mise run ci-pipeline-check`\n- `mise run ci-observation-test`\n- `mise run coherence-check`\n- `python3 tools/ci/check_issue_graph.py`\n- `cargo test -p premath-coherence --quiet`\n- `cargo test -p premath-surreal --quiet`\n- `cargo test -p premath-cli --quiet`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T22:30:19.471507Z","updated_at":"2026-02-22T23:19:39.121300Z","closed_at":"2026-02-22T23:19:39.121302Z","ephemeral":false,"dependencies":[{"issue_id":"bd-146","depends_on_id":"bd-143","type":"blocks","created_by":"codex"},{"issue_id":"bd-146","depends_on_id":"bd-142","type":"blocks","created_by":"codex"}]}
{"id":"bd-147","title":"[EPIC] Ev Stage 3 typed-first authority cleanup and bidir handoff","description":"Execute `draft/UNIFICATION-DOCTRINE` §10.6 Stage 3 by removing remaining compatibility-authority ambiguity and tightening the handoff from transitional kernel-compliance sentinel checks to direct checker/discharge authority surfaces.\n\nScope:\n- enforce typed evidence as sole authority route across control-plane consumers,\n- confine legacy projection aliases to explicit compatibility-only mode,\n- tighten observation/MCP/query surfaces to typed-first contracts,\n- close Stage 3 docs/traceability and decision-log loop.\n\nAcceptance:\n1) Stage 3 typed-first boundary is explicit and machine-checked,\n2) alias paths cannot reintroduce authority semantics,\n3) checker/discharge authority remains single-route and deterministic.\n\nVerification commands:\n- `mise run coherence-check`\n- `python3 tools/conformance/run_capability_vectors.py`\n- `mise run ci-pipeline-test`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Stage 3 epic closed 2026-02-23.\n\nFinal closure state:\n- bd-148 closed (typed-only authority reads in CI/CLI/MCP consumers),\n- bd-149 closed (typed-first observation/projection query contract),\n- bd-150 closed (Stage 2 direct bidir evidence route; sentinel profile-gated fallback only),\n- bd-151 closed (docs/traceability/decision closure),\n- bd-152/bd-153 closed (remove alias fallback from required/decision reporting),\n- bd-154 closed (pipeline authority boundary checks),\n- bd-155 closed (required decision verify typed authority enforcement),\n- bd-156 closed (observation typed authority alias compatibility mode contract).\n\nResult:\n- typed-first boundary is explicit and machine-checked,\n- alias paths cannot reintroduce authority semantics,\n- checker/discharge authority route is deterministic and single-source.\n\nVerification envelope (latest slice + prior slices):\n- `mise run baseline`\n- `mise run coherence-check`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `mise run ci-pipeline-test`\n- `python3 tools/conformance/run_capability_vectors.py`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","created_at":"2026-02-22T23:25:57.508313Z","updated_at":"2026-02-23T00:04:53.250430Z","closed_at":"2026-02-23T00:04:53.250433Z","ephemeral":false,"dependencies":[{"issue_id":"bd-147","depends_on_id":"bd-141","type":"discovered-from"},{"issue_id":"bd-147","depends_on_id":"bd-149","type":"blocks"},{"issue_id":"bd-147","depends_on_id":"bd-148","type":"blocks"},{"issue_id":"bd-147","depends_on_id":"bd-150","type":"blocks"},{"issue_id":"bd-147","depends_on_id":"bd-151","type":"blocks"},{"issue_id":"bd-147","depends_on_id":"bd-152","type":"blocks"},{"issue_id":"bd-147","depends_on_id":"bd-153","type":"blocks"},{"issue_id":"bd-147","depends_on_id":"bd-154","type":"blocks"},{"issue_id":"bd-147","depends_on_id":"bd-156","type":"blocks"},{"issue_id":"bd-147","depends_on_id":"bd-155","type":"blocks"}]}
{"id":"bd-148","title":"[Ev/Stage3] Enforce typed-only authority reads in CI/CLI/MCP consumers","description":"Remove remaining consumer-side fallback from typed authority to alias digests for authority decisions.\n\nScope:\n- ensure authority checks in required/instruction/decision paths require typed fields when Stage 3 is active,\n- keep alias digest fields as compatibility metadata only,\n- add fail-closed classes/tests for alias-as-authority misuse in runtime consumer paths.\n\nAcceptance:\n1) no consumer derives authority from alias-only payloads,\n2) deterministic reject classes are emitted for unbound/alias misuse,\n3) command surfaces remain stable.\n\nVerification commands:\n- `mise run ci-pipeline-test`\n- `cargo test -p premath-coherence`\n- `cargo test -p premath-cli`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses`","notes":"Completed 2026-02-22.\n\nStage3 typed-only authority enforcement across CI/CLI/MCP consumer surfaces:\n- enforced typed-authority-only summary/report semantics in CI required flow (`bd-152`, `bd-153`),\n- enforced fail-closed typed-authority validation in required-decision verify client (`bd-155`),\n- preserved compatibility alias digests as explicitly non-authoritative metadata.\n\nImplemented surfaces:\n- `tools/ci/pipeline_required.py`\n- `tools/ci/verify_decision.py`\n- `tools/ci/required_decision_verify_client.py`\n- tests: `tools/ci/test_pipeline_required.py`, `tools/ci/test_required_decision_verify_client.py`, `tools/ci/test_verify_decision.py`\n\nVerification:\n- `mise run ci-pipeline-test`\n- `cargo test -p premath-coherence --quiet`\n- `cargo test -p premath-cli --quiet`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:25:57.535566Z","updated_at":"2026-02-22T23:35:57.337680Z","closed_at":"2026-02-22T23:35:57.337681Z","ephemeral":false}
{"id":"bd-149","title":"[Ev/Stage3] Typed-first observation and projection query contract","description":"Finalize observation/UX projection semantics so typed projection digest is canonical and alias matching is compatibility-scoped only.\n\nScope:\n- tighten projection lookup semantics in observation surfaces,\n- add explicit compatibility mode behavior for alias lookup,\n- extend observation invariance vectors/tests for typed-only default behavior.\n\nAcceptance:\n1) typed projection digest is canonical query key by default,\n2) alias lookup is explicit compatibility path,\n3) deterministic behavior is covered by tests/vectors.\n\nVerification commands:\n- `mise run ci-observation-test`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses`\n- `cargo test -p premath-surreal`\n- `cargo test -p premath-ux`","notes":"Implemented typed-first observation/projection contract across core and consumer surfaces.\n\nDelivered:\n- `premath-surreal` observation summary now selects canonical `typedCoreProjectionDigest` only for `latestProjectionDigest` (removed alias fallback).\n- Policy-drift projection digest set now reflects typed digests as canonical; alias digests remain separate compatibility metadata.\n- Observation query APIs now carry explicit projection match mode and default to typed authority matching.\n\nSurfaces updated:\n- Rust core: `crates/premath-surreal/src/observation.rs`, `crates/premath-surreal/src/lib.rs`\n- UX contracts: `crates/premath-ux/src/lib.rs`, `crates/premath-ux/src/http.rs`\n- CLI: `crates/premath-cli/src/cli.rs`, `crates/premath-cli/src/commands/observe.rs`, `crates/premath-cli/src/main.rs`, `crates/premath-cli/src/commands/observe_serve.rs`\n- MCP observe projection tool: `crates/premath-cli/src/commands/mcp_serve.rs`\n- Python compatibility wrapper: `tools/ci/observation_surface.py`\n- docs/spec note: `specs/premath/draft/UNIFICATION-DOCTRINE.md`, `tools/ci/README.md`, `README.md`\n\nValidation:\n- `cargo test -p premath-surreal`\n- `cargo test -p premath-ux`\n- `cargo test -p premath-cli`\n- `cargo test -p premath-cli --test cli_smoke observe`\n- `python3 tools/ci/test_observation_surface.py`\n- `mise run ci-pipeline-test`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:25:57.556760Z","updated_at":"2026-02-22T23:44:47.125510Z","closed_at":"2026-02-22T23:44:47.125512Z","ephemeral":false,"dependencies":[{"issue_id":"bd-149","depends_on_id":"bd-148","type":"blocks"}]}
{"id":"bd-15","title":"[Traceability] T-WID-01 Witness-ID conformance vectors","description":"Add fixture-level witness-id determinism/sensitivity conformance vectors and executable validation path in merge-gated conformance checks.","notes":"Implemented executable witness-id conformance vectors and merge-gated runner path. Added tests/conformance/fixtures/witness-id suite (stability under excluded fields + sensitivity to class/lawRef/tokenPath/context), added tools/conformance/run_witness_id_vectors.py, wired suite into tools/conformance/run_fixture_suites.py (conformance-run), and updated conformance/docs traceability surfaces. SPEC-TRACEABILITY now marks WITNESS-ID.md covered; decision log entry added for T-WID-01 execution.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T00:22:35.137565Z","updated_at":"2026-02-22T00:59:31.869071Z","closed_at":"2026-02-22T00:59:31.869074Z","ephemeral":false,"dependencies":[{"issue_id":"bd-15","depends_on_id":"bd-1","type":"discovered-from"}]}
{"id":"bd-150","title":"[Ev/Stage3] Replace transitional kernel-compliance sentinel with direct bidir evidence route","description":"Advance beyond transitional Stage 2 sentinel checks by routing Stage 3 authority validation through direct checker/discharge evidence where available.\n\nScope:\n- define direct evidence artifact shape from bidir/checker discharge outputs,\n- map sentinel obligations to direct evidence assertions,\n- keep deterministic fallback behavior for profiles where direct route is not yet available.\n\nAcceptance:\n1) direct checker/discharge evidence route is defined and validated,\n2) transitional sentinel path is reduced or clearly profile-gated,\n3) failure classes and parity checks remain deterministic.\n\nVerification commands:\n- `mise run coherence-check`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.adjoints_sites`\n- `python3 tools/ci/test_drift_budget.py`","notes":"Completed 2026-02-23.\n\nReplaced Stage2 transitional kernel-compliance sentinel authority path with direct `bidirEvidenceRoute` authority surface and profile-gated sentinel fallback.\n\nDelivered:\n- contract schema now requires `evidenceStage2Authority.bidirEvidenceRoute` (`routeKind=direct_checker_discharge`, `obligationFieldRef=bidirCheckerObligations`) with canonical obligation/failure classes,\n- loader/checkers migrated to direct route semantics with deterministic fallback gating for optional `kernelComplianceSentinel`,\n- coherence checker gate-chain Stage2 logic now evaluates `bidirEvidenceRoute` first and enforces sentinel parity only when fallback is explicitly configured,\n- drift-budget and docs coherence checks updated to new Stage2 route fields,\n- coherence-site Stage2 fixtures migrated to `bidirEvidenceRoute`,\n- doctrine/traceability language updated from sentinel parity to direct bidir-route parity.\n\nTouched:\n- `specs/premath/draft/CONTROL-PLANE-CONTRACT.json`\n- `tools/ci/control_plane_contract.py`\n- `tools/ci/check_drift_budget.py`\n- `tools/conformance/check_docs_coherence.py`\n- `crates/premath-coherence/src/lib.rs`\n- Stage2 coherence fixtures under `tests/conformance/fixtures/coherence-site/*/gate_chain_parity_stage2_*`\n- `specs/premath/draft/UNIFICATION-DOCTRINE.md`\n- `specs/premath/draft/SPEC-TRACEABILITY.md`\n\nVerification:\n- `python3 tools/ci/test_control_plane_contract.py`\n- `python3 tools/conformance/test_docs_coherence.py`\n- `python3 tools/ci/test_drift_budget.py`\n- `cargo test -p premath-coherence`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.adjoints_sites`\n- `mise run docs-coherence-check`\n- `mise run coherence-check`\n- `mise run ci-drift-budget-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:25:57.605516Z","updated_at":"2026-02-22T23:57:28.506492Z","closed_at":"2026-02-22T23:57:28.506493Z","ephemeral":false,"dependencies":[{"issue_id":"bd-150","depends_on_id":"bd-148","type":"blocks"}]}
{"id":"bd-151","title":"[Ev/Stage3] Documentation, traceability, and decision closure","description":"Close Stage 3 loop in doctrine/spec/traceability surfaces after implementation tasks land.\n\nScope:\n- update `UNIFICATION-DOCTRINE` Stage 3 mapping table,\n- update `SPEC-INDEX` and `SPEC-TRACEABILITY` status/surfaces,\n- append decision-log entry with migration bounds and rollback notes.\n\nAcceptance:\n1) Stage 3 semantics are explicit in docs,\n2) traceability status is justified by executable checks,\n3) decision-log rationale is recorded.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-23.\n\nClosed Stage 3 docs/traceability/decision loop.\n\nDelivered:\n- added `§10.6.5 Stage 3 typed-first closure mapping (normative)` in `specs/premath/draft/UNIFICATION-DOCTRINE.md`,\n- updated `specs/premath/draft/SPEC-INDEX.md` staged-internalization lane note to include Stage 3 closure constraints,\n- updated `specs/premath/draft/SPEC-TRACEABILITY.md` UNIFICATION row to include Stage 3 closure surfaces and decision linkage,\n- appended `Decision 0110` in `specs/process/decision-log.md` with migration bounds and rollback notes,\n- extended docs-coherence marker enforcement/tests for Stage 3 closure markers.\n\nVerification:\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`\n- `python3 tools/conformance/test_docs_coherence.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:25:57.620833Z","updated_at":"2026-02-23T00:04:47.339449Z","closed_at":"2026-02-23T00:04:47.339452Z","ephemeral":false,"dependencies":[{"issue_id":"bd-151","depends_on_id":"bd-148","type":"blocks"},{"issue_id":"bd-151","depends_on_id":"bd-149","type":"blocks"},{"issue_id":"bd-151","depends_on_id":"bd-150","type":"blocks"},{"issue_id":"bd-151","depends_on_id":"bd-152","type":"blocks"},{"issue_id":"bd-151","depends_on_id":"bd-153","type":"blocks"},{"issue_id":"bd-151","depends_on_id":"bd-155","type":"blocks"},{"issue_id":"bd-151","depends_on_id":"bd-156","type":"blocks"}]}
{"id":"bd-152","title":"[Ev/Stage3] Remove alias fallback from required pipeline authority summaries","description":"Harden CI required summary rendering so authority display never falls back from typed authority digest to legacy projection alias.\n\nScope:\n- update `tools/ci/pipeline_required.py` summary rendering to treat `typedCoreProjectionDigest` as canonical authority display,\n- keep alias digest display explicitly labeled compatibility-only,\n- fail closed (or explicit missing marker) when typed authority is absent.\n\nAcceptance:\n1) summary output no longer treats `projectionDigest` as authority fallback,\n2) compatibility alias remains visible but non-authoritative,\n3) pipeline tests cover missing/invalid typed authority behavior.\n\nVerification commands:\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/test_pipeline_required.py`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nImplemented typed-authority-only CI required summary rendering:\n- updated `tools/ci/pipeline_required.py` so witness summary authority output uses only `typedCoreProjectionDigest` (no `projectionDigest` fallback),\n- compatibility alias remains explicit/non-authoritative (`authorityPayloadDigest` line),\n- updated `tools/ci/test_pipeline_required.py` fixtures/assertions accordingly.\n\nVerification:\n- `python3 tools/ci/test_pipeline_required.py`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:28:34.411397Z","updated_at":"2026-02-22T23:35:36.956686Z","closed_at":"2026-02-22T23:35:36.956689Z","ephemeral":false,"dependencies":[{"issue_id":"bd-152","depends_on_id":"bd-148","type":"blocks"}]}
{"id":"bd-153","title":"[Ev/Stage3] Remove alias fallback from decision verification reporting","description":"Harden decision verification reporting so projection output is typed-authority-first with no alias fallback semantics.\n\nScope:\n- update `tools/ci/verify_decision.py` to require/use typed authority digest for canonical projection reporting,\n- keep compatibility alias output separate and non-authoritative,\n- add deterministic failure/report behavior when typed fields are missing.\n\nAcceptance:\n1) verify-decision no longer reports alias digest as canonical projection fallback,\n2) typed authority is mandatory for canonical decision projection output,\n3) test coverage asserts fail-closed or explicit missing behavior.\n\nVerification commands:\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/test_required_decision_verify_client.py`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nImplemented typed-authority-only decision verification reporting:\n- updated `tools/ci/verify_decision.py` to require `typedCoreProjectionDigest` in verified decision chain and fail closed when missing,\n- removed canonical projection fallback to `projectionDigest`,\n- kept compatibility alias output as separate non-authoritative line,\n- added `tools/ci/test_verify_decision.py` for typed-present accept and typed-missing reject behaviors.\n\nVerification:\n- `python3 tools/ci/test_verify_decision.py`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:28:34.433509Z","updated_at":"2026-02-22T23:35:36.978891Z","closed_at":"2026-02-22T23:35:36.978892Z","ephemeral":false,"dependencies":[{"issue_id":"bd-153","depends_on_id":"bd-148","type":"blocks"}]}
{"id":"bd-154","title":"[Ev/Stage3] Observation projection query typed-only default with explicit alias compatibility mode","description":"Make observation projection lookup typed-authority-only by default, and move alias lookup behind explicit compatibility mode.\n\nScope:\n- update `tools/ci/observation_surface.py` projection query matching semantics,\n- align Rust observation query path if needed for parity,\n- add tests/vectors for typed-default behavior and optional alias compatibility behavior.\n\nAcceptance:\n1) default projection query path uses typed digest only,\n2) alias lookup is explicit compatibility path,\n3) observation and conformance tests stay deterministic.\n\nVerification commands:\n- `mise run ci-observation-test`\n- `cargo test -p premath-surreal`\n- `cargo test -p premath-ux`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses`","notes":"Implemented typed-only default projection lookup with explicit alias compatibility mode.\n\nDelivered:\n- Added `ProjectionMatchMode` (`typed` default, `compatibility_alias` explicit) to observation query path.\n- `ObservationIndex::projection` now matches alias digests only when compatibility mode is requested.\n- Threaded mode through UX query API, HTTP route (`/projection?digest=<...>&match=typed|compatibility_alias`), CLI (`premath observe --projection-match ...`), MCP tool (`observe_projection.projectionMatch`), and Python observation query wrapper (`--projection-match`).\n- Added CLI/UX/Rust/Python tests for typed default success, alias-default rejection, and alias-compat acceptance.\n\nValidation:\n- `cargo test -p premath-surreal observation::tests::instruction_lookup_and_projection_query`\n- `cargo test -p premath-ux route_parsing_handles_query_params`\n- `cargo test -p premath-cli --test cli_smoke observe_projection_alias_requires_compatibility_mode`\n- `python3 tools/ci/test_observation_surface.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:28:34.447107Z","updated_at":"2026-02-22T23:44:52.454749Z","closed_at":"2026-02-22T23:44:52.454751Z","ephemeral":false,"dependencies":[{"issue_id":"bd-154","depends_on_id":"bd-149","type":"blocks"}]}
{"id":"bd-155","title":"[Ev/Stage3] Strengthen required-decision verify client typed-authority validation","description":"Strengthen Python required-decision verify client payload validation to enforce typed-authority fields on success-path outputs.\n\nScope:\n- extend `tools/ci/required_decision_verify_client.py` validation to require typed authority fields in `derived`/payload when decision verifies,\n- align with core checker contract semantics,\n- add deterministic unit tests for missing/invalid typed fields.\n\nAcceptance:\n1) client fails closed on missing typed authority fields for verified decisions,\n2) validation semantics match core `required_decision_verify` contract,\n3) tests cover positive and adversarial cases.\n\nVerification commands:\n- `python3 tools/ci/test_required_decision_verify_client.py`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py","notes":"Completed 2026-02-22.\n\nStrengthened required-decision verify client typed-authority validation:\n- updated `tools/ci/required_decision_verify_client.py` to require typed authority fields (`typedCoreProjectionDigest`, `authorityPayloadDigest`, `normalizerId`, `policyDigest`) for `derived.decision=accept` when `errors=[]`,\n- updated `tools/ci/test_required_decision_verify_client.py` with typed-authority valid payload and adversarial missing-typed test.\n\nVerification:\n- `python3 tools/ci/test_required_decision_verify_client.py`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:28:34.474585Z","updated_at":"2026-02-22T23:35:36.993428Z","closed_at":"2026-02-22T23:35:36.993430Z","ephemeral":false,"dependencies":[{"issue_id":"bd-155","depends_on_id":"bd-148","type":"blocks"}]}
{"id":"bd-156","title":"[Meta] Execution order and hygiene cadence runbook for Stage3 lane","description":"Write one short execution-order runbook to keep Stage3 work coherent and reduce drift.\n\nScope:\n- codify task order (`bd-148` -> `bd-152/153/155` -> `bd-149/154` -> `bd-150` -> `bd-151`),\n- define per-task required gate set (minimal deterministic checks),\n- define commit/push cadence and issue-note update cadence.\n\nAcceptance:\n1) one concise runbook exists and is linked from design/operations lane,\n2) order and gate expectations are explicit,\n3) issue updates follow deterministic cadence.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-22.\n\nAdded Stage3 execution/hygiene runbook and linked it into design/operations lanes:\n- added `docs/design/EV-STAGE3-EXECUTION-RUNBOOK.md` (ordered Stage3 task chain, per-task gate set, commit cadence, issue update cadence, stop conditions),\n- linked in `docs/design/README.md`,\n- linked in `.premath/OPERATIONS.md`.\n\nVerification:\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T23:28:34.462222Z","updated_at":"2026-02-22T23:33:11.757716Z","closed_at":"2026-02-22T23:33:11.757717Z","ephemeral":false}
{"id":"bd-157","title":"[EPIC] Multithreaded development acceleration: lease-safe worker orchestration","description":"Acceptance:\n- Multithreaded worker architecture is encoded as ordered issues with deterministic dependency edges.\n- Exactly one canonical issue-memory authority path remains (`.premath/issues.jsonl`), with no parallel mutation semantics.\n- The execution order is explicit enough that `issue_ready` yields the intended next slices.\n\nVerification commands:\n- `cargo run --package premath-cli -- issue list --issues .premath/issues.jsonl --json`\n- `cargo run --package premath-cli -- issue ready --issues .premath/issues.jsonl --json`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Epic closure: all blocked slices `bd-160..bd-169` are closed, and command/test surfaces for multithread lease-safe orchestration are now in place.\n\nFinal closure state:\n- Deterministic coordinator/worker harness loop + runbook + policy gate (`bd-161`, `bd-162`).\n- Harness KPI benchmark and deterministic trajectory semantics (`bd-165`).\n- Composed lane vectors and observation throughput projection (`bd-168`, `bd-163`).\n- Dependency diagnostics hygiene with scoped cycle checks + MCP parity (`bd-164`).\n\nVerification snapshot:\n- `cargo run --package premath-cli -- issue list --issues .premath/issues.jsonl --json`\n- `cargo run --package premath-cli -- issue ready --issues .premath/issues.jsonl --json`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:15:18.045406Z","updated_at":"2026-02-23T01:26:49.720672Z","closed_at":"2026-02-23T01:26:49.720675Z","ephemeral":false,"dependencies":[{"issue_id":"bd-157","depends_on_id":"bd-160","type":"blocks"},{"issue_id":"bd-157","depends_on_id":"bd-161","type":"blocks"},{"issue_id":"bd-157","depends_on_id":"bd-162","type":"blocks"},{"issue_id":"bd-157","depends_on_id":"bd-163","type":"blocks"},{"issue_id":"bd-157","depends_on_id":"bd-165","type":"blocks"},{"issue_id":"bd-157","depends_on_id":"bd-166","type":"blocks"},{"issue_id":"bd-157","depends_on_id":"bd-167","type":"blocks"},{"issue_id":"bd-157","depends_on_id":"bd-168","type":"blocks"},{"issue_id":"bd-157","depends_on_id":"bd-169","type":"blocks"}]}
{"id":"bd-158","title":"[BD/Core] Atomic claim-next primitive with lock-safe mutation semantics","description":"Acceptance:\n- Add one canonical `claim-next` primitive that atomically selects and claims a ready issue without double-claim races.\n- Mutation path is lock-safe (single-writer critical section over `.premath/issues.jsonl`) and emits deterministic lease metadata.\n- Existing `issue_ready` semantics remain unchanged for deterministic reads.\n\nVerification commands:\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-23.\n\nDelivered atomic claim-next primitive with lock-safe mutation semantics over `.premath/issues.jsonl`.\n\nCode:\n- Added `premath-bd` core module `crates/premath-bd/src/claim_next.rs` with:\n  - `claim_next_issue_jsonl(...)` lock-scoped single-writer critical section,\n  - deterministic ready selection (`MemoryStore::ready_open_ids()`),\n  - deterministic lease metadata (`lease1_<issue>_<assignee>` default),\n  - typed request/outcome/error surface (`ClaimNextRequest`, `ClaimNextOutcome`, `ClaimNextError`).\n- Exported new surface from `crates/premath-bd/src/lib.rs`.\n- Added CLI command `issue claim-next` in:\n  - `crates/premath-cli/src/cli.rs`\n  - `crates/premath-cli/src/commands/issue.rs`\n- Added CLI smoke coverage in `crates/premath-cli/tests/cli_smoke.rs` (`issue_claim_next_json_smoke`).\n\nVerification:\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:15:49.416752Z","updated_at":"2026-02-23T00:47:53.562781Z","closed_at":"2026-02-23T00:47:53.562783Z","ephemeral":false,"dependencies":[{"issue_id":"bd-158","depends_on_id":"bd-166","type":"blocks"},{"issue_id":"bd-158","depends_on_id":"bd-169","type":"blocks"},{"issue_id":"bd-158","depends_on_id":"bd-167","type":"blocks"}]}
{"id":"bd-159","title":"[CLI/MCP] Route claim and lease mutation tools through the shared atomic claim path","description":"Acceptance:\n- `issue_claim`, `issue_lease_renew`, and `issue_lease_release` share one core mutation path and lock discipline.\n- CLI and MCP mutation outputs remain deterministic and policy-bound (no parallel semantics).\n- Claim/lease failure classes remain stable under contention and stale-lease scenarios.\n\nVerification commands:\n- `cargo test -p premath-cli`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed 2026-02-23.\n\nRouted claim/lease mutation tools through shared atomic JSONL mutation path with one lock discipline.\n\nDelivered:\n- Added `premath-bd` atomic mutation boundary:\n  - `crates/premath-bd/src/atomic_store.rs`\n  - `mutate_store_jsonl(...)` + lock-file critical section (`.lock`) + typed lock/store error surface.\n- `premath-bd` `claim_next` now runs through `mutate_store_jsonl(...)` (no parallel lock path).\n- MCP mutation handlers now use shared atomic path for:\n  - `issue_claim`\n  - `issue_lease_renew`\n  - `issue_lease_release`\n  in `crates/premath-cli/src/commands/mcp_serve.rs`.\n- CLI `issue claim` now uses the same shared atomic mutation boundary in `crates/premath-cli/src/commands/issue.rs`.\n- Added/kept smoke coverage for claim-next and existing lease claim/renew/release unit tests remained green.\n\nVerification:\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:15:53.503779Z","updated_at":"2026-02-23T00:53:36.647172Z","closed_at":"2026-02-23T00:53:36.647174Z","ephemeral":false,"dependencies":[{"issue_id":"bd-159","depends_on_id":"bd-158","type":"blocks"},{"issue_id":"bd-159","depends_on_id":"bd-167","type":"blocks"},{"issue_id":"bd-159","depends_on_id":"bd-169","type":"blocks"}]}
{"id":"bd-16","title":"[Traceability] T-INDEX-01 Matrix integrity check","description":"Add deterministic checker enforcing that every promoted draft spec appears exactly once in SPEC-TRACEABILITY with status classification and target IDs for gaps.","notes":"Implemented deterministic traceability matrix integrity checker and wired it into baseline. Added tools/conformance/check_spec_traceability.py enforcing: every promoted draft spec appears exactly once in SPEC-TRACEABILITY, status in {covered,instrumented,gap}, gap rows require T-*-* target IDs, and no unknown matrix rows. Added mise task traceability-check and included it in baseline. Updated SPEC-TRACEABILITY to mark SPEC-INDEX and SPEC-TRACEABILITY covered and removed T-INDEX-01 open target section. Updated CI/conformance docs and decision log (Decision 0024).","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T00:22:39.021956Z","updated_at":"2026-02-22T01:02:05.256857Z","closed_at":"2026-02-22T01:02:05.256859Z","ephemeral":false,"dependencies":[{"issue_id":"bd-16","depends_on_id":"bd-1","type":"discovered-from"}]}
{"id":"bd-160","title":"[Conformance] Add multithread contention/race vectors for claim and lease flows","description":"Acceptance:\n- Add deterministic conformance vectors for claim contention, stale renew, lease-owner mismatch, and release mismatch under concurrent-style scenarios.\n- Vectors prove invariance of verdict/failure classes across local/external profiles for mutation flows.\n- Fixture suites fail closed on race-contract drift.\n\nVerification commands:\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.change_morphisms`\n- `mise run conformance-run`\n- `mise run coherence-check`","notes":"Completed 2026-02-23.\n\nAdded deterministic multithread contention/race conformance vectors for change-morphism claim/lease flows and wired them into the executable capability runner.\n\nDelivered:\n- Extended change-morphisms vector dispatcher (`tools/conformance/run_capability_vectors.py`) to execute mutation-flow invariance vectors via the same claim/renew/release evaluators.\n- Added new invariance vector pairs (local/external) under `tests/conformance/fixtures/capabilities/capabilities.change_morphisms/invariance/`:\n  - `same_issue_claim_contention_{local,external}`\n  - `same_issue_lease_renew_stale_{local,external}`\n  - `same_issue_lease_release_owner_mismatch_{local,external}`\n- Updated capability manifest:\n  - `tests/conformance/fixtures/capabilities/capabilities.change_morphisms/manifest.json`\n\nVerification:\n- `python3 tools/conformance/check_stub_invariance.py`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.change_morphisms`\n- `mise run coherence-check`\n- `mise run conformance-run`\n- `cargo test -p premath-cli`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:15:58.001988Z","updated_at":"2026-02-23T00:56:44.901056Z","closed_at":"2026-02-23T00:56:44.901057Z","ephemeral":false,"dependencies":[{"issue_id":"bd-160","depends_on_id":"bd-159","type":"blocks"}]}
{"id":"bd-161","title":"[Harness] Coordinator/worker multithread runbook and command loop for N worktrees","description":"Acceptance:\n- Document and script one deterministic coordinator/worker loop: `issue_ready -> claim -> work -> verify -> release/update` across multiple worktrees.\n- Handoff artifacts (`harness-session`, `harness-feature`, `harness-trajectory`) are used as projections, not new mutation authority.\n- Operator guidance is explicit for worker startup, heartbeat/renew, and stuck-worker recovery.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `cargo test -p premath-cli`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Implemented deterministic multithread coordinator/worker loop and runbook.\n\nDelivered:\n- Added script surface `tools/harness/multithread_loop.py` with `worker` and `coordinator` modes.\n- Worker loop performs: `claim-next -> harness-session/feature in_progress -> work -> verify -> trajectory append -> close/update on success -> blocked projection + recovery next-step on failure`.\n- Coordinator loop dispatches deterministic round-robin across sorted worktree paths with bounded per-worker steps.\n- Added mise tasks `harness-worker-loop` and `harness-coordinator-loop`.\n- Added runbook `docs/design/TUSK-HARNESS-MULTITHREAD-RUNBOOK.md` and linked it from design docs + AGENTS command surface.\n- Explicit heartbeat/renew and stuck-worker recovery guidance documented (MCP `issue_lease_renew` / `issue_lease_release` / `issue_lease_projection`).\n\nVerification run:\n- `mise run docs-coherence-check`\n- `cargo test -p premath-cli`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:16:02.753491Z","updated_at":"2026-02-23T01:10:24.333598Z","closed_at":"2026-02-23T01:10:24.333600Z","ephemeral":false,"dependencies":[{"issue_id":"bd-161","depends_on_id":"bd-158","type":"blocks"},{"issue_id":"bd-161","depends_on_id":"bd-159","type":"blocks"},{"issue_id":"bd-161","depends_on_id":"bd-166","type":"blocks"},{"issue_id":"bd-161","depends_on_id":"bd-167","type":"blocks"}]}
{"id":"bd-162","title":"[Policy] Enforce instruction-linked mutation mode for agent workers with explicit human override","description":"Acceptance:\n- Agent mutation paths are instruction-linked by default across MCP worker flows.\n- Human override mode is explicit, bounded, and auditable (no silent policy downgrade).\n- Retry/escalation flows preserve issue-memory authority and deterministic witness lineage.\n\nVerification commands:\n- `mise run ci-pipeline-test`\n- `mise run coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Enforced worker mutation policy on multithread loop surface.\n\nDelivered:\n- `tools/harness/multithread_loop.py` now loads `workerLaneAuthority` policy from `draft/CONTROL-PLANE-CONTRACT.json`.\n- Direct CLI loop fails closed on default `instruction-linked` mode (no silent downgrade).\n- Explicit override path requires `--mutation-mode` + `--override-reason` and validates support window (`supportUntilEpoch`) against active epoch.\n- Added auditable policy witness refs in trajectory rows and policy summaries in session/feature projections.\n- Updated runbook + AGENTS command surface examples to require explicit human override flags for this direct CLI loop.\n\nVerification run:\n- `mise run ci-pipeline-test`\n- `mise run coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:16:07.139090Z","updated_at":"2026-02-23T01:13:04.161720Z","closed_at":"2026-02-23T01:13:04.161723Z","ephemeral":false,"dependencies":[{"issue_id":"bd-162","depends_on_id":"bd-159","type":"blocks"},{"issue_id":"bd-162","depends_on_id":"bd-169","type":"blocks"}]}
{"id":"bd-163","title":"[Observation] Add worker-lane throughput projection (active leases, stale leases, per-worker WIP)","description":"Acceptance:\n- Observation surfaces expose deterministic multithread operations views: active leases, stale leases, and per-worker in-progress counts.\n- Projection is derived from canonical issue-memory + lease state, with no additional authority store.\n- Compatibility alias behavior remains explicit and non-default where applicable.\n\nVerification commands:\n- `mise run ci-observation-test`\n- `mise run ci-observation-check`\n- `cargo test -p premath-ux`","notes":"Completed deterministic worker-lane throughput projection in Observation Surface.\n\nDelivered:\n- Added `coherence.workerLaneThroughput` reducer projection in `crates/premath-surreal/src/observation.rs` derived solely from canonical issue-memory rows + lease state.\n- Projection fields include deterministic counts/sets for active leases, stale leases, unknown lease evaluation, in-progress totals, unassigned in-progress count, and sorted per-worker WIP rows.\n- Wired projection into coherence summary payload (no new authority store, projection-only).\n- Updated CLI coherence summary output (`observe`) to print worker-lane WIP summary.\n- Updated dashboard docs/UI to expose worker WIP metric (`docs/observation/README.md`, `docs/observation/index.html`).\n- Added/updated tests:\n  - Rust observation tests (`build_surface_projects_worker_lane_throughput`, throughput presence checks)\n  - Python observation reducer tests (`test_coherence_projections_drive_attention`) asserting worker throughput fields.\n\nVerification:\n- `mise run ci-observation-test`\n- `mise run ci-observation-check`\n- `cargo test -p premath-ux`\n- `cargo test -p premath-surreal`\n- `cargo test -p premath-cli`","status":"closed","priority":3,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:16:12.681626Z","updated_at":"2026-02-23T01:21:01.883182Z","closed_at":"2026-02-23T01:21:01.883184Z","ephemeral":false,"dependencies":[{"issue_id":"bd-163","depends_on_id":"bd-159","type":"blocks"},{"issue_id":"bd-163","depends_on_id":"bd-169","type":"blocks"}]}
{"id":"bd-164","title":"[BD Hygiene] Remove legacy closed-issue cycle noise from dependency diagnostics","description":"Acceptance:\n- Dependency diagnostics provide an actionable default view for active work (open/in_progress) without false-positive noise from closed historical cycles.\n- Full-graph diagnostics remain available as an explicit mode.\n- CLI and MCP payloads document which graph scope was evaluated.\n\nVerification commands:\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `cargo run --package premath-cli -- dep diagnostics --issues .premath/issues.jsonl --json`","notes":"Implemented scoped dependency diagnostics to remove closed-cycle noise by default while preserving explicit full-graph visibility.\n\nDelivered:\n- Added `DependencyGraphScope` (`active|full`) and scoped cycle APIs in `premath-bd`:\n  - `find_dependency_path_in_scope(...)`\n  - `find_any_dependency_cycle_in_scope(...)`\n  - existing `find_any_dependency_cycle()` now delegates to full scope for backward compatibility.\n- CLI `dep diagnostics` now supports `--graph-scope active|full` (default `active`) and emits `graphScope` in JSON/text output.\n- Added MCP read tool `dep_diagnostics` with the same scope semantics and `graphScope`-annotated payload.\n- Updated MCP server operator instructions string and command/tool docs (`README.md`, `AGENTS.md`).\n- Added deterministic coverage:\n  - `premath-bd` scoped cycle unit test (`scoped_cycle_diagnostics_ignore_closed_cycles_for_active_scope`).\n  - CLI smoke test (`dep_diagnostics_scope_filters_closed_cycle_noise`).\n  - MCP test (`dep_diagnostics_reports_scoped_cycle_integrity`).\n\nVerification:\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `cargo run --package premath-cli -- dep diagnostics --issues .premath/issues.jsonl --json`","status":"closed","priority":3,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:17:52.366636Z","updated_at":"2026-02-23T01:26:34.510887Z","closed_at":"2026-02-23T01:26:34.510890Z","ephemeral":false,"dependencies":[{"issue_id":"bd-164","depends_on_id":"bd-158","type":"blocks"}]}
{"id":"bd-165","title":"[Metrics] Define multithread acceleration KPI and benchmark harness","description":"Acceptance:\n- Define one canonical throughput KPI for multithreaded development (for example completed issues/day per active worker with gate pass-rate).\n- Add deterministic benchmark procedure and reporting path using existing harness/session/trajectory projections.\n- Document target threshold and rollback trigger when throughput regresses.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `cargo test -p premath-cli`\n- `cargo run --package premath-cli -- harness-trajectory query --path .premath/harness_trajectory.jsonl --mode latest --limit 20 --json`","notes":"Defined canonical multithread throughput KPI and deterministic benchmark path.\n\nDelivered:\n- Added `tools/harness/benchmark_kpi.py` with KPI kind `premath.multithread.throughput.v1`:\n  `kpi = throughput_per_worker_per_day * gate_pass_rate`.\n- Benchmark output is deterministic (including empty-trajectory case) and emits threshold decision states: `pass|watch|rollback|insufficient_data`.\n- Added default target and rollback thresholds plus minimum sample gate (`target=0.8`, `rollback=0.4`, `minSampleRows=3`).\n- Added command-surface task `mise run harness-kpi-report`.\n- Added design doc `docs/design/TUSK-HARNESS-KPI-BENCHMARK.md` and linked it from harness/design index + AGENTS.\n- Updated worker loop success class to canonical `completed` for trajectory failure/pass semantics parity.\n\nVerification run:\n- `mise run docs-coherence-check`\n- `cargo test -p premath-cli`\n- `cargo run --package premath-cli -- harness-trajectory query --path .premath/harness_trajectory.jsonl --mode latest --limit 20 --json`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:17:52.382552Z","updated_at":"2026-02-23T01:16:08.242938Z","closed_at":"2026-02-23T01:16:08.242940Z","ephemeral":false,"dependencies":[{"issue_id":"bd-165","depends_on_id":"bd-159","type":"blocks"},{"issue_id":"bd-165","depends_on_id":"bd-161","type":"blocks"},{"issue_id":"bd-165","depends_on_id":"bd-168","type":"blocks"}]}
{"id":"bd-166","title":"[Architecture] Multithread worker model aligned with Premath lanes, sites, and adjoints","description":"Acceptance:\n- Publish a canonical architecture contract for multithreaded development that preserves lane ownership in `draft/UNIFICATION-DOCTRINE` §9 (semantic doctrine lane, strict checker lane, witness commutation lane, runtime transport lane).\n- Define worker orchestration in site terms (`Ctx`/coverage/refinement) consistent with `raw/CTX-SITE` and glue-or-witness boundaries in `raw/SHEAF-STACK`.\n- Clarify composed optional capability boundaries for `capabilities.change_morphisms`, `capabilities.adjoints_sites`, and `capabilities.squeak_site` without introducing parallel semantic authority.\n- Update design/docs pointers so the execution order and authority split are obvious from `SPEC-INDEX` reading paths.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `mise run coherence-check`\n- `mise run traceability-check`","notes":"Closed with canonical multithread lane/site/adjoint architecture contract and spec-path glue.\n\nDelivered:\n- Added `docs/design/MULTITHREAD-LANE-SITE-ADJOINTS.md`:\n  - lane ownership split aligned with `UNIFICATION-DOCTRINE` §9,\n  - site-based worker orchestration (`Ctx` refinement/cover + glue-or-witness),\n  - explicit composed capability boundaries (`change_morphisms`, `adjoints_sites`, `squeak_site`),\n  - architecture-first execution order for concurrent work.\n- Updated `docs/design/ARCHITECTURE-MAP.md` section 7:\n  - removed stale single-item follow-on text,\n  - codified canonical architecture-first ordering and capability-composition guardrails,\n  - linked operational companions for multithread execution.\n- Updated `specs/premath/draft/SPEC-INDEX.md` reading order:\n  - added dedicated multithread orchestration path tying lane/site/adjoint docs and capability-scoped boundaries.\n- Updated `docs/design/README.md` index with the new multithread contract doc.\n\nVerification:\n- `mise run docs-coherence-check`\n- `mise run coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:19:06.709507Z","updated_at":"2026-02-23T00:30:56.512863Z","closed_at":"2026-02-23T00:30:56.512865Z","ephemeral":false}
{"id":"bd-167","title":"[Spec Glue] Bind multithread worker operations into SPEC-INDEX and DOCTRINE-SITE maps","description":"Acceptance:\n- Extend doctrine operation registry/site mapping so multithread worker operations are explicitly routed from doctrine root to operation surfaces (claim/lease/discover/session/bootstrap paths).\n- Ensure `SPEC-INDEX` capability and reading-order sections reflect this worker-operation mapping under existing optional capability boundaries.\n- Add deterministic generation/roundtrip checks for updated doctrine-site artifacts.\n\nVerification commands:\n- `mise run doctrine-check`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`","notes":"Closed with doctrine-site worker-operation mapping and spec glue.\n\nDelivered:\n- Extended `draft/DOCTRINE-OP-REGISTRY.json` with explicit worker operation nodes/edges:\n  - `op/mcp.issue_claim`\n  - `op/mcp.issue_lease_renew`\n  - `op/mcp.issue_lease_release`\n  - `op/mcp.issue_discover`\n  - `op/harness.session_read`\n  - `op/harness.session_write`\n  - `op/harness.session_bootstrap`\n- Regenerated `draft/DOCTRINE-SITE.json` from source + registry (deterministic digest updated).\n- Updated `draft/DOCTRINE-SITE.md` required-node/repository-v0 notes to include worker-memory and harness-session operation surfaces.\n- Updated `draft/SPEC-INDEX.md`:\n  - capability-scoped worker operation routing note,\n  - doctrine-site informative bullet clarifies worker mutation/harness routes.\n\nVerification:\n- `mise run doctrine-check`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:19:11.069720Z","updated_at":"2026-02-23T00:33:27.807591Z","closed_at":"2026-02-23T00:33:27.807594Z","ephemeral":false,"dependencies":[{"issue_id":"bd-167","depends_on_id":"bd-166","type":"blocks"}]}
{"id":"bd-168","title":"[Conformance] Composed lane vectors for multithread flows (change_morphisms + adjoints_sites + squeak_site)","description":"Acceptance:\n- Add composed multithread vectors proving deterministic invariance across local/external profiles when worker flows compose claim/lease mutations with adjoint/site obligations and runtime location routing.\n- Route cross-lane pullback/base-change claims through typed span/square witness surfaces where composition is claimed.\n- Preserve kernel verdict and Gate failure classes across composed-profile invariance pairs.\n\nVerification commands:\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.change_morphisms`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.adjoints_sites`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.squeak_site`\n- `mise run coherence-check`","notes":"Implemented composed multithread conformance vectors by extending capabilities.change_morphisms with cross-lane claim/lease vectors (golden, adversarial, invariance local/external) routed through typed span/square + deterministic location transport contracts. Added shared cross-lane contract evaluator in tools/conformance/run_capability_vectors.py and new fixture families in tests/conformance/fixtures/capabilities/capabilities.change_morphisms/.\n\nVerification run:\n- python3 tools/conformance/check_stub_invariance.py\n- python3 tools/conformance/run_capability_vectors.py --capability capabilities.change_morphisms\n- python3 tools/conformance/run_capability_vectors.py --capability capabilities.adjoints_sites\n- python3 tools/conformance/run_capability_vectors.py --capability capabilities.squeak_site\n- mise run coherence-check","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:19:15.616422Z","updated_at":"2026-02-23T01:04:28.140840Z","closed_at":"2026-02-23T01:04:28.140842Z","ephemeral":false,"dependencies":[{"issue_id":"bd-168","depends_on_id":"bd-160","type":"blocks"},{"issue_id":"bd-168","depends_on_id":"bd-167","type":"blocks"},{"issue_id":"bd-168","depends_on_id":"bd-169","type":"blocks"}]}
{"id":"bd-169","title":"[Control Plane] Worker-lane typed contract + coherence parity checks","description":"Acceptance:\n- Extend `draft/CONTROL-PLANE-CONTRACT.json` with typed worker-lane contract fields needed to keep multithread mutation authority deterministic and bounded.\n- Extend coherence `gate_chain_parity` checks to fail closed on worker-lane contract drift (ownership violations, unbound lane routes, policy/mutation mode drift).\n- Keep instruction-linked mutation defaults explicit and auditable, with bounded compatibility/override semantics.\n\nVerification commands:\n- `mise run coherence-check`\n- `mise run ci-pipeline-test`\n- `mise run ci-drift-budget-check`","notes":"Closed with typed worker-lane authority contract and fail-closed coherence parity enforcement.\n\nDelivered:\n- Extended `draft/CONTROL-PLANE-CONTRACT.json` with `workerLaneAuthority`:\n  - `mutationPolicy` (`defaultMode=instruction-linked`, canonical `allowedModes`, epoch-bounded `compatibilityOverrides`),\n  - canonical `mutationRoutes` for `issueClaim|issueLeaseRenew|issueLeaseRelease|issueDiscover`,\n  - canonical worker-lane failure-class IDs.\n- Extended checker implementation in `crates/premath-coherence/src/lib.rs`:\n  - new typed `worker_lane_authority` contract surface,\n  - fail-closed `gate_chain_parity` checks for policy drift, mutation-mode drift, and route-unbound drift,\n  - wired worker-lane details/failures into both repo contract checks and coherence-site fixture evaluation.\n- Extended CI control-plane loader `tools/ci/control_plane_contract.py`:\n  - typed validation + canonicalization for `workerLaneAuthority`,\n  - exported worker-lane constants for downstream parity surfaces.\n- Extended tests/vectors:\n  - new Rust unit tests for worker-lane drift failures,\n  - new Python loader tests for worker default/route/override drift rejection,\n  - updated gate-chain fixture contracts with worker lane metadata,\n  - added adversarial coherence-site vectors:\n    - `adversarial/gate_chain_parity_worker_mutation_mode_drift_reject`\n    - `adversarial/gate_chain_parity_worker_policy_drift_reject`\n  - updated coherence-site manifest obligation mappings.\n- Spec glue:\n  - `draft/PREMATH-COHERENCE` gate-chain parity clause now explicitly includes worker-lane drift checks,\n  - `draft/SPEC-INDEX` control-plane contract summary includes worker mutation authority policy/routes.\n\nVerification:\n- `mise run coherence-check`\n- `mise run ci-pipeline-test`\n- `mise run ci-drift-budget-check`\n- `cargo test -p premath-coherence`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `mise run doctrine-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T00:19:21.862676Z","updated_at":"2026-02-23T00:41:04.053649Z","closed_at":"2026-02-23T00:41:04.053651Z","ephemeral":false,"dependencies":[{"issue_id":"bd-169","depends_on_id":"bd-166","type":"blocks"}]}
{"id":"bd-17","title":"[Traceability] T-DINF-01 Doctrine-Inf semantic coverage upgrade","description":"Extend doctrine validation beyond declaration/graph coherence into executable law-level checks for declared preserved/not-preserved morphism boundaries.","notes":"Implemented T-DINF-01 doctrine semantic boundary coverage: added doctrine-inf executable vectors + fixtures, wired doctrine-check to run both site and semantic checks, updated AGENTS/docs/traceability/raw CI-TOPOS, and logged Decision 0025. Verified with `mise run doctrine-check` and `mise run traceability-check`.","status":"closed","priority":3,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T00:22:43.700207Z","updated_at":"2026-02-22T01:06:33.828660Z","closed_at":"2026-02-22T01:06:33.828662Z","ephemeral":false,"dependencies":[{"issue_id":"bd-17","depends_on_id":"bd-1","type":"discovered-from"}]}
{"id":"bd-170","title":"[EPIC] Coherence control-surface consolidation (issue-memory + observation + harness)","description":"Acceptance:\n- One coherent control-surface path exists for issue-memory diagnostics, observation projections, and harness/operator views.\n- Actionable default views prioritize active work while preserving explicit full-history modes.\n- Spec/docs/command surfaces are aligned so agents do not infer parallel semantics.\n\nVerification commands:\n- `python3 tools/ci/check_issue_graph.py`\n- `mise run docs-coherence-check`\n- `cargo test -p premath-cli`","notes":"Epic closure: coherence control-surface consolidation delivered. Completed tasks: bd-171 (observation dependency-cycle integrity projection with active/full scopes + attention reason), bd-172 (CLI/dashboard exposure of dependency-cycle metrics), bd-173 (stale issue-id reference cleanup + live-roadmap contract), bd-174 (dep_diagnostics MCP/operator documentation and flow examples). Validation performed across slices: `mise run ci-observation-test`, `cargo test -p premath-surreal`, `cargo test -p premath-cli`, `mise run ci-observation-check`, `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:30:11.021191Z","updated_at":"2026-02-23T01:39:38.476245Z","closed_at":"2026-02-23T01:39:38.476248Z","ephemeral":false,"dependencies":[{"issue_id":"bd-170","depends_on_id":"bd-171","type":"blocks"},{"issue_id":"bd-170","depends_on_id":"bd-172","type":"blocks"},{"issue_id":"bd-170","depends_on_id":"bd-173","type":"blocks"},{"issue_id":"bd-170","depends_on_id":"bd-174","type":"blocks"}]}
{"id":"bd-171","title":"[Observation] Add dependency-cycle coherence projection (active default + full visibility)","description":"Acceptance:\n- Observation coherence includes deterministic dependency-cycle diagnostics with explicit scope fields.\n- Active scope drives attention/fail-fast semantics; full scope is exposed for audit visibility.\n- Projection is derived from canonical issue-memory rows only (no extra authority store).\n\nVerification commands:\n- `mise run ci-observation-test`\n- `mise run ci-observation-check`\n- `cargo test -p premath-surreal`","notes":"Implemented dependency-cycle coherence projection with active default semantics and full-scope visibility.\n\nDelivered:\n- Added scoped dependency-cycle reducer in `crates/premath-surreal/src/observation.rs`:\n  - deterministic adjacency/path/cycle detection over canonical issue-memory rows,\n  - scope modes: `active` (`open|in_progress`) and `full` (all issues).\n- Added `coherence.dependencyIntegrity` payload with:\n  - `active`: `{graphScope, issueCount, hasCycle, cyclePath}`\n  - `full`: `{graphScope, issueCount, hasCycle, cyclePath}`\n- Wired active-cycle detection to attention reasons via `dependency_cycle_active` (full-scope cycles are reported but do not drive active attention).\n- Extended reducer tests:\n  - deterministic no-cycle baseline assertion,\n  - closed-only cycle appears in `full` but not `active`,\n  - active cycle triggers attention reason.\n- Extended Python observation tests to assert dependencyIntegrity fields.\n\nVerification:\n- `mise run ci-observation-test`\n- `cargo test -p premath-surreal`\n- `mise run ci-observation-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:30:11.059848Z","updated_at":"2026-02-23T01:33:50.907400Z","closed_at":"2026-02-23T01:33:50.907404Z","ephemeral":false}
{"id":"bd-172","title":"[UX] Expose dependency-cycle coherence metric in observation CLI/dashboard","description":"Acceptance:\n- Observation CLI and dashboard expose scoped dependency-cycle coherence summary.\n- UI text makes active-vs-full scope explicit with deterministic values.\n- No duplicate reducer semantics are introduced in UI layers.\n\nVerification commands:\n- `mise run ci-observation-test`\n- `cargo test -p premath-cli`\n- `python3 tools/ci/check_observation_semantics.py`","notes":"Exposed dependency-cycle coherence metric through UX surfaces without adding parallel semantics.\n\nDelivered:\n- Updated `premath observe` coherence summary output to print explicit cycle status: `dependency cycles (active/full): yes|no / yes|no`.\n- Updated observation dashboard (`docs/observation/index.html`) with `Dependency Cycles (A/F)` metric derived directly from `coherence.dependencyIntegrity`:\n  - `bad` when active scope has cycle,\n  - `warn` when full-only cycle exists,\n  - `ok` otherwise.\n- Updated dashboard README (`docs/observation/README.md`) to include dependency-cycle integrity projection coverage.\n\nVerification:\n- `mise run ci-observation-test`\n- `cargo test -p premath-cli`\n- `mise run ci-observation-build && python3 tools/ci/check_observation_semantics.py`","status":"closed","priority":3,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:30:11.044996Z","updated_at":"2026-02-23T01:35:09.923221Z","closed_at":"2026-02-23T01:35:09.923224Z","ephemeral":false,"dependencies":[{"issue_id":"bd-172","depends_on_id":"bd-171","type":"blocks"}]}
{"id":"bd-173","title":"[Docs] Remove stale issue-id references and pin live-roadmap guidance","description":"Acceptance:\n- Docs do not reference stale/open issue IDs that no longer represent active work.\n- One canonical sentence points contributors to `.premath/issues.jsonl` + `issue_ready` as live roadmap.\n- Docs coherence checks remain green.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed stale issue-ref cleanup in design docs and pinned live-roadmap guidance to issue memory queries. Updated: docs/design/EV-COHERENCE-OVERVIEW.md, docs/design/CONTROL-PLANE-THREAT-MODEL.md, docs/design/EV-STAGE3-EXECUTION-RUNBOOK.md, docs/design/README.md. Verification: `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`, `rg -n \"bd-67|bd-113|bd-115|bd-140\" docs/design` (no matches).","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:30:11.074982Z","updated_at":"2026-02-23T01:37:27.441633Z","closed_at":"2026-02-23T01:37:27.441636Z","ephemeral":false}
{"id":"bd-174","title":"[MCP] Add dep_diagnostics tool docs + operator flow examples","description":"Acceptance:\n- MCP/docs list `dep_diagnostics` with active/full scope semantics and output shape.\n- Operator flow examples include when to use active default vs full graph mode.\n- Command-surface/docs checks remain coherent.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `cargo test -p premath-cli`","notes":"Added dep_diagnostics docs + operator flow examples across design and README surfaces. Updated: docs/design/MEMORY-LANES-CONTRACT.md (canonical query surface + verification commands), docs/design/DEVELOPMENT-META-LOOP.md (active-scope preflight in worker loop), docs/design/TUSK-HARNESS-MULTITHREAD-RUNBOOK.md (CLI+MCP flow examples for active/full scopes), docs/design/TUSK-HARNESS-CONTRACT.md (boot preflight integration), docs/design/CONTROL-PLANE-THREAT-MODEL.md (CP-05 controls include MCP dep_diagnostics), README.md (MCP operator flow notes). Verification: `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`, `rg -n \"dep_diagnostics|dep diagnostics|graph-scope active|graphScope\" docs/design README.md`.","status":"closed","priority":3,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:30:11.163694Z","updated_at":"2026-02-23T01:39:27.028309Z","closed_at":"2026-02-23T01:39:27.028312Z","ephemeral":false,"dependencies":[{"issue_id":"bd-174","depends_on_id":"bd-171","type":"blocks"}]}
{"id":"bd-175","title":"[Spec] Add doctrine-site operation mapping for MCP dep_diagnostics","description":"Align doctrine operation registry/site artifacts with shipped MCP `dep_diagnostics` surface so operation routing remains explicit and machine-checkable. Scope: update DOCTRINE-OP-REGISTRY, regenerate DOCTRINE-SITE, refresh any affected spec wording, run doctrine/docs coherence checks.","notes":"Added doctrine-site operation mapping for MCP dep_diagnostics and aligned spec text. Updated: specs/premath/draft/DOCTRINE-OP-REGISTRY.json (new operation `op/mcp.dep_diagnostics` with `dm.identity` + `dm.presentation.projection`), regenerated specs/premath/draft/DOCTRINE-SITE.json, updated specs/premath/draft/DOCTRINE-SITE.md repository v0 operation note, updated specs/premath/draft/SPEC-INDEX.md worker-operation routing note. Verification: `python3 tools/conformance/generate_doctrine_site.py`, `python3 tools/conformance/generate_doctrine_site.py --check`, `mise run doctrine-check`, `mise run docs-coherence-check`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:40:07.097496Z","updated_at":"2026-02-23T01:40:38.646471Z","closed_at":"2026-02-23T01:40:38.646474Z","ephemeral":false}
{"id":"bd-176","title":"[Spec] Expand doctrine-site MCP operation coverage for issue/dep surfaces","description":"Current doctrine operation registry maps only a subset of MCP issue/dep operations. Add explicit operation mappings for read projections (issue_list/ready/blocked/check/backend_status/issue_lease_projection) and mutation surfaces (issue_add/update, dep_add/remove/replace), regenerate doctrine-site artifact, and align spec notes.","notes":"Expanded doctrine-site MCP operation coverage for issue/dep surfaces. Updated specs/premath/draft/DOCTRINE-OP-REGISTRY.json with explicit operation mappings for: mutation/session (`op/mcp.issue_add`, `op/mcp.issue_update`, `op/mcp.issue_claim`, `op/mcp.issue_lease_renew`, `op/mcp.issue_lease_release`, `op/mcp.issue_discover`, `op/mcp.dep_add`, `op/mcp.dep_remove`, `op/mcp.dep_replace`) and read/projection (`op/mcp.issue_list`, `op/mcp.issue_ready`, `op/mcp.issue_blocked`, `op/mcp.issue_check`, `op/mcp.issue_backend_status`, `op/mcp.issue_lease_projection`, `op/mcp.dep_diagnostics`). Regenerated specs/premath/draft/DOCTRINE-SITE.json and updated specs/premath/draft/DOCTRINE-SITE.md + specs/premath/draft/SPEC-INDEX.md to reflect widened routing coverage. Verification: `python3 tools/conformance/generate_doctrine_site.py`, `python3 tools/conformance/generate_doctrine_site.py --check`, `mise run doctrine-check`, `mise run docs-coherence-check`, `mise run traceability-check`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:41:00.029714Z","updated_at":"2026-02-23T01:41:55.717985Z","closed_at":"2026-02-23T01:41:55.717989Z","ephemeral":false}
{"id":"bd-177","title":"[Conformance] Add MCP issue/dep doctrine-site parity check","description":"## Acceptance\n- Add a deterministic checker that compares MCP `mcp_tool` names in `crates/premath-cli/src/commands/mcp_serve.rs` against mapped `op/mcp.*` entries in `specs/premath/draft/DOCTRINE-OP-REGISTRY.json` for issue/dep surfaces.\n- Checker must fail closed on missing mappings and list exact missing tool names.\n- Wire checker into at least one existing command surface used in local/CI doctrine/docs coherence loops.\n- Document the check entrypoint in AGENTS or design docs.\n\n## Verification\n- python3 tools/conformance/check_doctrine_mcp_parity.py\n- mise run doctrine-check\n- python3 tools/ci/check_issue_graph.py","notes":"Implemented doctrine-site MCP issue/dep parity guard. Added checker `tools/conformance/check_doctrine_mcp_parity.py` (fails on missing/stale `op/mcp.*` mappings for `issue_*` + `dep_*` MCP tools), added unit tests `tools/conformance/test_doctrine_mcp_parity.py`, wired checker into `.mise.toml` `tasks.doctrine-check`, and added test into `tasks.ci-pipeline-test`. Updated docs/spec surfaces: `AGENTS.md` doctrine-check description, `specs/premath/draft/DOCTRINE-SITE.md` checker list, and `tools/conformance/check_docs_coherence.py` expected doctrine-check command surface. Verification: `python3 tools/conformance/check_doctrine_mcp_parity.py`, `python3 tools/conformance/test_doctrine_mcp_parity.py`, `mise run doctrine-check`, `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:42:15.061231Z","updated_at":"2026-02-23T01:43:58.522406Z","closed_at":"2026-02-23T01:43:58.522409Z","ephemeral":false}
{"id":"bd-178","title":"[Spec] Complete doctrine-site mapping for all MCP tools and enforce full parity","description":"Acceptance:\n- Add doctrine operation mappings for all MCP tools declared in `crates/premath-cli/src/commands/mcp_serve.rs` (including `init_tool`, `instruction_*`, and `observe_*`).\n- Regenerate `specs/premath/draft/DOCTRINE-SITE.json` and update adjacent spec text to reflect full MCP coverage.\n- Upgrade `tools/conformance/check_doctrine_mcp_parity.py` to enforce full MCP parity (not only issue/dep subset).\n- Update parity tests accordingly.\n\nVerification commands:\n- `python3 tools/conformance/check_doctrine_mcp_parity.py`\n- `python3 tools/conformance/test_doctrine_mcp_parity.py`\n- `python3 tools/conformance/generate_doctrine_site.py --check`\n- `mise run doctrine-check`\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed full MCP doctrine-site mapping and parity hardening. Added missing doctrine operation entries in specs/premath/draft/DOCTRINE-OP-REGISTRY.json for `op/mcp.init_tool`, `op/mcp.instruction_check`, `op/mcp.instruction_run`, `op/mcp.observe_latest`, `op/mcp.observe_needs_attention`, `op/mcp.observe_instruction`, and `op/mcp.observe_projection`; regenerated specs/premath/draft/DOCTRINE-SITE.json. Updated specs text in specs/premath/draft/DOCTRINE-SITE.md and specs/premath/draft/SPEC-INDEX.md to reflect complete MCP routing coverage. Upgraded tools/conformance/check_doctrine_mcp_parity.py from issue/dep subset parity to full MCP parity and updated tools/conformance/test_doctrine_mcp_parity.py accordingly. Verification: `python3 tools/conformance/check_doctrine_mcp_parity.py`, `python3 tools/conformance/test_doctrine_mcp_parity.py`, `python3 tools/conformance/generate_doctrine_site.py --check`, `mise run doctrine-check`, `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:44:57.157871Z","updated_at":"2026-02-23T01:47:09.358172Z","closed_at":"2026-02-23T01:47:09.358176Z","ephemeral":false}
{"id":"bd-179","title":"[Conformance] Enforce MCP read-only/execution morphism classification in doctrine parity check","description":"Acceptance:\n- Extend `tools/conformance/check_doctrine_mcp_parity.py` to parse MCP tool metadata in `mcp_serve.rs` and enforce morphism classification consistency:\n  - read-only tools require `dm.presentation.projection` and must not declare `dm.profile.execution`.\n  - mutating tools require `dm.profile.execution`.\n- Keep existing full MCP name parity checks.\n- Add/extend unit tests to cover classification mismatch detection.\n\nVerification commands:\n- `python3 tools/conformance/check_doctrine_mcp_parity.py`\n- `python3 tools/conformance/test_doctrine_mcp_parity.py`\n- `mise run doctrine-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Extended doctrine MCP parity check from name-only parity to authority-shape parity using MCP metadata. `tools/conformance/check_doctrine_mcp_parity.py` now parses `mcp_tool` blocks (including explicit `read_only_hint`) and enforces morphism classification consistency in `DOCTRINE-OP-REGISTRY`: read-only tools require `dm.presentation.projection` and must not declare `dm.profile.execution`; mutating tools require `dm.profile.execution`. Registry parsing now validates per-op morphism lists and identity presence. Updated tests in `tools/conformance/test_doctrine_mcp_parity.py` (5 tests) including read-only flag parsing and morphism parsing scenarios. Verification: `python3 tools/conformance/check_doctrine_mcp_parity.py`, `python3 tools/conformance/test_doctrine_mcp_parity.py`, `mise run doctrine-check`, `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:47:40.104451Z","updated_at":"2026-02-23T01:48:57.565005Z","closed_at":"2026-02-23T01:48:57.565008Z","ephemeral":false}
{"id":"bd-18","title":"[Traceability] T-KERNEL-01 Cross-model kernel vector profile","description":"Define canonical cross-model kernel conformance vector profile for reproducible comparisons in addition to host-specific proof/test surfaces.","notes":"Executed T-KERNEL-01 with canonical cross-model kernel profile vectors. Added tools/conformance/run_kernel_profile_vectors.py + tests/conformance/fixtures/kernel-profile, wired kernel-profile into cached run_fixture_suites/conformance-run, updated traceability/docs/spec references, and recorded Decision 0026. Verified with run_kernel_profile_vectors, run_fixture_suites --suite kernel-profile (RUN/HIT), mise run conformance-run, and mise run traceability-check.","status":"closed","priority":3,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T00:22:46.892859Z","updated_at":"2026-02-22T01:12:46.184772Z","closed_at":"2026-02-22T01:12:46.184776Z","ephemeral":false,"dependencies":[{"issue_id":"bd-18","depends_on_id":"bd-1","type":"discovered-from"}]}
{"id":"bd-180","title":"[Spec] Map doctrine MCP parity checker as doctrine-site operation node","description":"Acceptance:\n- Add operation mapping for `tools/conformance/check_doctrine_mcp_parity.py` in `DOCTRINE-OP-REGISTRY.json`.\n- Regenerate `DOCTRINE-SITE.json` and update spec text if needed.\n- Keep doctrine-check/docs-coherence/issue-graph green.\n\nVerification commands:\n- `python3 tools/conformance/generate_doctrine_site.py --check`\n- `mise run doctrine-check`\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Mapped doctrine MCP parity checker into doctrine-site operation registry. Updated specs/premath/draft/DOCTRINE-OP-REGISTRY.json with `op/conformance.doctrine_mcp_parity` (`tools/conformance/check_doctrine_mcp_parity.py`) and projection morphisms; regenerated specs/premath/draft/DOCTRINE-SITE.json; updated specs/premath/draft/DOCTRINE-SITE.md doctrine-conformance operation list. Verification: `python3 tools/conformance/generate_doctrine_site.py --check`, `mise run doctrine-check`, `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:49:10.430406Z","updated_at":"2026-02-23T01:49:36.003811Z","closed_at":"2026-02-23T01:49:36.003813Z","ephemeral":false}
{"id":"bd-181","title":"[Docs] Reflect MCP doctrine-parity guard in control-plane threat model","description":"Acceptance:\n- Update control-plane threat/hardening docs to include the enforced MCP doctrine-operation parity guard.\n- Reference concrete checker surface (`check_doctrine_mcp_parity.py` / `mise run doctrine-check`).\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Updated docs to reflect enforced MCP doctrine-operation parity guard. `docs/design/CONTROL-PLANE-THREAT-MODEL.md` now includes doctrine-site + MCP parity controls in CP-02 and hardening matrix entry for implemented doctrine operation-route parity via `mise run doctrine-check`. `docs/design/ARCHITECTURE-MAP.md` conformance closure now explicitly states doctrine closure includes `check_doctrine_site.py` + `check_doctrine_mcp_parity.py`. Verification: `mise run docs-coherence-check`, `mise run doctrine-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":3,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:49:58.839761Z","updated_at":"2026-02-23T01:50:26.532664Z","closed_at":"2026-02-23T01:50:26.532665Z","ephemeral":false}
{"id":"bd-182","title":"[Test] Update docs-coherence parser fixture for doctrine-check parity command","description":"Acceptance:\n- Update docs-coherence parser test fixture in `tools/conformance/test_docs_coherence.py` so `tasks.doctrine-check` includes `check_doctrine_mcp_parity.py` in expected command order.\n- Ensure failing baseline slice (`tools/conformance/test_docs_coherence.py`) passes.\n\nVerification commands:\n- `python3 tools/conformance/test_docs_coherence.py`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Fixed docs-coherence parser fixture drift for doctrine-check command surface. Updated `tools/conformance/test_docs_coherence.py` fixture in `test_parse_doctrine_check_commands` to include `python3 tools/conformance/check_doctrine_mcp_parity.py` between `check_doctrine_site.py` and doctrine-inf suite. Verification: `python3 tools/conformance/test_docs_coherence.py`, `mise run ci-pipeline-test`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:51:04.893238Z","updated_at":"2026-02-23T01:51:33.152888Z","closed_at":"2026-02-23T01:51:33.152892Z","ephemeral":false}
{"id":"bd-183","title":"[Docs] Normalize doctrine-check descriptions to include MCP parity guard","description":"Acceptance:\n- Update design/spec docs that still describe `doctrine-check` as only doctrine-site + doctrine-inf vectors.\n- Normalize wording to include MCP doctrine-operation parity check (`check_doctrine_mcp_parity.py`).\n- Keep docs coherence and issue graph green.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `mise run doctrine-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Normalized stale doctrine-check descriptions to current enforced semantics (site coherence + MCP doctrine-operation parity + doctrine-inf vectors). Updated docs/design/CI-CLOSURE.md, docs/design/ARCHITECTURE-MAP.md, docs/design/GLOSSARY.md, and docs/design/HIGHER-ORDER-CI-CD.md. Verification: `mise run docs-coherence-check`, `mise run doctrine-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":3,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:53:02.409704Z","updated_at":"2026-02-23T01:54:14.004644Z","closed_at":"2026-02-23T01:54:14.004647Z","ephemeral":false}
{"id":"bd-184","title":"[Conformance] Enforce CI-CLOSURE doctrine-check semantics marker in docs coherence","description":"Acceptance:\n- Extend `tools/conformance/check_docs_coherence.py` to require CI-CLOSURE doctrine-check semantics marker including MCP doctrine-operation parity.\n- Keep docs coherent with `doctrine-check` command surface and marker contract.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `python3 tools/conformance/test_docs_coherence.py`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Added docs-coherence invariant for CI-CLOSURE doctrine-check semantics marker. Updated tools/conformance/check_docs_coherence.py with `CI_CLOSURE_DOCTRINE_MARKERS` and fail-closed marker checks so doctrine-check docs must include MCP doctrine-operation parity wording. Verification: `python3 tools/conformance/test_docs_coherence.py`, `mise run docs-coherence-check`, `mise run doctrine-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:53:51.656436Z","updated_at":"2026-02-23T01:54:14.041653Z","closed_at":"2026-02-23T01:54:14.041656Z","ephemeral":false}
{"id":"bd-185","title":"[Docs] Align README doctrine-check description with enforced MCP parity guard","description":"Acceptance:\n- README baseline closure bullet for doctrine validation explicitly includes MCP doctrine-operation parity.\n- README manual command list includes `mise run doctrine-check`.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Aligned README doctrine-check semantics with current enforced behavior. Updated baseline closure bullet to explicitly include MCP doctrine-operation parity and added `mise run doctrine-check` to manual run command list. Verification: `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`, `rg -n \"doctrine-to-operation site coherence validation|mise run doctrine-check\" README.md`.","status":"closed","priority":3,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:54:34.380869Z","updated_at":"2026-02-23T01:54:53.024967Z","closed_at":"2026-02-23T01:54:53.024970Z","ephemeral":false}
{"id":"bd-186","title":"[Conformance] Enforce README and Architecture doctrine-check parity markers","description":"Acceptance:\n- Extend `tools/conformance/check_docs_coherence.py` to require doctrine-check parity markers in `README.md` and `docs/design/ARCHITECTURE-MAP.md`.\n- Markers must include MCP doctrine-operation parity language and `check_doctrine_mcp_parity.py` presence in architecture operational surfaces.\n\nVerification commands:\n- `python3 tools/conformance/test_docs_coherence.py`\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Extended docs coherence guardrails to prevent doctrine-check parity drift in top-level docs. Updated `tools/conformance/check_docs_coherence.py` with marker enforcement for `README.md` (MCP parity wording + `mise run doctrine-check` command) and `docs/design/ARCHITECTURE-MAP.md` (`check_doctrine_mcp_parity.py` operational surface + doctrine-operation parity wording). Verification: `python3 tools/conformance/test_docs_coherence.py`, `mise run docs-coherence-check`, `python3 tools/ci/check_issue_graph.py`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T01:55:12.556020Z","updated_at":"2026-02-23T01:55:34.101209Z","closed_at":"2026-02-23T01:55:34.101211Z","ephemeral":false}
{"id":"bd-187","title":"[EPIC] Harness v1 closure and multi-writer claim safety","description":"Acceptance:\n- Deliver deterministic harness v1 closure across boot/step/stop with typed retry/escalation semantics.\n- Remove single-coordinator write caveat by shipping lock-safe multi-writer claim semantics in core issue memory.\n- Promote stable harness contracts from design docs into draft-spec surfaces with conformance coverage.\n\nVerification commands:\n- `mise run doctrine-check`\n- `mise run docs-coherence-check`\n- `mise run ci-pipeline-test`\n- `mise run conformance-run`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Epic completed.\n\nDelivered across child chain:\n- bd-188: harness boot determinism + session bootstrap closure.\n- bd-189: stop/handoff lease-state closure + deterministic recovery path.\n- bd-190: retry/escalation failure taxonomy expansion in wrapper pipelines.\n- bd-191: lock-safe multi-writer claim semantics in core issue memory.\n- bd-192: harness runtime/retry contract promotion to draft specs.\n- bd-193: harness-v1 + multi-writer capability vectors and docs/conformance closure.\n\nVerification closure set executed across chain:\n- `mise run doctrine-check`\n- `mise run docs-coherence-check`\n- `mise run ci-pipeline-test`\n- `mise run conformance-run`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T02:03:05.285189Z","updated_at":"2026-02-23T03:01:46.984008Z","closed_at":"2026-02-23T03:01:46.984011Z","ephemeral":false,"dependencies":[{"issue_id":"bd-187","depends_on_id":"bd-188","type":"blocks"},{"issue_id":"bd-187","depends_on_id":"bd-189","type":"blocks"},{"issue_id":"bd-187","depends_on_id":"bd-190","type":"blocks"},{"issue_id":"bd-187","depends_on_id":"bd-191","type":"blocks"},{"issue_id":"bd-187","depends_on_id":"bd-192","type":"blocks"},{"issue_id":"bd-187","depends_on_id":"bd-193","type":"blocks"}]}
{"id":"bd-188","title":"[Harness] Deterministic boot context resolution contract","description":"Acceptance:\n- Implement deterministic boot target resolution across `PREMATH_ACTIVE_ISSUE_ID`, `PREMATH_ISSUE_ID`, harness-session fallback, and issue-memory ready frontier.\n- Fail closed on ambiguous/unbound boot contexts with typed failure classes.\n- Add integration tests for environment/session fallback ordering and reproducibility.\n\nVerification commands:\n- `cargo test -p premath-cli`\n- `python3 tools/harness/multithread_loop.py worker --help`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Implemented deterministic active-issue resolution with explicit precedence and fail-closed behavior in `tools/ci/harness_escalation.py`:\n- precedence: env (`PREMATH_ACTIVE_ISSUE_ID` / `PREMATH_ISSUE_ID`) -> harness-session (`issueId`) -> `issue ready` frontier (exactly one row)\n- fail-closed classes: `escalation_issue_context_unbound`, `escalation_issue_context_ambiguous`\n- removed silent `skipped_missing_issue_context` path for terminal mutation actions\n\nAdded integration tests in `tools/ci/test_harness_escalation.py` for:\n- missing context fail-closed\n- ready-frontier fallback\n- ready-frontier ambiguity\n- conflicting env ambiguity\n\nUpdated contract doc `docs/design/TUSK-HARNESS-RETRY-POLICY.md` to match resolver behavior.\n\nVerification run:\n- `python3 tools/harness/multithread_loop.py worker --help`\n- `cargo test -p premath-cli`\n- `mise run ci-pipeline-test`\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`\n\nBranch commit: `f37c4da` (`codex/bd-188`).","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T02:03:05.314337Z","updated_at":"2026-02-23T02:18:06.243344Z","closed_at":"2026-02-23T02:18:06.243347Z","ephemeral":false}
{"id":"bd-189","title":"[Harness] Stop/handoff lease closure invariants + recovery tests","description":"Acceptance:\n- Enforce stop-path invariants linking lease release/renew outcomes with harness-session and trajectory projections.\n- Add deterministic recovery test coverage for stale/contended leases and worker restart handoff.\n- Ensure no hidden authority path bypasses issue-memory state on stop/recovery.\n\nVerification commands:\n- `cargo test -p premath-cli`\n- `mise run ci-pipeline-test`\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Implemented stop/handoff lease closure invariants in `tools/harness/multithread_loop.py` with issue-memory-derived lease classification and deterministic lease handoff refs.\n\nChanges:\n- Added stop/handoff lease snapshot + classifier (`active|stale|contended|released|...`) derived from canonical `.premath/issues.jsonl`.\n- Success path now asserts closed transition releases lease (fail-closed invariant check).\n- Failure path now emits deterministic recovery action/next-step from lease state.\n- Session and trajectory projections now share deterministic `lease://handoff/<issue>/<state>/<digest>` refs; feature/session summaries include lease state/action.\n- Extended projection helpers to support multiple witness/verification refs.\n- Added deterministic tests: `tools/ci/test_harness_multithread_loop.py` (stale/contended/active/closed restart + success invariant).\n- Wired new tests into `mise run ci-pipeline-test` via `.mise.toml`.\n- Updated docs: `TUSK-HARNESS-MULTITHREAD-RUNBOOK.md`, `TUSK-HARNESS-CONTRACT.md`, `TUSK-HARNESS-SESSION.md`, `TUSK-HARNESS-TRAJECTORY.md`.\n\nVerification:\n- `python3 tools/ci/test_harness_multithread_loop.py`\n- `python3 tools/ci/test_harness_escalation.py`\n- `python3 tools/ci/test_harness_retry_policy.py`\n- `cargo test -p premath-cli`\n- `mise run ci-pipeline-test`\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T02:03:05.340641Z","updated_at":"2026-02-23T02:33:50.969315Z","closed_at":"2026-02-23T02:33:50.969317Z","ephemeral":false,"dependencies":[{"issue_id":"bd-189","depends_on_id":"bd-188","type":"blocks"},{"issue_id":"bd-189","depends_on_id":"bd-191","type":"blocks"}]}
{"id":"bd-19","title":"[Conformance] Ensure all fixture suites are hook-gated with caching","description":"Ensure interop-core, gate, and capability fixture suites are all covered in pre-commit/pre-push gate paths with deterministic caching to avoid redundant reruns while preserving correctness.","notes":"Implemented deterministic KCIR-style fixture-suite caching and hook-gated executable conformance projection. Added tools/conformance/run_fixture_suites.py (kcir.cache.fixture-suite.v1 bindings, kcir1 refs, .premath/cache storage, PREMATH_CONFORMANCE_CACHE toggle), switched mise conformance-run to use suite runner, updated change projection to require conformance-run on conformance-surface deltas, updated capability vector fixture expectations, and updated conformance/CI docs to match command surface.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T00:37:55.046735Z","updated_at":"2026-02-22T00:46:19.172289Z","closed_at":"2026-02-22T00:46:19.172292Z","ephemeral":false,"dependencies":[{"issue_id":"bd-19","depends_on_id":"bd-2","type":"discovered-from"}]}
{"id":"bd-190","title":"[Harness] Failure taxonomy expansion + retry/escalation coverage","description":"Acceptance:\n- Expand typed harness failure classes from observed runs while preserving policy digest discipline.\n- Align retry/escalation mapping (`issue_discover` / `mark_blocked` / `stop`) across wrapper and core client paths.\n- Add deterministic tests for class-to-escalation routing and invariant witness linkage.\n\nVerification commands:\n- `python3 tools/ci/test_harness_retry_policy.py`\n- `python3 tools/ci/test_harness_escalation.py`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Implemented failure taxonomy expansion + retry/escalation routing alignment for CI harness wrappers.\n\nChanges:\n- `policies/control/harness-retry-policy-v1.json`\n  - expanded operational/transient/semantic class allowlists;\n  - updated deterministic policy digest.\n- `tools/ci/harness_retry_policy.py`\n  - added process-output parsing for typed failure classes (`stdout`/`stderr` JSON + token extraction);\n  - added source-combination helpers and classification precedence;\n  - preserved deterministic decisioning while matching rules by input ordering.\n- `tools/ci/pipeline_required.py` and `tools/ci/pipeline_instruction.py`\n  - wrappers now stream command output and classify failures from process output + witness surfaces;\n  - escalation routing uses combined classification, preserving fail-closed behavior.\n- Added/expanded deterministic tests:\n  - `tools/ci/test_harness_retry_policy.py`\n  - `tools/ci/test_pipeline_required.py`\n  - `tools/ci/test_pipeline_instruction.py`\n\nVerification:\n- `python3 tools/ci/test_harness_retry_policy.py`\n- `python3 tools/ci/test_harness_escalation.py`\n- `mise run ci-pipeline-test`\n- `python3 tools/ci/check_issue_graph.py`\n\nIntegrated from workspace branch `codex/bd-190-prep` commit `ffeed22` via cherry-pick into integration branch commit `5428ee0`.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T02:03:05.357690Z","updated_at":"2026-02-23T02:49:19.608984Z","closed_at":"2026-02-23T02:49:19.608986Z","ephemeral":false,"dependencies":[{"issue_id":"bd-190","depends_on_id":"bd-188","type":"blocks"},{"issue_id":"bd-190","depends_on_id":"bd-189","type":"blocks"},{"issue_id":"bd-190","depends_on_id":"bd-191","type":"blocks"}]}
{"id":"bd-191","title":"[premath-bd] Lock-safe multi-writer claim semantics (coordinator-free)","description":"Acceptance:\n- Implement lock-safe multi-writer claim/lease semantics in core issue memory suitable for concurrent workers.\n- Preserve deterministic claim-next ordering and cycle/edge integrity under contention.\n- Add contention/replay tests proving no duplicate claims or silent lease corruption.\n\nVerification commands:\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `mise run ci-hygiene-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Implemented lock-safe multi-writer claim/lease semantics and contention coverage across premath-bd + CLI/MCP surfaces.\n\nChanges:\n- `crates/premath-bd/src/atomic_store.rs`: lock acquisition retries with bounded backoff (reduces transient lock-busy under contention).\n- `crates/premath-bd/src/claim_next.rs`: deterministic claim-next under contention, preserve same-owner active lease id on renewal, added contention + lease-preservation tests.\n- `crates/premath-cli/src/commands/issue.rs`: claim path now lease-aware (stale reclaim, active-lease conflict checks, lease payload emission).\n- `crates/premath-cli/src/commands/mcp_serve.rs`: claim semantics aligned with same-owner lease-id preservation; added contention and lease-preservation tests.\n- `crates/premath-cli/tests/cli_smoke.rs`: added contention smoke for `issue claim-next`.\n\nVerification:\n- `cargo test -p premath-bd`\n- `cargo test -p premath-cli`\n- `mise run ci-hygiene-check`\n- `python3 tools/ci/check_issue_graph.py`\n- `mise run ci-pipeline-test`\n\nMain commit: `e4faaaa`.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T02:03:05.375721Z","updated_at":"2026-02-23T02:24:16.884319Z","closed_at":"2026-02-23T02:24:16.884321Z","ephemeral":false}
{"id":"bd-192","title":"[Spec] Promote harness contracts from design docs to draft surfaces","description":"Acceptance:\n- Promote stable harness contract slices from design docs into draft spec surfaces with clear authority boundaries.\n- Add/update SPEC-INDEX references and doctrine-site routing notes for promoted harness surfaces.\n- Keep docs/spec command surfaces coherent with executable checks.\n\nVerification commands:\n- `mise run traceability-check`\n- `mise run docs-coherence-check`\n- `mise run doctrine-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Promoted harness contract slices from design lane into draft spec surfaces with no semantic behavior delta.\n\nChanges:\n- Added `specs/premath/draft/HARNESS-RUNTIME.md`:\n  - canonical boot/step/stop contract;\n  - session (`premath.harness.session.v1`), feature ledger (`premath.harness.feature_ledger.v1`), trajectory (`premath.harness.step.v1`) contracts;\n  - deterministic multithread coordinator/worker loop obligations;\n  - doctrine-site routing note anchored to existing routed operation IDs only.\n- Added `specs/premath/draft/HARNESS-RETRY-ESCALATION.md`:\n  - canonical retry-policy artifact/digest binding;\n  - deterministic classify/retry/escalate rule model;\n  - escalation issue-context fallback order + fail-closed classes;\n  - doctrine-site routing note for escalation/session issue operations.\n- Updated `specs/premath/draft/SPEC-INDEX.md`:\n  - informative overlay entries for new harness draft surfaces;\n  - explicit routing note that promoted harness docs reuse existing doctrine-site op IDs (no parallel authority path).\n- Updated `specs/premath/draft/SPEC-TRACEABILITY.md`:\n  - added covered rows for `HARNESS-RUNTIME.md` and `HARNESS-RETRY-ESCALATION.md` with executable surfaces.\n- Updated README coherence:\n  - `specs/premath/draft/README.md` includes promoted harness draft surfaces;\n  - `docs/design/README.md` clarifies design harness docs are runbooks and promoted contract surfaces live under draft specs.\n- Added decision-log entry:\n  - `specs/process/decision-log.md` Decision 0111 (harness runtime/retry promotion to draft).\n\nVerification:\n- `mise run traceability-check`\n- `mise run docs-coherence-check`\n- `mise run doctrine-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T02:03:05.395934Z","updated_at":"2026-02-23T02:53:43.878073Z","closed_at":"2026-02-23T02:53:43.878075Z","ephemeral":false,"dependencies":[{"issue_id":"bd-192","depends_on_id":"bd-188","type":"blocks"},{"issue_id":"bd-192","depends_on_id":"bd-190","type":"blocks"},{"issue_id":"bd-192","depends_on_id":"bd-189","type":"blocks"},{"issue_id":"bd-192","depends_on_id":"bd-191","type":"blocks"},{"issue_id":"bd-192","depends_on_id":"bd-194","type":"blocks"}]}
{"id":"bd-193","title":"[Conformance] Harness v1 capability vectors + closure docs","description":"Acceptance:\n- Add/update conformance vectors covering harness v1 boot/stop/recovery and multi-writer claim semantics.\n- Ensure vectors include adversarial + invariance rows where applicable.\n- Close docs/traceability loop for harness v1 claims.\n\nVerification commands:\n- `mise run conformance-run`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Delivered harness-v1 capability vectors + closure docs.\n\nImplemented:\n- `capabilities.ci_witnesses` new vectors:\n  - `golden/harness_boot_stop_recovery_accept`\n  - `adversarial/harness_bootstrap_mode_mismatch_reject`\n  - `adversarial/harness_stop_handoff_missing_lease_ref_reject`\n  - invariance: `same_harness_recovery_local|external`\n- `capabilities.change_morphisms` new vectors:\n  - `golden/issue_claim_same_owner_preserves_active_lease_id`\n  - `adversarial/issue_claim_same_owner_lease_id_override_reject`\n  - invariance: `same_issue_claim_same_owner_preserve_local|external`\n- `tools/conformance/run_capability_vectors.py`:\n  - added harness runtime evaluator (bootstrap mode, lease-state recovery mapping, lease handoff ref checks);\n  - aligned issue-claim evaluator with same-owner active lease-id preservation.\n- Updated manifests for both capabilities.\n- Updated docs/specs:\n  - `specs/premath/draft/CAPABILITY-VECTORS.md`\n  - `specs/premath/draft/CONFORMANCE.md`\n- Added Decision 0112 in `specs/process/decision-log.md`.\n\nVerification:\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses --capability capabilities.change_morphisms`\n- `python3 tools/conformance/check_stub_invariance.py`\n- `mise run conformance-run`\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T02:03:05.418876Z","updated_at":"2026-02-23T03:00:42.322598Z","closed_at":"2026-02-23T03:00:27.649487Z","ephemeral":false,"dependencies":[{"issue_id":"bd-193","depends_on_id":"bd-192","type":"blocks"}]}
{"id":"bd-194","title":"[SpecPrep] Harness draft promotion preflight map (parallel-safe)","description":"Acceptance:\n- Build a deterministic promotion map from `docs/design/TUSK-HARNESS-*` to draft spec targets under `specs/premath/draft/` without introducing new semantics.\n- Define per-target command-surface anchors and doctrine-site routing references to minimize merge risk when `bd-190` lands.\n- Produce one checklist artifact that `bd-192` can apply as a mechanical follow-up.\n\nVerification commands:\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","notes":"Completed parallel-safe harness promotion preflight mapping without semantic changes.\n\nArtifacts:\n- Added `specs/process/HARNESS-SPEC-PROMOTION-MAP.md` with deterministic source->target mapping, command-surface anchors, doctrine-site routing anchors, merge-safe ordering, and `bd-192` checklist.\n- Updated `specs/process/README.md` index entry.\n- Added dependency edge `bd-192 -> bd-194 (blocks)` so promotion execution consumes the checklist artifact.\n\nVerification:\n- `mise run docs-coherence-check`\n- `python3 tools/ci/check_issue_graph.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","owner":"premath-core","created_at":"2026-02-23T02:38:28.697292Z","updated_at":"2026-02-23T02:39:48.672283Z","closed_at":"2026-02-23T02:39:48.672285Z","ephemeral":false}
{"id":"bd-195","title":"[EPIC] Grothendieck operationalization: cover/descent worker orchestration through Ev","description":"Implement UNIFICATION-DOCTRINE §12 end-to-end: worker cover decomposition on Ctx, deterministic glue-or-obstruction discharge, and universal factoring of control-plane artifact families through Ev without parallel authority paths.\n\nAcceptance:\n- harness/control-plane outputs remain projection-only and checker/Gate-owned for admissibility\n- evidence factorization remains fail-closed on missing/ambiguous/unbound routes\n- remaining epic slices (bd-196/bd-197 follow-ons) close with doctrine/spec/conformance parity\n\nVerification commands:\n- `mise run coherence-check`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract`\n- `mise run doctrine-check`","notes":"Progress update: closed bd-198 (harness lineage encoding), bd-199 (Grothendieck evidence-factorization coherence vectors), bd-200 (issue_add type persistence fix), bd-201 (harness lineage conformance enforcement), bd-202 (snake/camel alias compatibility across issue/dep tools), and bd-203 (call-tool parity regression for issue_add). Closed epic after verifying end-to-end §12 authority path remains deterministic and projection-only. Verification run 2026-02-23: mise run coherence-check; python3 tools/conformance/run_fixture_suites.py --suite coherence-contract; mise run doctrine-check.","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","created_at":"2026-02-23T03:11:28.414950Z","updated_at":"2026-02-23T04:01:40.681133Z","closed_at":"2026-02-23T04:01:40.681134Z","ephemeral":false,"dependencies":[{"issue_id":"bd-195","depends_on_id":"bd-196","type":"blocks","created_by":"codex"},{"issue_id":"bd-195","depends_on_id":"bd-197","type":"blocks","created_by":"codex"},{"issue_id":"bd-195","depends_on_id":"bd-199","type":"blocks","created_by":"codex"},{"issue_id":"bd-195","depends_on_id":"bd-198","type":"blocks","created_by":"codex"}]}
{"id":"bd-196","title":"[Spec Glue] Thread Grothendieck operationalization into SPEC-INDEX and doctrine-site routing","description":"Wire §12 references into SPEC-INDEX reading/composition paths and ensure doctrine-site operation routing language explicitly reflects cover/decomposition and Ev factoring boundaries (semantic authority vs projection surfaces).","notes":"Completed: threaded Grothendieck operationalization glue into SPEC-INDEX and DOCTRINE-SITE routing language, including explicit §12 references and worker-routing authority boundaries. Verification passed: mise run doctrine-check, mise run docs-coherence-check, mise run coherence-check.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T03:11:28.448614Z","updated_at":"2026-02-23T03:18:53.986340Z","closed_at":"2026-02-23T03:18:53.986343Z","ephemeral":false}
{"id":"bd-197","title":"[Checker] Add deterministic coherence checks for Ev factorization and cover/glue operational claims","description":"Extend coherence/control-plane checks to fail closed when Grothendieck operationalization invariants drift: missing/ambiguous factoring routes, unbound deterministic bindings, or missing commutation route constraints for cross-lane base-change claims.","notes":"Completed checker/control-plane fail-closed path for Grothendieck evidence factorization invariants: added `evidenceFactorization` contract shape, deterministic missing/ambiguous/unbound checks, cross-lane route binding checks, and regression tests in premath-coherence gate_chain_parity. Updated CONTROL-PLANE-CONTRACT and PREMATH-COHERENCE gate_chain_parity documentation. Verification passed: cargo test -p premath-coherence check_gate_chain_parity_rejects_evidence_factorization; mise run coherence-check; mise run docs-coherence-check; mise run doctrine-check.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T03:11:28.468998Z","updated_at":"2026-02-23T03:23:08.694511Z","closed_at":"2026-02-23T03:23:08.694514Z","ephemeral":false,"dependencies":[{"issue_id":"bd-197","depends_on_id":"bd-196","type":"blocks","created_by":"codex"}]}
{"id":"bd-198","title":"[Harness] Encode site-cover/refinement lineage in multithread trajectory and handoff projections","description":"Add minimal operational fields that make worker contexts/refinements/covers explicit and replayable in harness artifacts, while preserving projection-only status and checker/Gate semantic authority boundaries.","notes":"Completed: added deterministic site lineage refs (ctx/cover/refinement) to harness session + trajectory projections. CLI now supports --lineage-ref for harness-session write and harness-trajectory append; multithread worker loop emits deterministic lineage refs on active and stop/handoff writes and trajectory rows. Updated HARNESS-RUNTIME + harness design docs accordingly. Verified with cargo fmt, cargo test -p premath-surreal trajectory, cargo test -p premath-cli harness_session_write_read_bootstrap_json_smoke, cargo test -p premath-cli harness_trajectory_append_and_query_json_smoke, python3 -m unittest tools/ci/test_harness_multithread_loop.py, mise run docs-coherence-check, mise run doctrine-check, mise run coherence-check.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T03:11:28.484909Z","updated_at":"2026-02-23T03:29:24.405694Z","closed_at":"2026-02-23T03:29:24.405698Z","ephemeral":false,"dependencies":[{"issue_id":"bd-198","depends_on_id":"bd-196","type":"blocks","created_by":"codex"}]}
{"id":"bd-199","title":"[Conformance] Add Grothendieck operationalization vectors (golden/adversarial/invariance)","description":"Add executable vectors for cover decomposition, overlap/glue-or-obstruction behavior, and Ev factorization failure classes; wire into baseline/coherence closure so §12 remains continuously enforced.","notes":"Added Grothendieck operationalization conformance vectors for gate_chain_parity evidence factorization: golden accept, adversarial missing_route/ambiguous_routes/unbound_binding rejects, and invariance local/external pair. Wired all vectors into coherence-site manifest (global list + obligationVectors.gate_chain_parity). Verified with mise run coherence-check, python3 tools/conformance/run_fixture_suites.py --suite coherence-contract, mise run docs-coherence-check, and mise run doctrine-check.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T03:11:28.498700Z","updated_at":"2026-02-23T03:32:55.963439Z","closed_at":"2026-02-23T03:32:55.963442Z","ephemeral":false,"dependencies":[{"issue_id":"bd-199","depends_on_id":"bd-197","type":"blocks","created_by":"codex"},{"issue_id":"bd-199","depends_on_id":"bd-198","type":"blocks","created_by":"codex"}]}
{"id":"bd-2","title":"Conformance: Capability Vector Gap Audit and Fixture Backfill","description":"Audit current capability vectors and fixture inventories for missing or weak coverage (including stub/invariance pairs). Propose and add concrete vectors/fixtures to close identified gaps.","notes":"Backfilled capability gap for change_morphisms lease lifecycle. Added conformance vectors for issue_lease_renew and issue_lease_release (golden + adversarial), added evaluator routes/failure classes in tools/conformance/run_capability_vectors.py, updated capability docs/decision log language, and validated via check_stub_invariance + run_capability_vectors + mise run conformance-run (cache hits observed).","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-21T21:41:39.730935Z","updated_at":"2026-02-22T01:30:03.491377Z","closed_at":"2026-02-22T01:30:03.491378Z","ephemeral":false,"dependencies":[{"issue_id":"bd-2","depends_on_id":"bd-1","type":"blocks"}]}
{"id":"bd-20","title":"[Hygiene] Add deterministic no-leak guard for private/local artifacts","description":"Add a repository hygiene check to fail when tracked/staged changes include private/local surfaces (e.g. .serena/, .claude/, .premath/cache/, ad-hoc temp artifacts) outside explicit allowlists, and wire into baseline/hook gate path.","notes":"Implemented deterministic repo hygiene guardrails and fail-closed projection hardening. Added tools/ci/check_repo_hygiene.py with forbidden private/local surfaces and required .gitignore entry checks; added unit tests (tools/ci/test_repo_hygiene.py); wired ci-hygiene-check into mise baseline and hk pre-commit fast steps; extended ci-pipeline-test to include hygiene tests. Hardened change projection so mixed known+unknown non-doc deltas fail closed to baseline, and added executable change_morphisms vector golden/mixed_known_unknown_surface_runs_baseline plus manifest/runner updates. Updated CI/conformance docs and AGENTS command surface references.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T00:46:25.846947Z","updated_at":"2026-02-22T00:54:17.788796Z","closed_at":"2026-02-22T00:54:17.788800Z","ephemeral":false,"dependencies":[{"issue_id":"bd-20","depends_on_id":"bd-19","type":"discovered-from"}]}
{"id":"bd-200","title":"[BD] Fix MCP issue_add issue_type persistence (epic/task mismatch)","description":"`issue_add` currently appears to ignore requested issue_type in some calls (e.g., epic persisted as task). Add deterministic test coverage and fix adapter/CLI mapping so issue types are preserved.","notes":"Fixed MCP issue_add snake_case compatibility for issue_type/instruction_id/issues_path by adding serde aliases in IssueAddTool. Added regression test commands::mcp_serve::tests::issue_add_accepts_snake_case_issue_type_and_issues_path covering issueType persistence and issuesPath override routing. Verified with cargo fmt --all and cargo test -p premath-cli issue_add_accepts_snake_case_issue_type_and_issues_path.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T03:12:05.828611Z","updated_at":"2026-02-23T03:35:38.388060Z","closed_at":"2026-02-23T03:35:38.388063Z","ephemeral":false}
{"id":"bd-201","title":"[Harness/CI] Enforce lineageRefs in harness stop-handoff conformance vectors","description":"Extend ci_harness_runtime vectors and evaluator to assert deterministic lineageRefs (ctx/cover/refinement) in stop/handoff session+trajectory projections.","notes":"Enforced harness lineage refs in ci_harness_runtime conformance evaluator: now validates bootstrap + trajectory lineageRefs presence, required kinds (ctx/cover/refinement), issue-id consistency, and bootstrap/trajectory parity. Updated harness vectors to carry deterministic lineage refs and added adversarial vector harness_stop_handoff_missing_lineage_ref_reject. Verified with python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses and python3 tools/conformance/check_stub_invariance.py.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T03:36:38.113147Z","updated_at":"2026-02-23T03:39:25.798797Z","closed_at":"2026-02-23T03:39:25.798802Z","ephemeral":false}
{"id":"bd-202","title":"[MCP] Add snake_case/camelCase compatibility aliases across issue/dep tool payloads","description":"Generalize serde alias compatibility beyond IssueAddTool so MCP payloads from snake_case clients map deterministically to camelCase fields.","notes":"Added snake_case compatibility aliases across issue/dep MCP payload structs (issue_* and dep_* tools, including lease/ttl/path/instruction and graph_scope/root_path aliases). Added regression tests: issue_add_accepts_snake_case_issue_type_and_issues_path, issue_claim_accepts_snake_case_lease_fields, dep_add_accepts_snake_case_payload_fields. Verified with cargo fmt --all and cargo test -p premath-cli snake_case.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T03:36:38.149466Z","updated_at":"2026-02-23T03:40:55.413004Z","closed_at":"2026-02-23T03:40:55.413011Z","ephemeral":false,"dependencies":[{"issue_id":"bd-202","depends_on_id":"bd-195","type":"relates-to"}]}
{"id":"bd-203","title":"[MCP] Add end-to-end parameter-shape parity test for issue_add via mcp-serve","description":"Add an e2e mcp-serve test case validating issueType/issue_type and issuesPath/issues_path parity with persisted issueType semantics.","notes":"Added mcp-serve parameter-shape parity regression test issue_add_call_tool_params_accepts_snake_and_camel_shapes. Test drives PremathTools::try_from(CallToolRequestParams) with both snake_case and camelCase argument keys and verifies persisted issueType + issuesPath parity. Verified with cargo fmt --all, cargo test -p premath-cli call_tool_params_accepts_snake_and_camel_shapes, and cargo test -p premath-cli snake_case.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-23T03:36:38.175995Z","updated_at":"2026-02-23T03:42:27.499794Z","closed_at":"2026-02-23T03:42:27.499797Z","ephemeral":false,"dependencies":[{"issue_id":"bd-203","depends_on_id":"bd-195","type":"relates-to"}]}
{"id":"bd-204","title":"[IssueGraph] Resolve historical full-graph cycle diagnostics (bd-99/100/102/104)","description":"Full-scope dep diagnostics currently reports a historical cycle: bd-100 -> bd-99 -> bd-102 -> bd-104 -> bd-100. Keep active-scope behavior unchanged while making full-scope diagnostics acyclic and replay-auditable.\n\nAcceptance:\n- dep diagnostics --graph-scope full reports hasCycle=false.\n- historical lineage intent for affected issues is preserved (no loss of useful provenance).\n- issue/dependency contract checks remain accepted.\n\nVerification commands:\n- cargo run --package premath-cli -- dep diagnostics --issues .premath/issues.jsonl --graph-scope active --json\n- cargo run --package premath-cli -- dep diagnostics --issues .premath/issues.jsonl --graph-scope full --json\n- cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json\n- python3 tools/ci/check_issue_graph.py","notes":"Resolved historical full-graph cycle diagnostics by pruning cycle-contributing provenance backlinks only (type=discovered-from) where a blocking return path existed. Applied targeted edge-removal cleanup across closed-history chains (including bd-99 lineage, bd-28 lineage, bd-116 lineage, bd-121 lineage, and bd-55 governance lineage), preserving blocking execution dependencies while removing cyclic historical backlinks. Post-cleanup integrity: dep diagnostics active/full both report hasCycle=false; issue graph checks remain accepted. Verification run 2026-02-23: cargo run --package premath-cli -- dep diagnostics --issues .premath/issues.jsonl --graph-scope active --json; cargo run --package premath-cli -- dep diagnostics --issues .premath/issues.jsonl --graph-scope full --json; cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json; python3 tools/ci/check_issue_graph.py.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T04:23:10.069112Z","updated_at":"2026-02-23T04:27:10.948543Z","closed_at":"2026-02-23T04:27:04.458063Z","ephemeral":false}
{"id":"bd-205","title":"[Ops/Docs] Replace SESSION-HANDOFF continuity path with harness-session contract","description":"Align operational continuity guidance with current draft/design authority after SESSION-HANDOFF removal.\n\nProblem:\n- .premath/OPERATIONS.md Session Continuity section still references .premath/SESSION-HANDOFF.md, which has been removed.\n- Draft/design surfaces already define .premath/harness_session.json plus harness-session read/write/bootstrap as canonical restart continuity substrate.\n\nAcceptance:\n- .premath/OPERATIONS.md Session Continuity section references .premath/harness_session.json and canonical CLI surfaces.\n- Stale references to .premath/SESSION-HANDOFF.md are removed from docs/ops guidance.\n- Continuity wording stays lane-consistent with docs/design/TUSK-HARNESS-SESSION.md and specs/premath/draft/HARNESS-RUNTIME.md.\n\nVerification commands:\n- rg -n \"SESSION-HANDOFF|harness_session.json\" .premath/OPERATIONS.md docs/design specs/premath/draft\n- mise run docs-coherence-check\n- cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json\n- python3 tools/ci/check_issue_graph.py","notes":"Completed continuity-path alignment after SESSION-HANDOFF removal. Updated .premath/OPERATIONS.md Session Continuity section to canonical harness-session substrate: .premath/harness_session.json plus harness-session read/write/bootstrap command surfaces. Verified no stale SESSION-HANDOFF references remain in ops/docs/spec surfaces scanned for continuity paths. Verification run 2026-02-23: rg -n \"SESSION-HANDOFF|harness_session.json\" .premath/OPERATIONS.md docs/design specs/premath/draft; mise run docs-coherence-check; cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json; python3 tools/ci/check_issue_graph.py.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T04:39:37.710713Z","updated_at":"2026-02-23T04:48:41.926857Z","closed_at":"2026-02-23T04:48:41.926860Z","ephemeral":false,"dependencies":[{"issue_id":"bd-205","depends_on_id":"bd-204","type":"discovered-from"}]}
{"id":"bd-206","title":"[Ops/Docs] Replace SESSION-HANDOFF continuity path with harness-session contract","description":"Align operational continuity guidance with current draft/design authority after SESSION-HANDOFF removal.\n\nProblem:\n- .premath/OPERATIONS.md Session Continuity section still references .premath/SESSION-HANDOFF.md, which has been removed.\n- Draft/design surfaces already define .premath/harness_session.json plus harness-session read/write/bootstrap as canonical restart continuity substrate.\n\nAcceptance:\n- .premath/OPERATIONS.md Session Continuity section references .premath/harness_session.json and canonical CLI surfaces.\n- Stale references to .premath/SESSION-HANDOFF.md are removed from docs/ops guidance.\n- Continuity wording stays lane-consistent with docs/design/TUSK-HARNESS-SESSION.md and specs/premath/draft/HARNESS-RUNTIME.md.\n\nVerification commands:\n- rg -n \"SESSION-HANDOFF|harness_session.json\" .premath/OPERATIONS.md docs/design specs/premath/draft\n- mise run docs-coherence-check\n- cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json\n- python3 tools/ci/check_issue_graph.py","notes":"Closed as accidental duplicate created during shell-quoting retry while opening bd-205. Canonical continuity-alignment slice is bd-205.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T04:39:48.532451Z","updated_at":"2026-02-23T04:40:14.223184Z","closed_at":"2026-02-23T04:40:14.223185Z","ephemeral":false,"dependencies":[{"issue_id":"bd-206","depends_on_id":"bd-204","type":"discovered-from"},{"issue_id":"bd-206","depends_on_id":"bd-205","type":"duplicates"}]}
{"id":"bd-207","title":"[Docs] Reconcile stale harness gap markers in TUSK-HARNESS-CONTRACT","description":"Reconcile stale harness design gap markers with current implemented/runtime-authority surfaces.\n\nContext:\n- docs/design/TUSK-HARNESS-CONTRACT.md §7 still marks `boot` memory roots as `partial`.\n- §8/§9 still list failure-class expansion as remaining, but failure taxonomy expansion + retry/escalation coverage was already delivered under bd-190.\n\nAcceptance:\n- Update docs/design/TUSK-HARNESS-CONTRACT.md mapping table/status markers to reflect current implemented surfaces (or explicitly bounded remaining deltas only).\n- Remove/replace stale remaining-gap bullets that are already closed by shipped work.\n- Keep wording lane-consistent with draft HARNESS-RUNTIME / HARNESS-RETRY-ESCALATION and current command surfaces.\n\nVerification commands:\n- rg -n \"partial|Gaps \\(remaining\\)|failure-class\" docs/design/TUSK-HARNESS-CONTRACT.md\n- mise run docs-coherence-check\n- cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json\n- python3 tools/ci/check_issue_graph.py","notes":"Reconciled stale harness gap markers in docs/design/TUSK-HARNESS-CONTRACT.md. Updated §7 mapping table boot-memory-roots row from partial to present with full canonical root set (.premath/issues.jsonl, .premath/harness_session.json, artifacts/ciwitness/*, artifacts/observation/latest.json, dep_diagnostics(active), mcp-serve). Replaced stale §8/§9 remaining-gap wording with current closure state: historical failure-taxonomy expansion + retry/escalation alignment tracked as closed under bd-190; deterministic issue-context bootstrap fallback path referenced as implemented in draft/HARNESS-RETRY-ESCALATION. Verification run 2026-02-23: rg -n \"partial|Gaps \\(remaining\\)|failure-class\" docs/design/TUSK-HARNESS-CONTRACT.md; mise run docs-coherence-check; cargo run --package premath-cli -- issue check --issues .premath/issues.jsonl --json; python3 tools/ci/check_issue_graph.py.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-23T04:52:07.570967Z","updated_at":"2026-02-23T04:54:05.221435Z","closed_at":"2026-02-23T04:54:05.221437Z","ephemeral":false}
{"id":"bd-21","title":"[Conformance] Add lease_id_mismatch adversarial vector for change_morphisms","description":"Backfill executable adversarial coverage for lease release id mismatch in capabilities.change_morphisms so CAPABILITY-VECTORS spec claims match conformance evidence. Add fixture(s), evaluator routing (if needed), and run conformance gates.","notes":"Added missing adversarial executable coverage for lease_id_mismatch under capabilities.change_morphisms. Added vector manifest entry and fixture pair (issue_lease_release_id_mismatch_reject), routed vector in run_capability_vectors dispatcher, and validated with check_stub_invariance + run_capability_vectors + mise run conformance-run (capabilities=8, vectors=92).","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T01:39:44.004450Z","updated_at":"2026-02-22T01:40:56.103671Z","closed_at":"2026-02-22T01:40:56.103673Z","ephemeral":false}
{"id":"bd-22","title":"[Docs Coherence] Resolve SPEC-INDEX normative vs informative scope contradiction","description":"Fix contradictory classification in specs/premath/draft/SPEC-INDEX.md where LLM/CI/SQUEAK capability docs are listed as normative when claimed and also listed as informative. Establish one authoritative rule: capability/profile docs are normative only when claimed; otherwise informative context. Update wording in sections 5.4/5.5 and confirm against CONFORMANCE/CAPABILITY-VECTORS.","notes":"Resolved normative-vs-informative contradiction in SPEC-INDEX by making conditional normativity explicit in §5.5 for LLM-INSTRUCTION-DOCTRINE, LLM-PROPOSAL-CHECKING, raw/SQUEAK-SITE, and raw/PREMATH-CI; clarified informative/default status unless claimed under §5.4/§5.6. Verified with check_spec_traceability and doctrine-check.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T01:45:43.967466Z","updated_at":"2026-02-22T01:56:07.981597Z","closed_at":"2026-02-22T01:56:07.981600Z","ephemeral":false}
{"id":"bd-23","title":"[Docs Coherence] Refresh CI closure architecture docs to match executable baseline","description":"Update docs/design/CI-CLOSURE.md and docs/design/ARCHITECTURE-MAP.md to reflect current baseline/CI chain in .mise.toml and tools/ci (traceability-check, doctrine-check + doctrine-inf vectors, pipeline/observation/instruction checks, fixture-suite conformance runner). Ensure docs explicitly treat .mise.toml + pipeline scripts as operational source of truth.","notes":"Updated docs/design/CI-CLOSURE.md and docs/design/ARCHITECTURE-MAP.md to match current executable baseline and CI entrypoints. Added explicit operational source-of-truth references (.mise.toml tasks + pipeline scripts), refreshed baseline closure description (traceability/doctrine/conformance-run + CI/control-plane checks), and included LLM-PROPOSAL-CHECKING in doctrine layer/path.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T01:45:48.825612Z","updated_at":"2026-02-22T01:57:10.718585Z","closed_at":"2026-02-22T01:57:10.718588Z","ephemeral":false}
{"id":"bd-24","title":"[Docs Coherence] Align README capability closure list with conformance set","description":"README baseline/conformance summary omits capabilities.adjoints_sites while run_capability_vectors and conformance docs include it. Update README capability closure list so documented gate scope matches executable conformance scope.","notes":"Aligned README baseline capability closure list with executable conformance capability set by adding capabilities.adjoints_sites. Verified parity against tools/conformance/README.md and run_capability_vectors capability registry.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T01:45:51.871031Z","updated_at":"2026-02-22T01:57:10.741864Z","closed_at":"2026-02-22T01:57:10.741867Z","ephemeral":false}
{"id":"bd-25","title":"[Docs Tooling] Add deterministic docs-coherence check for architecture surfaces","description":"Add a lightweight check that prevents drift between executable operational surfaces (.mise.toml, tools/ci/*, tools/conformance/*) and key docs (README, docs/design/CI-CLOSURE.md, docs/design/ARCHITECTURE-MAP.md, SPEC-INDEX normative scope statements). Start with critical invariants: capability list parity, baseline gate parity, and normative-vs-informative consistency for capability-scoped docs.","notes":"Implemented deterministic docs-coherence checker at tools/conformance/check_docs_coherence.py and wired mise task docs-coherence-check into baseline. Check enforces: executable capability parity (run_capability_vectors DEFAULT set vs README/tools-conformance/SPEC-INDEX §5.4 + fixture manifests), baseline task parity (.mise [tasks.baseline] vs docs/design/CI-CLOSURE baseline list), projected check parity (tools/ci/change_projection CHECK_ORDER vs CI-CLOSURE projected list), and SPEC-INDEX §5.4/§5.5 conditional normativity clauses for capability-scoped docs. Added parser unit tests tools/conformance/test_docs_coherence.py and included in ci-pipeline-test. Updated docs surfaces (README, CI-CLOSURE, ARCHITECTURE-MAP, tools/conformance/README, AGENTS). Verified with python3 tools/conformance/test_docs_coherence.py, python3 tools/conformance/check_docs_coherence.py, mise run docs-coherence-check, mise run traceability-check, mise run doctrine-check, mise run ci-pipeline-test, and full mise run baseline.","status":"closed","priority":3,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T01:45:56.590860Z","updated_at":"2026-02-22T02:10:37.189710Z","closed_at":"2026-02-22T02:10:37.189714Z","ephemeral":false,"dependencies":[{"issue_id":"bd-25","depends_on_id":"bd-22","type":"blocks"},{"issue_id":"bd-25","depends_on_id":"bd-23","type":"blocks"},{"issue_id":"bd-25","depends_on_id":"bd-24","type":"blocks"}]}
{"id":"bd-26","title":"[EPIC] premath-coherence: typed coherence contract + kernel-backed checker","description":"Define a first-class Premath coherence contract artifact and executable checker surface. Scope: (1) new spec draft/PREMATH-COHERENCE and machine artifact draft/COHERENCE-CONTRACT.json, (2) obligation compilation for scope_noncontradiction/capability_parity/gate_chain_parity/operation_reachability/overlay_traceability, (3) deterministic failure classes + witness schema, (4) implementation as kernel-backed checking adapter (new premath-coherence surface) without changing premath-kernel authority, (5) baseline integration and traceability row updates.","notes":"Implemented premath-coherence crate + coherence-check CLI, added coherence contract/spec/docs traceability, added baseline coherence gate, aligned conformance proposal canonicalization with instruction_proposal checker, tightened instruction envelope binding whitespace validation, added reject witness test coverage, and verified full baseline pass.","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","created_at":"2026-02-22T01:53:16.361383Z","updated_at":"2026-02-22T02:30:08.190370Z","closed_at":"2026-02-22T02:30:08.190373Z","ephemeral":false,"dependencies":[{"issue_id":"bd-26","depends_on_id":"bd-22","type":"blocks"},{"issue_id":"bd-26","depends_on_id":"bd-23","type":"blocks"},{"issue_id":"bd-26","depends_on_id":"bd-24","type":"blocks"}]}
{"id":"bd-27","title":"[Migration Plan] Python gate/check stack -> premath-coherence core (phased parity plan)","description":"Planning/phase-order issue for migration from Python check/gate semantics to premath-coherence core.\nScope:\n- define phased boundary and parity criteria,\n- define witness/projection equivalence contract,\n- define cutover strategy and rollback safety.\nExecution changes land in downstream implementation issues (e.g., bd-34).","notes":"Defined and landed the phased migration contract in `draft/PREMATH-COHERENCE` §10 covering: (1) authority boundary (Python as adapter only; semantics in `premath-coherence` core), (2) parity contract keys (`result`, `failureClasses`, bindings, check/projection digests, proposal identity refs), (3) phased cutover (`phase_0_inventory` -> `phase_4_deprecate_legacy`), and (4) rollback safety constraints (witness-first fail-closed path switching). Recorded Decision 0039. Verified with full `mise run baseline`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T01:53:21.042584Z","updated_at":"2026-02-22T03:47:34.881195Z","closed_at":"2026-02-22T03:47:34.881199Z","ephemeral":false,"dependencies":[{"issue_id":"bd-27","depends_on_id":"bd-26","type":"blocks"},{"issue_id":"bd-27","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-28","title":"[EPIC] Unification + Reduction: universal KCIR, coherent typing, and event-memory architecture","description":"North-star unification program:\n- one canonical semantic pipeline: instruction/proposal -> typing/checking -> obligations -> discharge -> witness\n- one canonical substrate for long-lived memory and projections\n- one canonical intermediate representation boundary (KCIR) to reduce duplicate encodings\nAcceptance:\n1) coherent architecture doc and issue graph exists,\n2) core subtasks implemented with deterministic witnesses/vectors,\n3) command surface remains doctrine-gated and fail-closed.","notes":"Closed as current unification/reduction execution chain is discharged.\n\nDelivered across linked subtasks:\n- single authority projection paths for observation/control-plane surfaces,\n- lane separation contract + executable lane ownership vectors,\n- span/square cross-lane witness routing,\n- drift-budget sentinel gate,\n- dependency graph maintenance semantics (remove/replace/cycle diagnostics + blocker-aware readiness),\n- schema lifecycle/deprecation contract with deterministic alias-window enforcement.\n\nValidation closure:\n- `mise run ci-pipeline-test` passed.\n- `mise run baseline` passed.\n\nRemaining open item is governance transition (`bd-67`), which is intentionally external to this architecture epic (depends on reviewer pool availability).","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","created_at":"2026-02-22T02:46:27.162673Z","updated_at":"2026-02-22T19:14:34.394265Z","closed_at":"2026-02-22T19:14:34.394267Z","ephemeral":false,"dependencies":[{"issue_id":"bd-28","depends_on_id":"bd-99","type":"blocks","created_by":"codex"}]}
{"id":"bd-29","title":"[Memory] Canonical append-only event substrate + deterministic projections","description":"Introduce canonical .premath/memory/events.jsonl as authoritative append-only substrate. Derive issues/observation/ci views through deterministic reducers.\nAcceptance:\n- event schema v1 documented,\n- projection reducers implemented and replay-stable,\n- .premath/issues.jsonl treated as projection or explicitly synchronized view.","notes":"Completed canonical event-memory projection loop at CLI surface: added deterministic replay path `premath issue replay-events` (issue.event.v1 -> issues snapshot), with equivalence reporting to existing snapshots. Combined with prior `issue migrate-events`, issue memory now has deterministic snapshot<->event projection commands and smoke coverage for idempotent replay.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-22T02:46:34.700689Z","updated_at":"2026-02-22T03:19:14.153179Z","closed_at":"2026-02-22T03:19:14.153181Z","ephemeral":false,"dependencies":[{"issue_id":"bd-29","depends_on_id":"bd-28","type":"discovered-from"},{"issue_id":"bd-29","depends_on_id":"bd-40","type":"discovered-from"}]}
{"id":"bd-3","title":"Conformance: Doctrine-Site Coverage and Reachability Verification","description":"Review doctrine declarations and operation-site reachability checks to ensure doctrine-site coverage is complete and enforceable. Add missing declarations/tests where gaps are found.","notes":"Completed doctrine-site coverage/reachability verification. Audited doctrine-check pipeline and identified missing operation-site coverage for tools/conformance/run_doctrine_inf_vectors.py. Added op/conformance.doctrine_inf node + cover.ci membership + e.ci.op.doctrine_inf edge in DOCTRINE-SITE.json, updated DOCTRINE-SITE.md repository note, and added Decision 0028. Validated with mise run doctrine-check (nodes=20, edges=25, operations=8).","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-21T21:41:39.749635Z","updated_at":"2026-02-22T01:36:07.733676Z","closed_at":"2026-02-22T01:36:07.733677Z","ephemeral":false,"dependencies":[{"issue_id":"bd-3","depends_on_id":"bd-2","type":"blocks"}]}
{"id":"bd-30","title":"[Memory] Replay invariance + cache for event reducers and fixture pipelines","description":"Add replay invariance checks and content-addressed caching for memory/coherence reducers and fixture execution.\nAcceptance:\n- same input event stream yields identical projections,\n- cache keys bound to deterministic digests,\n- conformance vectors include reducer invariance adversarial/golden cases.","notes":"Implemented deterministic replay-cache binding for issue.event.v1 projections. Added event/snapshot refs (ev1_/iss1_), replay cache metadata and cache-hit short-circuit in the issue replay-events command, replay smoke coverage for cache-hit behavior, and executable change_morphisms vectors (golden/adversarial/invariance) for replay-cache determinism and ref-mismatch rejection. Baseline gate passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T02:46:34.724826Z","updated_at":"2026-02-22T03:29:42.324363Z","closed_at":"2026-02-22T03:29:37.156036Z","ephemeral":false,"dependencies":[{"issue_id":"bd-30","depends_on_id":"bd-29","type":"blocks"},{"issue_id":"bd-30","depends_on_id":"bd-28","type":"discovered-from"},{"issue_id":"bd-30","depends_on_id":"bd-40","type":"discovered-from"}]}
{"id":"bd-31","title":"[KCIR] Universalize KCIR as semantic IR for instruction/proposal/coherence boundaries","description":"Define and implement KCIR boundary so instruction proposals, checker obligations, and coherence evidence share one IR contract.\nAcceptance:\n- IR mapping spec for instruction/proposal -> KCIR forms,\n- deterministic witness lineage through KCIR refs,\n- removal/deprecation plan for duplicate non-KCIR semantic encodings.","notes":"Closed via shared KCIR-bound proposal identity authority path: added `validate_proposal_payload(...)` in `tools/ci/instruction_proposal.py` and routed capability instruction/adjoints proposal checks through it (removed duplicate declared digest/KCIR ref validation logic). Added `tools/ci/test_instruction_proposal.py` and wired it into `mise run ci-pipeline-test`. Added explicit KCIR proposal projection/deprecation contract in `draft/UNIFICATION-DOCTRINE` (§8) and `draft/LLM-PROPOSAL-CHECKING` (§5.1/§5.2), recorded in Decision 0042. Baseline + conformance-run pass.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-22T02:46:34.802536Z","updated_at":"2026-02-22T04:04:45.092626Z","closed_at":"2026-02-22T04:04:45.092628Z","ephemeral":false,"dependencies":[{"issue_id":"bd-31","depends_on_id":"bd-29","type":"blocks"},{"issue_id":"bd-31","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-32","title":"[Typechecker] Compile typing judgments into coherence obligations/discharge","description":"Deeply integrate typechecker with coherence by compiling typing judgments into obligation sets and deterministic discharge witnesses, rather than parallel verdict paths.\nAcceptance:\n- explicit typed judgment -> obligation compilation contract,\n- shared failure class map with bidir/Gate,\n- checker outputs authoritative typed witness artifacts.","notes":"Closed: typed proposal judgments now compile to deterministic obligation/discharge artifacts on the authoritative checker path and are emitted in instruction witnesses (`proposalIngest.obligations` + `proposalIngest.discharge`). Shared failure-class mapping remains centralized in `tools/ci/instruction_proposal.py` (`OBLIGATION_TO_GATE_FAILURE`, `GATE_FAILURE_TO_LAW_REF`), and this pass removed duplicate proposal identity validation by routing conformance instruction/adjoints proposal checks through `validate_proposal_payload(...)`. Added dedicated validator tests (`tools/ci/test_instruction_proposal.py`) and baseline-gated execution via `ci-pipeline-test`; docs tightened in `draft/LLM-PROPOSAL-CHECKING` and `draft/UNIFICATION-DOCTRINE`.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-22T02:46:42.961921Z","updated_at":"2026-02-22T04:05:46.056300Z","closed_at":"2026-02-22T04:05:46.056303Z","ephemeral":false,"dependencies":[{"issue_id":"bd-32","depends_on_id":"bd-31","type":"blocks"},{"issue_id":"bd-32","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-33","title":"[Conformance] Add coherence-contract capability vectors and cross-surface parity checks","description":"Unify coherence and conformance by making coherence-contract checks a first-class executable capability with golden/adversarial/invariance vectors.\nAcceptance:\n- capability fixture suite added,\n- vectors assert parity across docs/code/checker surfaces,\n- included in baseline and hook gates with cache-aware execution.","notes":"Closed after completion of coherence-contract executable parity program.\n\nDelivered slices:\n- `bd-52`: integrated `coherence-contract` into cached fixture-suite runner with deterministic KCIR-style cache refs.\n- CI wrapper parity hardening: added `tools/ci/test_client_transport_parity.py` and wired into `ci-pipeline-test`.\n- `bd-80`: introduced `span_square_commutation` obligation, checker hook, draft spec (`SPAN-SQUARE-CHECKING`), and initial golden/adversarial vectors.\n- `bd-81`: extended span/square vectors with invariance + digest-mismatch adversarial coverage.\n- `bd-82`: enforced per-obligation site vector polarity coverage (`golden/` + `adversarial/`) with deterministic checker failures and unit tests.\n\nContract/doc integration:\n- `COHERENCE-CONTRACT.json`, `PREMATH-COHERENCE.md`, `SPEC-INDEX.md`, `SPEC-TRACEABILITY.md`, `UNIFICATION-DOCTRINE.md`, and decision log entries 0075–0077 updated.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache`\n- `mise run ci-pipeline-test`\n- `python3 tools/conformance/check_spec_traceability.py`\n\nAcceptance criteria satisfied: coherence-contract vectors are first-class executable capability surfaces, parity checks span docs/code/checker layers, and execution is baseline-gated with deterministic cache-aware suite planning.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-22T02:46:42.974344Z","updated_at":"2026-02-22T10:27:19.755634Z","closed_at":"2026-02-22T10:27:19.755636Z","ephemeral":false,"dependencies":[{"issue_id":"bd-33","depends_on_id":"bd-32","type":"blocks"},{"issue_id":"bd-33","depends_on_id":"bd-34","type":"blocks"},{"issue_id":"bd-33","depends_on_id":"bd-28","type":"discovered-from"},{"issue_id":"bd-33","depends_on_id":"bd-68","type":"blocks","created_by":"codex"}]}
{"id":"bd-34","title":"[Migration Execution] Move Python checker/gate semantics into premath-coherence core (thin wrappers only)","description":"Implementation issue executing the bd-27 migration plan.\nScope:\n- move semantic/check kernels into Rust core,\n- retain Python/provider scripts as thin wrappers,\n- prove deterministic parity before deprecating duplicate Python logic.","notes":"Completed.\n\nCompact provenance summary:\n- Migration executed in slices: moved required/instruction control-plane verification/decision/projection semantics into core Rust surfaces (`premath-coherence` + `premath-cli`) and reduced Python paths to thin wrappers.\n- Authority path consolidated around core commands (`required-*`, `instruction-*`, `coherence-check`) with deterministic witness parity.\n- Key governance anchors: Decision 0059 (required witness verification core move), Decision 0062 (required decision verification core move), then later unification hardening decisions (0091-0094).\n- Result: wrapper orchestration remains, semantic/checking authority centralized in core.\n\nValidation path used repeatedly during slices:\n- `cargo test -p premath-coherence`\n- `cargo test -p premath-cli`\n- `mise run ci-pipeline-test`\n- `mise run baseline`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T02:46:42.984607Z","updated_at":"2026-02-22T21:54:45.472391Z","closed_at":"2026-02-22T09:53:13.770295Z","ephemeral":false,"dependencies":[{"issue_id":"bd-34","depends_on_id":"bd-32","type":"blocks"},{"issue_id":"bd-34","depends_on_id":"bd-27","type":"blocks"},{"issue_id":"bd-34","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-35","title":"[Spec] Unification doctrine for minimum encoding with maximum expressiveness","description":"Author a compact architectural doctrine that formalizes unification/reduction constraints:\n- single authority boundary (checker+witness),\n- minimal encodings with maximal semantic expressiveness,\n- explicit anti-duplication rules for canonicalization/typing/discharge surfaces.\nAcceptance:\n- normative spec section added,\n- traceability + conformance hooks added,\n- design checklist applied to active migration issues.","notes":"Added draft/UNIFICATION-DOCTRINE as the architecture rule for minimum encoding with maximum expressiveness (single canonical authority encoding + deterministic projections). Wired into SPEC-INDEX and draft README, added traceability matrix row (instrumented), and recorded Decision 0036. Baseline/traceability/docs-coherence/coherence checks pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T02:46:46.740673Z","updated_at":"2026-02-22T03:40:02.287988Z","closed_at":"2026-02-22T03:40:02.287990Z","ephemeral":false,"dependencies":[{"issue_id":"bd-35","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-36","title":"[Milestone M1] Real backend profile + reference verifier implementation","description":"Track and execute Decision 0001 M1 milestone explicitly: implement at least one real backend profile and reference verifier path (project_ref/verify_ref) with deterministic normalization and Gate obligation discharge.\nAcceptance:\n- one non-toy backend profile implemented,\n- interop-full vectors pass against that profile,\n- witness parity and determinism documented.","notes":"Implemented real profile-backed ref verifier surface and bound interop vectors to canonical CLI path.\n\nShipped:\n- Added profile artifact policies/ref/sha256_detached_v1.json (premath.ref_profile.v1).\n- Added premath-cli commands: `ref project` and `ref verify` with deterministic failure classes.\n- Added CLI smoke tests for both commands.\n- Updated interop-core ref fixtures to use profilePath + pinned profile fields.\n- Updated tools/conformance/run_interop_core_vectors.py to invoke `premath ref project/verify` (no Python digest shim).\n- Updated docs (AGENTS.md command surface, tools/conformance/README) and decision log (Decision 0054).\n\nValidation:\n- cargo test -p premath-cli (pass)\n- python3 tools/conformance/run_interop_core_vectors.py (pass)\n- mise run baseline (pass; includes conformance-run cache summary and full CI/check surface)","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T02:54:04.919869Z","updated_at":"2026-02-22T07:41:32.326939Z","closed_at":"2026-02-22T07:41:32.326942Z","ephemeral":false,"dependencies":[{"issue_id":"bd-36","depends_on_id":"bd-28","type":"discovered-from"},{"issue_id":"bd-36","depends_on_id":"bd-31","type":"blocks"},{"issue_id":"bd-36","depends_on_id":"bd-38","type":"blocks"}]}
{"id":"bd-37","title":"[Docs] Refresh ROADMAP or deprecate in favor of issue graph + decision log","description":"Resolve roadmap drift in specs/premath/raw/ROADMAP.md by either updating phases to current architecture state (coherence v1, observation, unification/reduction) or deprecating with explicit pointer to active issue graph + decision log as authoritative roadmap.\nAcceptance:\n- roadmap state no longer stale,\n- authoritative planning source is explicit,\n- docs coherence checks cover the chosen source.","notes":"Resolved roadmap drift by deprecating raw/ROADMAP as execution authority and explicitly binding planning authority to `.premath/issues.jsonl` + `specs/process/decision-log.md`. Added docs-coherence invariant in `tools/conformance/check_docs_coherence.py` (ROADMAP authority markers required), added unit coverage in `tools/conformance/test_docs_coherence.py`, and recorded Decision 0037. Verified with `mise run docs-coherence-check` and full `mise run baseline`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T02:54:04.928873Z","updated_at":"2026-02-22T03:43:49.415074Z","closed_at":"2026-02-22T03:43:49.415077Z","ephemeral":false,"dependencies":[{"issue_id":"bd-37","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-38","title":"[Lifecycle] NORMALIZER status alignment (promote to draft or codify raw rationale)","description":"Resolve lifecycle inconsistency where raw/NORMALIZER is normative for Interop Full claims. Decide and implement one path:\nA) promote NORMALIZER to draft with traceability/conformance updates, or\nB) retain raw with explicit rationale + stability policy in SPEC-INDEX/decision-log.\nAcceptance:\n- lifecycle decision recorded,\n- SPEC-INDEX and traceability consistent,\n- conformance references aligned.","notes":"Promoted NORMALIZER from raw to draft lifecycle (moved to specs/premath/draft/NORMALIZER.md, status= draft), rewired Interop Full and cross-spec references to draft/NORMALIZER, and added NORMALIZER.md to SPEC-TRACEABILITY with executable coverage mapping. Baseline and traceability checks pass (draftSpecs=22, matrixRows=22).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-22T02:54:04.939724Z","updated_at":"2026-02-22T03:33:24.487751Z","closed_at":"2026-02-22T03:33:24.487752Z","ephemeral":false,"dependencies":[{"issue_id":"bd-38","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-39","title":"[Lifecycle] Optional capability raw-spec promotion policy (SQUEAK-SITE, TUSK-CORE)","description":"Define lifecycle policy for optional capability specs currently in raw status but actively exercised by conformance claims.\nScope:\n- raw/SQUEAK-SITE\n- raw/TUSK-CORE\nAcceptance:\n- explicit promote/retain criteria,\n- issue-backed promotion queue where applicable,\n- SPEC-INDEX wording aligned with policy.","notes":"Defined explicit optional raw capability-spec lifecycle policy in `draft/SPEC-INDEX` §5.5 (retain-vs-promote criteria + capability-scoped normative boundary). Added issue-backed promotion queue entries `bd-44` (raw/SQUEAK-SITE) and `bd-45` (raw/TUSK-CORE) with dependency edges into bd-39/bd-28. Added docs-coherence enforcement for raw lifecycle policy markers and roadmap authority markers in `tools/conformance/check_docs_coherence.py`, expanded parser tests, and recorded Decision 0038. Verified with `mise run docs-coherence-check` and full `mise run baseline`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T02:54:12.117121Z","updated_at":"2026-02-22T03:45:33.213115Z","closed_at":"2026-02-22T03:45:33.213117Z","ephemeral":false,"dependencies":[{"issue_id":"bd-39","depends_on_id":"bd-28","type":"discovered-from"},{"issue_id":"bd-39","depends_on_id":"bd-37","type":"blocks"}]}
{"id":"bd-4","title":"[EPIC] Coherence v1: Instruction-Governed Multiagent Control Plane","description":"Consolidate issue memory, instruction envelopes, policy/capability boundaries, and checker-discharge outputs into one auditable control plane where agents propose and the checker decides.","notes":"Coherence v1 epic closed after bd-10 completion. Completed stack: policy artifact registry, proposal->obligations->discharge witness surface, pre-execution reject witnesses, capability-gated mutation policy, multiagent claim/lease protocol, adjoints/sites capability vectors, and observation coherence dashboard + attention projections.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-21T23:06:40.461429Z","updated_at":"2026-02-22T01:24:24.967995Z","closed_at":"2026-02-22T01:24:24.967997Z","ephemeral":false}
{"id":"bd-40","title":"[EPIC] Issue System v2: deterministic task memory, workflows, and multiagent orchestration","description":"Upgrade the issue system into a first-class deterministic control substrate (not just a backlog list).\nScope:\n- unify issue state with append-only event memory and projection reducers,\n- enrich dependency semantics (blocks/conditional/waits-for/parental views) without ambiguity,\n- integrate claim/lease lifecycles and contention/staleness handling as first-class typed transitions,\n- support workflow views (execution graph, GTD/task modes) as derived projections,\n- bind issue mutations to instruction/witness authority boundaries.\nAcceptance:\n1) v2 issue-memory spec + migration strategy,\n2) deterministic reducers + invariance vectors,\n3) doctrine-gated mutation surface with typed witnesses,\n4) observation projections for orchestration health and flow coherence.","notes":"Issue System v2 acceptance is satisfied on one canonical substrate with deterministic projections:\n1) v2 issue-memory spec + migration strategy: implemented `issue.event.v1` migration/replay boundaries (`premath issue migrate-events`, `premath issue replay-events`) with deterministic refs/cache semantics (bd-41, bd-29, bd-30; Decisions 0030/0032/0033).\n2) deterministic reducers + invariance vectors: event replay equivalence, cache invariance, dependency projection views, and change_morphisms vectors are executable and baseline-gated.\n3) doctrine-gated mutation surface with typed witnesses: issue/dep mutations are instruction-linked capability-gated with deterministic reject/accept witness behavior.\n4) orchestration health projections: claim/lease state machine + stale/contention projections are implemented and exposed via observation/issue projection surfaces (bd-43 and coherence/observation checks).\nThe epic remains discovered-from bd-28 as part of the broader unification program, but Issue System v2 scope itself is complete.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-22T02:56:05.223559Z","updated_at":"2026-02-22T03:48:31.661357Z","closed_at":"2026-02-22T03:48:31.661360Z","ephemeral":false,"dependencies":[{"issue_id":"bd-40","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-41","title":"[Issue v2] Event schema v1 + migration from issues JSONL","description":"Define canonical issue-memory event schema (`issue.event.v1`) and migration path from `.premath/issues.jsonl` snapshots to append-only events.\nAcceptance:\n- schema + invariants documented,\n- deterministic migration tool emits identical logical issue state after replay,\n- backfill/provenance fields preserved (created/updated/closed/dependency mutations).","notes":"Implemented issue.event.v1 in premath-bd with deterministic migration from snapshot JSONL, event JSONL read/write, replay, deferred dependency resolution, and replay equivalence check. Added CLI subcommand `premath issue migrate-events` with replay verification and JSON output. Added unit tests in premath-bd and CLI smoke test. Verified with `cargo test -p premath-bd` and `cargo test -p premath-cli`.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T02:56:53.018386Z","updated_at":"2026-02-22T03:03:26.850681Z","closed_at":"2026-02-22T03:03:26.850683Z","ephemeral":false,"dependencies":[{"issue_id":"bd-41","depends_on_id":"bd-40","type":"discovered-from"}]}
{"id":"bd-42","title":"[Issue v2] Dependency semantics v2 + projection views (execution/GTD/groupoid)","description":"Refine dependency model semantics and expose multiple deterministic projections over one substrate.\nScope:\n- clarify semantics for blocks/conditional-blocks/waits-for/parent-child/discovered-from,\n- add projection views for execution readiness, GTD-style workflow buckets, and higher-order relation views.\nAcceptance:\n- semantics spec + compatibility rules,\n- deterministic projection reducers,\n- conformance vectors for semantic invariance and edge-case conflict handling.","notes":"Implemented dependency semantics v2 projections with minimal encoding: canonical DepType retained; added DependencyView (execution/gtd/groupoid), deterministic role mapping, and projection rows in premath-bd. Added CLI subcommand `premath dep project --view <execution|gtd|groupoid>`. Added unit tests for view role mapping and CLI smoke coverage for dep project views. Verified with `cargo test -p premath-bd` and `cargo test -p premath-cli`.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T02:56:53.110400Z","updated_at":"2026-02-22T03:05:01.705433Z","closed_at":"2026-02-22T03:05:01.705436Z","ephemeral":false,"dependencies":[{"issue_id":"bd-42","depends_on_id":"bd-40","type":"discovered-from"},{"issue_id":"bd-42","depends_on_id":"bd-41","type":"blocks"}]}
{"id":"bd-43","title":"[Issue v2] Lease/workflow state machine + orchestration invariance vectors","description":"Formalize issue mutation lifecycle as a typed state machine and prove deterministic orchestration behavior under contention.\nScope:\n- claim/renew/release transitions + failure-class mapping,\n- stale/contended lease projections and repair semantics,\n- witness-linked mutation authorization contract.\nAcceptance:\n- state-machine spec + implementation,\n- adversarial vectors for contention/stale/owner-mismatch/id-mismatch,\n- observation projections expose orchestration health deterministically.","notes":"Implemented lease/workflow state-machine coherence tightening across runtime + vectors: (1) added MCP tests for stale-lease reclaim reassignment and explicit invalid TTL/expiry rejection; (2) aligned change_morphisms conformance evaluator with runtime lease semantics (stale reclaim, lease binding ambiguity, TTL range, future expiry checks, runtime lease-id tokenization); (3) added new vectors for stale reclaim golden path and invalid claim expiry/ttl adversarial paths. Verified via `python3 tools/conformance/run_capability_vectors.py --capability capabilities.change_morphisms` and `cargo test -p premath-cli`.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-22T02:56:53.132249Z","updated_at":"2026-02-22T03:16:59.289744Z","closed_at":"2026-02-22T03:16:59.289764Z","ephemeral":false,"dependencies":[{"issue_id":"bd-43","depends_on_id":"bd-40","type":"discovered-from"},{"issue_id":"bd-43","depends_on_id":"bd-41","type":"blocks"}]}
{"id":"bd-44","title":"[Lifecycle Queue] raw/SQUEAK-SITE promotion readiness gate","description":"Prepare and decide lifecycle path for raw/SQUEAK-SITE under the new optional raw capability promotion policy.\nAcceptance:\n- map every claimed site law boundary to deterministic capability vectors,\n- verify deterministic witness/failure-class mapping across instruction/CI/runtime surfaces,\n- either promote to draft with traceability updates or record explicit raw-retain rationale in decision log.","notes":"Completed SQUEAK-SITE promotion-readiness gate and selected raw-retain lifecycle path.\nDelivered:\n- Added missing adversarial law-boundary coverage for `site_glue_missing` via new vector `adversarial/site_glue_missing_reject` (manifest + fixture pair + evaluator routing in `run_capability_vectors.py`).\n- Updated `draft/CAPABILITY-VECTORS` §2.8 required-when-claimed list to include `site_glue_missing` deterministic rejection.\n- Added explicit law-boundary -> executable vector mapping section in `raw/SQUEAK-SITE` covering descriptor determinism, overlap agreement/mismatch, glue missing/non-contractible, capability claim gating, and profile invariance.\n- Recorded lifecycle decision to retain `raw/SQUEAK-SITE` for now with tightened capability-scoped deterministic boundaries (Decision 0040).\nValidation: `python3 tools/conformance/check_stub_invariance.py`, `python3 tools/conformance/run_capability_vectors.py --capability capabilities.squeak_site`, and full `mise run baseline` all pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T03:44:50.978325Z","updated_at":"2026-02-22T03:50:49.850384Z","closed_at":"2026-02-22T03:50:49.850388Z","ephemeral":false,"dependencies":[{"issue_id":"bd-44","depends_on_id":"bd-39","type":"discovered-from"},{"issue_id":"bd-44","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-45","title":"[Lifecycle Queue] raw/TUSK-CORE promotion readiness gate","description":"Prepare and decide lifecycle path for raw/TUSK-CORE under the new optional raw capability promotion policy.\nAcceptance:\n- define capability-scoped normative boundary for tusk runtime contracts,\n- add deterministic vectors and witness/failure mappings for that boundary,\n- either promote to draft with traceability updates or record explicit raw-retain rationale in decision log.","notes":"Completed TUSK-CORE promotion-readiness gate and selected raw-retain lifecycle path.\nDelivered:\n- Added dedicated deterministic fixture suite `tusk-core` (`tests/conformance/fixtures/tusk-core`) with executable runner `tools/conformance/run_tusk_core_vectors.py` and integrated it into cached `conformance-run` (`run_fixture_suites.py`).\n- Added explicit boundary vectors for accepted + mapped failure outcomes:\n  - no locals -> `locality_failure` (`GATE-3.2`),\n  - multi-local missing compat -> `locality_failure` (`GATE-3.2`),\n  - no glue proposals -> `descent_failure` (`GATE-3.3`),\n  - missing mode binding -> `descent_failure` (`GATE-3.3`),\n  - multi-proposal ambiguity -> `glue_non_contractible` (`GATE-3.4`).\n- Added `raw/TUSK-CORE` conformance mapping section tying runtime clauses to concrete vectors and Gate-class/lawRef evidence.\n- Updated lifecycle policy queue note in `draft/SPEC-INDEX` and recorded raw-retain rationale as Decision 0041.\nValidation: `python3 tools/conformance/run_tusk_core_vectors.py`, `python3 tools/conformance/run_fixture_suites.py`, and full `mise run baseline` pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T03:44:50.990135Z","updated_at":"2026-02-22T03:59:04.143449Z","closed_at":"2026-02-22T03:59:04.143452Z","ephemeral":false,"dependencies":[{"issue_id":"bd-45","depends_on_id":"bd-39","type":"discovered-from"},{"issue_id":"bd-45","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-46","title":"[Migration Follow-up] Route capability proposal vector evaluation through core proposal-check parity path","description":"Continue bd-34 migration by removing remaining Python-local proposal semantic authority in capability vector evaluators (instruction_typing/adjoints_sites proposal checks) and routing them through the same core-backed proposal checker path used by run_instruction.\nAcceptance:\n- vector evaluator uses core-backed proposal-check API/command for canonicalize + obligations + discharge,\n- deterministic parity vs current fixtures preserved,\n- no duplicated proposal compile/discharge semantics remain in tools/conformance for these paths.","notes":"Completed: routed capability proposal vector evaluation through core premath proposal-check path via shared tools/ci/proposal_check_client.py; removed Python-side proposal compile/discharge authority from conformance evaluator; verified with ci-pipeline-test + conformance-run + baseline.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T04:19:36.642930Z","updated_at":"2026-02-22T04:25:04.577933Z","closed_at":"2026-02-22T04:25:04.577935Z","ephemeral":false,"dependencies":[{"issue_id":"bd-46","depends_on_id":"bd-34","type":"discovered-from"}]}
{"id":"bd-47","title":"[Migration Follow-up] Retire legacy Python proposal semantic shim","description":"`tools/ci/instruction_proposal.py` still carries Python-local canonicalize/digest/obligation/discharge semantics that are no longer authoritative after core cutover. Minimize encoding by reducing this surface to extraction-only (or removing it), update tests accordingly, and enforce core proposal-check as single semantic authority.","notes":"Completed: moved scope_noncontradiction bidir checker map introspection to core-owned source (`crates/premath-coherence/src/proposal.rs`) via COHERENCE-CONTRACT update; added core `OBLIGATION_TO_GATE_FAILURE` constant and parser support for Rust tuple map form; removed map shim from `tools/ci/instruction_proposal.py`. Verified with cargo test -p premath-coherence, ci-pipeline-test, and full baseline.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T04:30:36.458385Z","updated_at":"2026-02-22T04:39:05.967687Z","closed_at":"2026-02-22T04:39:05.967689Z","ephemeral":false,"dependencies":[{"issue_id":"bd-47","depends_on_id":"bd-34","type":"blocks"},{"issue_id":"bd-47","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-48","title":"[Conformance Cache Parity] Include doctrine-inf fixtures in cached suite runner + hook path","description":"Close fixture coverage drift by executing doctrine-inf vectors through `tools/conformance/run_fixture_suites.py` (KCIR cache path) instead of only uncached standalone invocation.\nAcceptance:\n- add doctrine-inf suite to cached fixture runner,\n- keep doctrine site structural check as separate fast invariant,\n- baseline/hook path still executes doctrine-inf semantics with deterministic cache-aware behavior,\n- docs updated so executable fixture surfaces are coherent.","notes":"Completed doctrine-inf cache parity slice.\nDelivered:\n- Added `doctrine-inf` suite to `tools/conformance/run_fixture_suites.py` so doctrine-inf fixtures execute on the KCIR-style cache path (`kcir.cache.fixture-suite.v1`).\n- Updated conformance fixture docs to reflect doctrine-inf as executable and included in the cached multi-suite surface.\nValidation:\n- `python3 tools/conformance/run_fixture_suites.py --suite doctrine-inf --no-cache`\n- `mise run conformance-run`\n- `python3 tools/conformance/check_docs_coherence.py`\n- `mise run doctrine-check`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T04:43:22.230306Z","updated_at":"2026-02-22T04:44:19.658617Z","closed_at":"2026-02-22T04:44:19.658620Z","ephemeral":false,"dependencies":[{"issue_id":"bd-48","depends_on_id":"bd-19","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-48","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-49","title":"[Command Surface Reduction] Route doctrine-check doctrine-inf execution through cached fixture-suite runner","description":"Preserve doctrine-check semantics while eliminating duplicate doctrine-inf execution surfaces.\nAcceptance:\n- doctrine-check keeps doctrine-site structural check,\n- doctrine-inf execution in doctrine-check runs via `tools/conformance/run_fixture_suites.py --suite doctrine-inf` (shared cache path),\n- conformance-run reuses the same suite path and hits cache,\n- issue/docs notes updated for coherent command surface intent.","notes":"Completed command-surface reduction for doctrine-inf execution.\nDelivered:\n- `mise run doctrine-check` now executes doctrine-inf vectors through the shared cached suite runner (`python3 tools/conformance/run_fixture_suites.py --suite doctrine-inf`) instead of a separate direct script path.\n- Preserved doctrine-check intent (site structural coherence + doctrine-inf semantics) while unifying execution on one cache-aware evaluator surface.\n- Added docs/tooling coherence invariant in `tools/conformance/check_docs_coherence.py` to pin the doctrine-check command surface to this unified path, plus parser test coverage in `tools/conformance/test_docs_coherence.py`.\nValidation:\n- `mise run doctrine-check`\n- `mise run conformance-run`\n- `mise run ci-command-surface-check`\n- `python3 tools/conformance/check_docs_coherence.py`\n- `mise run ci-pipeline-test`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T04:46:34.992053Z","updated_at":"2026-02-22T04:47:57.248095Z","closed_at":"2026-02-22T04:46:55.944115Z","ephemeral":false,"dependencies":[{"issue_id":"bd-49","depends_on_id":"bd-48","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-49","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-5","title":"[Coherence v1] Policy Artifact Registry + Digest Verification","description":"Replace hardcoded instruction check allowlists with canonical policy artifacts (JSON) whose content hash equals policyDigest. Checker/runner must resolve policy by digest and reject unknown or mismatched policies fail-closed.","notes":"Completed. Replaced hardcoded instruction policy allowlist with canonical policy artifact registry under policies/instruction/*.json. Enforced policyDigest as canonical pol1 digest, validated artifact digest integrity, validated requestedChecks allowlist and normalizer allowlist, updated instruction/conformance fixtures to digest policy bindings, and passed full baseline.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-21T23:06:48.462046Z","updated_at":"2026-02-21T23:26:34.442335Z","closed_at":"2026-02-21T23:26:34.442336Z","ephemeral":false,"dependencies":[{"issue_id":"bd-5","depends_on_id":"bd-4","type":"discovered-from"}]}
{"id":"bd-50","title":"[Migration Follow-up] Retire Python instruction_policy shim and align tests to core instruction-check","description":"Now that instruction envelope policy/normalizer validation is core-owned (`premath instruction-check`) across runtime, MCP, and capability vectors, remove residual Python `tools/ci/instruction_policy.py` semantic authority and replace/realign remaining tests/docs to assert core behavior only.\nAcceptance:\n- no production/conformance path imports `instruction_policy`,\n- CI tests cover policy/allowlist failures via core instruction-check client/CLI,\n- docs no longer present instruction_policy as an authority boundary.","notes":"Completed retirement of legacy Python instruction-policy shim.\n\nShipped:\n- Removed `tools/ci/instruction_policy.py` (legacy duplicate semantic authority).\n- Removed `tools/ci/test_instruction_policy.py`.\n- Updated `mise` pipeline test surface to drop removed test (`.mise.toml`).\n- Updated spec traceability mapping for `draft/LLM-PROPOSAL-CHECKING` to core-backed tests:\n  - `tools/ci/test_instruction_check_client.py`\n  - `tools/ci/test_instruction_reject_witness.py`\n- Recorded boundary decision in `specs/process/decision-log.md` (Decision 0055).\n\nValidation:\n- `mise run ci-pipeline-test` (pass)\n- `python3 tools/conformance/check_spec_traceability.py` (pass)\n- `mise run baseline` (pass)","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:04:28.668061Z","updated_at":"2026-02-22T07:47:54.290722Z","closed_at":"2026-02-22T07:47:54.290725Z","ephemeral":false,"dependencies":[{"issue_id":"bd-50","depends_on_id":"bd-34","type":"blocks"},{"issue_id":"bd-50","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-51","title":"[Coherence] Functorial transport contract: base/fibre identity, composition, and naturality","description":"Add a first-class coherence transport artifact and checker path so base-space projections are constrained to transform functorially with fibre-space transformations.\nAcceptance:\n- deterministic transport artifact schema in premath-coherence checker path,\n- coherence obligation enforcing identity/composition/naturality equalities over canonicalized payloads,\n- golden/adversarial transport fixtures wired into coherence-check baseline gate,\n- witness details include per-law digests and failing vector IDs.","notes":"Implemented first-class transport coherence machinery in the authoritative checker path.\nDelivered:\n- Added new required coherence obligation `transport_functoriality` in `premath-coherence` and contract wiring in `specs/premath/draft/COHERENCE-CONTRACT.json`.\n- Added deterministic transport evaluation over typed fixture artifacts with semantic canonicalization (`normalize_semantics`) and digesting (`sem1_...`) for three laws: identity, composition, naturality.\n- Added executable fixture suite `tests/conformance/fixtures/coherence-transport` with golden/adversarial/invariance vectors and expected failure-class assertions.\n- Added unit coverage in `crates/premath-coherence/src/lib.rs` for semantic digest invariance and identity-violation detection.\nValidation: `cargo test -p premath-coherence`, `mise run coherence-check`, and full `mise run baseline` all pass.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:11:06.044009Z","updated_at":"2026-02-22T05:16:25.701339Z","closed_at":"2026-02-22T05:16:25.701341Z","ephemeral":false,"dependencies":[{"issue_id":"bd-51","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-51","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-52","title":"[Coherence Glue] Route coherence-contract transport vectors through cached fixture-suite runner","description":"Integrate coherence transport vectors into the shared cache-aware conformance fixture suite surface to reduce duplicate execution paths and tighten cross-surface parity.\nAcceptance:\n- add a coherence-contract fixture suite entry in `tools/conformance/run_fixture_suites.py` that runs the authoritative `premath coherence-check` command,\n- cache binding includes coherence checker code + contract + coherence transport fixtures,\n- docs/fixtures references reflect the new suite,\n- deterministic cache hit behavior verified for the new suite,\n- baseline remains green.","notes":"Completed: integrated coherence-contract transport checks into the shared cached fixture-suite surface.\nDelivered:\n- Added `coherence-contract` suite in `tools/conformance/run_fixture_suites.py` executing authoritative command `premath coherence-check --contract specs/premath/draft/COHERENCE-CONTRACT.json --repo-root . --json`.\n- Bound cache materialization to coherence contract artifact, transport fixtures, and core checker/CLI sources.\n- Updated fixture/conformance docs (`tests/conformance/fixtures/README.md`, `tools/conformance/README.md`) to include the new suite.\n- Recorded boundary decision in `specs/process/decision-log.md` (Decision 0044).\nValidation:\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract` (store)\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract` (hit)\n- `mise run conformance-run`\n- `mise run baseline`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:20:36.420799Z","updated_at":"2026-02-22T05:22:00.431818Z","closed_at":"2026-02-22T05:22:00.431822Z","ephemeral":false,"dependencies":[{"issue_id":"bd-52","depends_on_id":"bd-33","type":"discovered-from"},{"issue_id":"bd-52","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-53","title":"[Site Semantics] Add Ctx/J, sheaf-stack, and torsor-extension raw specs with foundations companion","description":"Capture the Premath site/topos abstraction with minimum encoding and maximum expressiveness as raw specs tied to existing kernel/coherence doctrine.\nAcceptance:\n- add raw docs for Ctx base category + coverage topology, presheaf/sheaf/stack contracts, and torsor/extension equivalence,\n- add one foundations note that explains the intuition and implementation mapping,\n- update SPEC-INDEX and raw README references coherently,\n- keep authority split explicit: these docs are informational unless promoted/claimed.","notes":"Completed site/topos semantics documentation slice with foundations companion.\nDelivered:\n- Added raw specs:\n  - `specs/premath/raw/CTX-SITE.md`\n  - `specs/premath/raw/SHEAF-STACK.md`\n  - `specs/premath/raw/TORSOR-EXT.md`\n- Added foundations explainer:\n  - `docs/foundations/SITE-AND-TORSOR-NOTES.md`\n- Updated discoverability/indexing:\n  - `specs/premath/raw/README.md`\n  - `specs/premath/draft/SPEC-INDEX.md` (§5.5 informative list)\n- Recorded architecture boundary decision:\n  - Decision 0045 in `specs/process/decision-log.md`.\nValidation:\n- `mise run docs-coherence-check`\n- `mise run traceability-check`\n- `mise run coherence-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:24:59.660073Z","updated_at":"2026-02-22T05:26:43.097367Z","closed_at":"2026-02-22T05:26:43.097371Z","ephemeral":false,"dependencies":[{"issue_id":"bd-53","depends_on_id":"bd-28","type":"discovered-from"},{"issue_id":"bd-53","depends_on_id":"bd-33","type":"discovered-from"}]}
{"id":"bd-54","title":"[Coherence] Add site-coverage and glue-or-witness obligations with coherence-site vectors","description":"Implement the next coherence-contract domain beyond transport:\n- coverage base-change stability,\n- coverage transitivity,\n- glue-or-witness contractibility.\nAcceptance:\n- add required obligations in core checker + contract artifact,\n- add executable fixtures under `tests/conformance/fixtures/coherence-site` (golden/adversarial/invariance),\n- include coherence-site fixture root in cached coherence-contract suite inputs,\n- coherence-check and conformance-run pass deterministically.","notes":"Implemented coherence-site obligations in premath-coherence: coverage_base_change, coverage_transitivity, glue_or_witness_contractibility; added deterministic vector runner over tests/conformance/fixtures/coherence-site; added golden/adversarial/invariance fixtures and manifest; extended COHERENCE-CONTRACT + PREMATH-COHERENCE + conformance docs + decision log; wired coherence-site into run_fixture_suites cache surface; added foundations grounding note in docs/foundations/SITE-AND-TORSOR-NOTES.md; verified with cargo test -p premath-coherence, mise run coherence-check, python3 tools/conformance/run_fixture_suites.py --suite coherence-contract, and mise run conformance-run.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:28:48.724493Z","updated_at":"2026-02-22T05:35:41.756178Z","closed_at":"2026-02-22T05:35:41.756181Z","ephemeral":false,"dependencies":[{"issue_id":"bd-54","depends_on_id":"bd-33","type":"discovered-from"},{"issue_id":"bd-54","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-55","title":"[Governance] Enforce server-side required CI attestation on main (no bypass path)","description":"Git push reported local ci-required-attested success but remote accepted push with \"Bypassed rule violations ... Required status check ci-required is expected\". Harden branch protection/repo rules so merges/pushes to main require verified CI witness + required status without bypass, aligning with doctrine of deterministic gate authority and preventing unchecked public drift.","notes":"Closed by bd-64 rollout completion + bd-65 checker hardening.\nResults:\n- `main` now enforces PR-only updates and required `ci-required` status without admin bypass (`enforce_admins=true`).\n- Policy checker now verifies both ruleset and classic branch-protection surfaces deterministically, including admin bypass detection.\n- Live branch-policy workflow pass recorded: https://github.com/workingdoge/premath/actions/runs/22272381740\n- Active fix PR: https://github.com/workingdoge/premath/pull/8","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:37:14.633502Z","updated_at":"2026-02-22T06:57:18.482858Z","closed_at":"2026-02-22T06:57:18.482862Z","ephemeral":false,"dependencies":[{"issue_id":"bd-55","depends_on_id":"bd-64","type":"blocks"}]}
{"id":"bd-56","title":"[EPIC] Doctrine boundary de-adhoc: single-source authority maps across kernel/coherence/CI","description":"Generalization of bd-28 unification through DOCTRINE-INF: eliminate parallel encodings of semantic/control-plane authority boundaries. Goal: one canonical typed authority map per boundary (obligation->Gate mapping, capability->policy/check surface, doctrine-site reachability), with deterministic projections consumed by kernel, coherence, CI wrappers, and conformance vectors.","notes":"Closed after completion of planned execution chain:\n- bd-57: kernel-owned obligation->Gate registry authority export,\n- bd-63: shared control-plane contract artifact consumption,\n- bd-58: typed-registry parity cutover (remove source scraping),\n- bd-59: CI operational vs semantic failure lineage split,\n- bd-60: doctrine-site generation-first with roundtrip checks,\n- bd-61: cross-surface boundary-authority invariance vectors (registry/proposal/coherence/CI + stale generated adversarial).\nOutcome: canonical typed authority maps now drive kernel/coherence/CI/conformance surfaces for doctrine boundary scope in this epic.","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","created_at":"2026-02-22T05:44:33.027728Z","updated_at":"2026-02-22T07:31:08.064192Z","closed_at":"2026-02-22T07:31:08.064194Z","ephemeral":false,"dependencies":[{"issue_id":"bd-56","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-57","title":"[Kernel] Canonicalize obligation→Gate failure mapping as exported authority registry","description":"Move obligation-kind to Gate failure/law mapping into kernel-owned typed registry (not duplicated in proposal/coherence/Python). Expose stable machine-readable export (Rust API + JSON artifact) and make downstream consumers import it. Includes mapping tests against BIDIR-DESCENT §8.1 and GATE §4 classes.","notes":"Completed.\nDelivered:\n- Added kernel-owned canonical registry `crates/premath-kernel/src/obligation_registry.rs` as single authority for obligation->Gate failure mapping (`OBLIGATION_TO_GATE_FAILURE`).\n- Exported typed Rust APIs (`obligation_to_failure_class`, `failure_class_to_law_ref`, `obligation_gate_registry`, `obligation_gate_registry_json`).\n- Added machine JSON export command surface: `premath obligation-registry --json`.\n- Rewired `premath-coherence` proposal discharge to consume kernel registry APIs (removed local mapping authority from `crates/premath-coherence/src/proposal.rs`).\n- Updated coherence contract parity surface to source checker mapping from kernel registry file (`specs/premath/draft/COHERENCE-CONTRACT.json` bidirCheckerPath).\n- Added normative docs + governance log updates: `draft/PREMATH-KERNEL`, `draft/PREMATH-COHERENCE`, Decision 0047.\nValidation:\n- `cargo test -p premath-kernel -p premath-coherence -p premath-cli`\n- `mise run coherence-check`\n- `mise run docs-coherence-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:44:36.778498Z","updated_at":"2026-02-22T06:00:58.588602Z","closed_at":"2026-02-22T06:00:58.588603Z","ephemeral":false,"dependencies":[{"issue_id":"bd-57","depends_on_id":"bd-56","type":"discovered-from"},{"issue_id":"bd-57","depends_on_id":"bd-62","type":"blocks"}]}
{"id":"bd-58","title":"[Coherence] Replace source-text scraping parity checks with typed registry inputs","description":"Refactor premath-coherence checks that parse source/spec text by regex for capability/check/obligation parity into typed artifact consumption. Keep docs parity checks where needed, but authority parity must read canonical registry artifacts. Goal: deterministic parity without language-specific parser fragility or hidden drift.","notes":"Completed source-scrape removal for premath-coherence parity checks: capability parity now consumes typed `draft/CAPABILITY-REGISTRY.json`; bidir checker obligation parity now consumes kernel typed registry API (`obligation_gate_registry*`). Updated conformance/docs parity tooling to the same typed capability registry path and added decision-log + spec index/traceability updates. Validation run: cargo test -p premath-coherence; python3 tools/conformance/test_docs_coherence.py; python3 tools/conformance/check_docs_coherence.py; python3 tools/conformance/check_spec_traceability.py; python3 tools/conformance/run_capability_vectors.py; premath coherence-check accepted.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:44:40.682837Z","updated_at":"2026-02-22T06:30:20.597766Z","closed_at":"2026-02-22T06:30:20.597768Z","ephemeral":false,"dependencies":[{"issue_id":"bd-58","depends_on_id":"bd-56","type":"discovered-from"},{"issue_id":"bd-58","depends_on_id":"bd-57","type":"blocks"},{"issue_id":"bd-58","depends_on_id":"bd-63","type":"blocks"}]}
{"id":"bd-59","title":"[CI] Preserve semantic failure lineage in ci.required/ci.instruction witnesses","description":"Reduce coarse 'check_failed' collapse by threading gate witness class lineage into required/instruction witness summaries where available, while preserving control-plane failure classes. Define typed split: semantic Gate classes vs operational pipeline classes, and verify deterministic mapping in ci verify/decision paths.","notes":"Completed.\n\nCompact provenance summary:\n- Added deterministic CI witness lineage split between operational and semantic failures.\n- Witness fields now include:\n  - `operationalFailureClasses`\n  - `semanticFailureClasses`\n  - `failureClasses` as deterministic union-compatibility field.\n- Required/instruction witness paths now enforce parity between gate-lineage classes and witness class surfaces.\n- This lineage split is preserved through verify/decide flows in the core control-plane path.\n\nValidation path used:\n- `python3 tools/ci/test_required_witness_lineage.py`\n- `python3 tools/ci/test_instruction_witness_lineage.py`\n- `mise run ci-pipeline-test`\n- `mise run baseline`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:44:44.323030Z","updated_at":"2026-02-22T21:54:45.484796Z","closed_at":"2026-02-22T06:20:24.398990Z","ephemeral":false,"dependencies":[{"issue_id":"bd-59","depends_on_id":"bd-56","type":"discovered-from"},{"issue_id":"bd-59","depends_on_id":"bd-57","type":"blocks"},{"issue_id":"bd-59","depends_on_id":"bd-63","type":"blocks"}]}
{"id":"bd-6","title":"[Coherence v1] Proposal -> Obligations -> Discharge Witness Surface","description":"Extend instruction proposal ingestion so output includes obligations[] and discharge[] artifacts, not only proposal digest/classification. Ensure LLM proposals remain checking-mode only and acceptance is discharge-determined.","notes":"Implemented proposal -> obligations -> discharge witness surface in instruction runtime and conformance vectors. Added deterministic compile/discharge functions (tools/ci/instruction_proposal.py), proposal discharge gating in tools/ci/run_instruction.py, and witness emission of proposalIngest.obligations + proposalIngest.discharge. Added adversarial vectors for ext_gap -> descent_failure and ext_ambiguous -> glue_non_contractible determinism checks under capabilities.instruction_typing.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-21T23:06:51.520507Z","updated_at":"2026-02-21T23:32:55.730409Z","closed_at":"2026-02-21T23:32:55.730411Z","ephemeral":false,"dependencies":[{"issue_id":"bd-6","depends_on_id":"bd-5","type":"blocks"},{"issue_id":"bd-6","depends_on_id":"bd-4","type":"discovered-from"}]}
{"id":"bd-60","title":"[Doctrine-Site] Make doctrine operation map generation-first with roundtrip checks","description":"Replace hand-maintained doctrine-site drift surface with generation-first flow from declaration-bearing specs + operation registry, then verify roundtrip and deterministic digest. Keep manual edit escape hatch only behind explicit fail-closed checks. Goal: doctrine ancestry remains auditable with minimal hand-edited duplication.","notes":"Completed generation-first doctrine-site authority path.\nDelivered:\n- Added typed source artifacts:\n  - `specs/premath/draft/DOCTRINE-SITE-SOURCE.json` (non-operation topology)\n  - `specs/premath/draft/DOCTRINE-OP-REGISTRY.json` (operation nodes + CI operation edges)\n- Added shared generation/validation module: `tools/conformance/doctrine_site_contract.py`.\n- Added generator CLI: `tools/conformance/generate_doctrine_site.py`.\n- Refactored `tools/conformance/check_doctrine_site.py` to enforce roundtrip drift check (`generated == tracked`) and retain declaration/morphism/cover/reachability checks.\n- Regenerated canonical `specs/premath/draft/DOCTRINE-SITE.json` deterministically from source + operation registry + declaration-bearing specs.\n- Added deterministic tests: `tools/conformance/test_doctrine_site_contract.py` and wired it into `mise run ci-pipeline-test`.\n- Updated specs/docs: `draft/DOCTRINE-SITE.md`, `draft/README.md`, `draft/SPEC-INDEX.md`, `draft/SPEC-TRACEABILITY.md`, `tools/conformance/README.md`, `specs/process/decision-log.md` (Decision 0052).\nValidation:\n- `python3 tools/conformance/generate_doctrine_site.py --check`\n- `python3 tools/conformance/check_doctrine_site.py`\n- `python3 tools/conformance/test_doctrine_site_contract.py`\n- `python3 tools/conformance/check_spec_traceability.py`\n- `python3 tools/conformance/check_docs_coherence.py`\n- `mise run ci-pipeline-test`\n- `mise run doctrine-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:44:47.886180Z","updated_at":"2026-02-22T07:21:09.203296Z","closed_at":"2026-02-22T07:21:09.203299Z","ephemeral":false,"dependencies":[{"issue_id":"bd-60","depends_on_id":"bd-56","type":"discovered-from"}]}
{"id":"bd-61","title":"[Conformance] Add boundary-authority invariance vectors across kernel/coherence/CI","description":"Introduce vectors proving invariance of authority mappings across projections: same obligation set -> same gate class mapping -> same witness lineage in proposal/coherence/ci surfaces. Includes adversarial vectors for registry mismatch and stale generated artifacts.","notes":"Completed boundary-authority invariance vectors across kernel/coherence/CI.\nDelivered:\n- Extended `tools/conformance/run_capability_vectors.py` (`capabilities.ci_witnesses`) with boundary-authority lineage validation over:\n  - kernel obligation registry (`obligationKind -> failureClass`),\n  - proposal failed-obligation discharge classes,\n  - coherence scope registry kind + bidir checker obligation coverage,\n  - CI witness semantic lineage (`semanticFailureClasses`) and union shape (`failureClasses == operational ∪ semantic`).\n- Added deterministic boundary failure classes:\n  - `boundary_authority_registry_mismatch`\n  - `boundary_authority_lineage_mismatch`\n  - `boundary_authority_stale_generated`\n- Added executable vectors:\n  - `golden/boundary_authority_lineage_accept`\n  - `adversarial/boundary_authority_registry_mismatch_reject`\n  - `adversarial/boundary_authority_stale_generated_reject`\n  - `invariance/same_boundary_authority_local`\n  - `invariance/same_boundary_authority_external`\n- Updated `capabilities.ci_witnesses` manifest and docs/spec language:\n  - `draft/CAPABILITY-VECTORS.md`\n  - `draft/CONFORMANCE.md`\n  - `tools/conformance/README.md`\n  - decision log `Decision 0053`.\nValidation:\n- `python3 tools/conformance/check_stub_invariance.py`\n- `python3 tools/conformance/run_capability_vectors.py --capability capabilities.ci_witnesses`\n- `mise run conformance-run`\n- `mise run docs-coherence-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:44:50.746495Z","updated_at":"2026-02-22T07:29:15.822255Z","closed_at":"2026-02-22T07:29:15.822257Z","ephemeral":false,"dependencies":[{"issue_id":"bd-61","depends_on_id":"bd-56","type":"discovered-from"},{"issue_id":"bd-61","depends_on_id":"bd-57","type":"blocks"},{"issue_id":"bd-61","depends_on_id":"bd-59","type":"blocks"},{"issue_id":"bd-61","depends_on_id":"bd-58","type":"blocks"},{"issue_id":"bd-61","depends_on_id":"bd-60","type":"blocks"},{"issue_id":"bd-61","depends_on_id":"bd-63","type":"blocks"}]}
{"id":"bd-62","title":"[Architecture] Clarify coherence vs CI: one control-plane layer, two roles (check vs execute/attest)","description":"Write explicit normative boundary: coherence-check is control-plane consistency checker; CI pipelines are execution/attestation transport over that checker surface. Define shared terminology and non-overlap with kernel semantic authority. Update PREMATH-COHERENCE, raw/PREMATH-CI, raw/CI-TOPOS, and architecture map so the relationship is explicit and machine-checkable.","notes":"Clarified control-plane boundary in docs: coherence = check role, CI = execute/attest role, kernel/gate/bidir remain semantic authority. Updated specs/premath/draft/PREMATH-COHERENCE.md (fixed authority wording in §10.1), specs/premath/raw/PREMATH-CI.md (§2.1 relation to coherence), specs/premath/raw/CI-TOPOS.md (§1.1 control-plane role), docs/design/ARCHITECTURE-MAP.md (branched control-plane path + role split), tools/ci/README.md boundary note. Verified with mise run docs-coherence-check and mise run coherence-check.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:50:10.306326Z","updated_at":"2026-02-22T05:54:08.020440Z","closed_at":"2026-02-22T05:54:08.020443Z","ephemeral":false,"dependencies":[{"issue_id":"bd-62","depends_on_id":"bd-56","type":"discovered-from"}]}
{"id":"bd-63","title":"[Control Plane] Introduce shared typed contract artifact consumed by coherence-check and CI pipelines","description":"Add one canonical machine artifact for control-plane authority surfaces (check IDs, allowed classes, witness binding keys, projection policy ids). Coherence and CI must consume this artifact instead of duplicating constants/regex-source extraction. Include deterministic generator + roundtrip tests + conformance vectors.","notes":"Completed.\nDelivered:\n- Added shared typed loader/module `tools/ci/control_plane_contract.py` as canonical importer for `draft/CONTROL-PLANE-CONTRACT.json`.\n- Migrated CI projection constants in `tools/ci/change_projection.py` to consume contract fields via shared loader.\n- Migrated required/instruction witness and policy identifiers to contract-backed constants across:\n  - `tools/ci/run_required_checks.py`\n  - `tools/ci/required_witness.py`\n  - `tools/ci/verify_decision.py`\n  - `tools/ci/run_instruction.py`\n  - `tools/ci/instruction_policy.py`\n  - `tools/ci/observation_surface.py`\n- Extended `premath-coherence` gate-chain parity to validate and expose shared witness/policy identifier fields from `controlPlaneContractPath`.\n- Updated `draft/PREMATH-COHERENCE` normative parity text to include shared control-plane witness/policy identifier shape checks.\nValidation:\n- `mise run ci-pipeline-test`\n- `mise run ci-observation-test`\n- `mise run docs-coherence-check`\n- `mise run coherence-check`\n- `mise run traceability-check`\nFollow-on scope:\n- Semantic failure lineage and cross-surface invariance vectors continue under `bd-59` and `bd-61`.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T05:50:13.498306Z","updated_at":"2026-02-22T06:12:39.999217Z","closed_at":"2026-02-22T06:12:39.999218Z","ephemeral":false,"dependencies":[{"issue_id":"bd-63","depends_on_id":"bd-56","type":"discovered-from"},{"issue_id":"bd-63","depends_on_id":"bd-62","type":"blocks"},{"issue_id":"bd-63","depends_on_id":"bd-57","type":"blocks","created_by":"codex"}]}
{"id":"bd-64","title":"[Ops] Apply and verify GitHub main ruleset policy (no bypass actors, required ci-required)","description":"Execute server-side rollout for `specs/process/GITHUB-BRANCH-POLICY.json`: configure branch/ruleset settings on GitHub main to require PR updates, require strict `ci-required` status check, disallow force-push/delete, and remove bypass actors. Configure `PREMATH_BRANCH_POLICY_TOKEN` secret for `.github/workflows/branch-policy.yml` and record first passing live run witness/log link.","notes":"Completed rollout.\nServer-side state:\n- Applied GitHub `main` protection contract via API (`PUT /repos/workingdoge/premath/branches/main/protection`) with strict `ci-required`, PR-only updates, `enforce_admins=true`, force-push/delete disabled.\n- Configured repo secret `PREMATH_BRANCH_POLICY_TOKEN`.\n- Entered bootstrap review mode (`required_approving_review_count=0`) due no reviewer pool; follow-up tracked in bd-67.\nVerification:\n- Local live checker passes (`python3 tools/ci/check_branch_policy.py --fetch-live`) using hardened fallback/admin-bypass logic from bd-65.\n- Workflow evidence:\n  - pre-fix failure: https://github.com/workingdoge/premath/actions/runs/22272316140\n  - post-fix pass (branch `codex/bd-65-branch-policy-fallback`): https://github.com/workingdoge/premath/actions/runs/22272381740\n  - latest PR-head pass (`658b72f`): https://github.com/workingdoge/premath/actions/runs/22272407035\n  - post-merge main pass (`98988bd`): https://github.com/workingdoge/premath/actions/runs/22272487569\n- PR carrying checker fix + docs/issue updates merged: https://github.com/workingdoge/premath/pull/8","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T06:39:54.087957Z","updated_at":"2026-02-23T04:26:39.384543Z","closed_at":"2026-02-22T06:57:14.691424Z","ephemeral":false,"dependencies":[{"issue_id":"bd-64","depends_on_id":"bd-65","type":"blocks","created_by":"codex"}]}
{"id":"bd-65","title":"[Governance] Tighten branch-policy checker for admin bypass + classic-protection fallback","description":"Close the policy-verification gap where live rules endpoint may be empty while classic branch protection is active, and where enforce_admins=false is not currently treated as bypass. Scope:\n- fallback from /rules/branches/{branch} to /branches/{branch}/protection when needed,\n- classify enforce_admins=false as bypass when forbidBypassActors=true,\n- add deterministic tests/fixtures for classic branch-protection payload parity.\nAcceptance:\n- checker fails on admin-bypass path,\n- checker succeeds on compliant classic protection payload,\n- live check can verify repos using either rulesets or classic branch protection.","notes":"Closed with deterministic checker hardening for minimum-encoding/maximum-expressiveness on live GitHub policy surfaces. Delivered:\n- `tools/ci/check_branch_policy.py`: live fetch now falls back from `/rules/branches/{branch}` to classic `/branches/{branch}/protection` when ruleset payload is empty.\n- Added explicit admin bypass detection from `enforce_admins` (`admin bypass path enabled: enforce_admins=false`) under `forbidBypassActors=true`.\n- Added list payload support in `_as_rule_list` for direct rules endpoint payloads.\n- Added classic branch protection golden fixture `tests/ci/fixtures/branch-policy/main-protection-golden.json`.\n- Added regression tests in `tools/ci/test_branch_policy.py` for classic protection acceptance and admin-bypass rejection.\nValidation: `python3 tools/ci/test_branch_policy.py`, `mise run ci-branch-policy-check`, and direct checker run against new fixture all pass.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T06:47:51.218723Z","updated_at":"2026-02-22T06:52:31.113327Z","closed_at":"2026-02-22T06:52:31.113330Z","ephemeral":false}
{"id":"bd-66","title":"[Ops] Document branch-protection and rollout conventions in AGENTS.md + .premath ops notes","description":"Capture operational conventions learned during governance rollout so agents follow the same path by default.\nScope:\n- update AGENTS.md with current GitHub flow constraints (protected main, PR-only updates, branch-policy workflow expectations),\n- add .premath-local ops notes artifact for routine operator actions/checklist and evidence recording,\n- link conventions to issue workflow so operational follow-ups are tracked explicitly.\nAcceptance:\n- AGENTS.md contains explicit policy-safe push/PR conventions,\n- .premath notes file documents checklist + evidence fields,\n- issue graph records the convention update and relation to bd-64.","notes":"Completed ops-conventions documentation pass.\nDelivered:\n- Updated `AGENTS.md` with explicit GitHub ops conventions: protected `main` PR-only flow, local/live branch-policy checks, `PREMATH_BRANCH_POLICY_TOKEN` requirement, and evidence-recording expectation.\n- Added tracked `.premath/OPERATIONS.md` with repeatable checklist for branch-policy rollouts plus evidence log entries.\n- Linked operational state to issue graph (bd-66 discovered-from bd-64).\nValidation: `mise run ci-hygiene-check` passed.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T06:55:39.464292Z","updated_at":"2026-02-22T06:57:30.052176Z","closed_at":"2026-02-22T06:57:30.052179Z","ephemeral":false,"dependencies":[{"issue_id":"bd-66","depends_on_id":"bd-64","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-67","title":"[Governance] Re-enable required PR approvals when reviewer pool exists","description":"Current bootstrap mode uses protected-main + required ci-required + PR-only with `required_approving_review_count=0` due no available reviewers. Track restoration to `required_approving_review_count>=1` once at least one independent reviewer is available.\nAcceptance:\n- branch policy contract and server settings updated to require >=1 approval,\n- branch-policy live workflow passes after update,\n- ops notes updated with transition evidence.\n\nVerification commands:\n- `mise run ci-branch-policy-check`\n- `mise run ci-branch-policy-check-live`","notes":"Status refined during multithread architecture planning: blocked pending availability of reviewer pool for re-enabling required PR approvals. Keep open for governance closure when reviewer pool exists.","status":"blocked","priority":3,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T07:03:09.556346Z","updated_at":"2026-02-23T00:26:49.233546Z","ephemeral":false,"dependencies":[{"issue_id":"bd-67","depends_on_id":"bd-64","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-68","title":"[Coherence/CwF] Add strict substitution + comprehension obligations and vectors","description":"Introduce a CwF-style strict presentation boundary for coherence-check: Ty/Tm substitution identity/composition plus comprehension beta/eta as deterministic obligations. Scope: spec text + contract obligation IDs + executable coherence fixtures + baseline-gated conformance integration.","notes":"Implemented CwF strictification obligations in premath-coherence: cwf_substitution_identity, cwf_substitution_composition, cwf_comprehension_beta, cwf_comprehension_eta. Updated COHERENCE-CONTRACT + PREMATH-COHERENCE spec, added coherence-site golden/adversarial fixtures, and logged Decision 0056. Validation passed: cargo test -p premath-coherence, mise run coherence-check, mise run conformance-run, mise run baseline.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T08:21:33.734088Z","updated_at":"2026-02-22T08:26:03.461835Z","closed_at":"2026-02-22T08:26:03.461837Z","ephemeral":false,"dependencies":[{"issue_id":"bd-68","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-69","title":"[Migration Follow-up] Deduplicate required_* core client transport into shared helper","description":"Reduce duplicated Python wrapper encoding in tools/ci required client modules by centralizing transport concerns (premath binary resolution, temp-input file run, stale-local-binary cargo retry, failure-class parsing). Keep payload shape validation per-client.\nAcceptance:\n- one shared helper module provides canonical command execution path,\n- required_delta/projection/witness/witness_verify/witness_decide/decision_verify/gate_ref clients use helper,\n- ci-pipeline-test passes with no behavior regressions.","notes":"Completed in one slice.\n\nDelivered:\n- Added shared transport helper `tools/ci/core_cli_client.py` for required command surfaces.\n- Migrated `required_delta_client.py`, `required_projection_client.py`, `required_witness_client.py`, `required_witness_verify_client.py`, `required_witness_decide_client.py`, `required_decision_verify_client.py`, and `required_gate_ref_client.py` to use the shared helper.\n- Kept per-client payload-shape validation local (domain-specific checks) while centralizing transport mechanics.\n\nValidation:\n- `python3 tools/ci/test_required_delta_client.py`\n- `python3 tools/ci/test_required_projection_client.py`\n- `python3 tools/ci/test_required_witness_client.py`\n- `python3 tools/ci/test_required_witness_verify_client.py`\n- `python3 tools/ci/test_required_witness_decide_client.py`\n- `python3 tools/ci/test_required_decision_verify_client.py`\n- `python3 tools/ci/test_required_gate_ref_client.py`\n- `mise run ci-pipeline-test`\n\nOutcome: behavior parity preserved while reducing duplicated wrapper encoding.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T09:41:40.001511Z","updated_at":"2026-02-22T09:45:46.223150Z","closed_at":"2026-02-22T09:45:46.223152Z","ephemeral":false,"dependencies":[{"issue_id":"bd-69","depends_on_id":"bd-34","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-7","title":"[Coherence v1] First-Class Instruction Reject Witnesses","description":"When instruction validation fails pre-execution (schema/policy/proposal binding), emit typed reject witness artifacts with deterministic failureClasses instead of only stderr/exit code.","notes":"Implemented first-class pre-execution reject witnesses. tools/ci/run_instruction.py now emits deterministic rejected ci.instruction.v1 artifacts with rejectStage=pre_execution and typed failureClasses on envelope/policy/proposal validation failures. tools/ci/pipeline_instruction.py now guarantees witness emission even when envelope check fails. Added tests in tools/ci/test_instruction_reject_witness.py, added ci-pipeline-test coverage, and extended ci_witnesses capability vectors with reject-witness determinism/mismatch cases.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T23:06:54.527190Z","updated_at":"2026-02-21T23:40:55.846448Z","closed_at":"2026-02-21T23:40:55.846452Z","ephemeral":false,"dependencies":[{"issue_id":"bd-7","depends_on_id":"bd-6","type":"blocks"},{"issue_id":"bd-7","depends_on_id":"bd-4","type":"discovered-from"}]}
{"id":"bd-70","title":"[Migration Follow-up] Move proposal-check Python transport onto shared core_cli_client","description":"Adopt tools/ci/core_cli_client.py in proposal_check_client.py to remove duplicate command transport code (binary resolution, stale-local retry, failure extraction, JSON decode/retry) while keeping proposal payload-shape validation local.\nAcceptance:\n- proposal_check_client uses shared helper,\n- proposal client tests pass,\n- ci-pipeline-test remains green.","notes":"Completed in one slice.\n\nDelivered:\n- Refactored `tools/ci/proposal_check_client.py` to use shared `tools/ci/core_cli_client.py` transport path.\n- Preserved proposal-specific failure-class behavior for payload-shape mismatches via deterministic mapping in client layer.\n\nValidation:\n- `python3 tools/ci/test_proposal_check_client.py`\n- `mise run ci-pipeline-test`\n\nOutcome: proposal-check wrapper now follows the same minimum-encoding transport surface as required clients.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T09:46:51.426649Z","updated_at":"2026-02-22T09:48:24.624369Z","closed_at":"2026-02-22T09:48:24.624371Z","ephemeral":false,"dependencies":[{"issue_id":"bd-70","depends_on_id":"bd-34","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-71","title":"[Migration Follow-up] Route instruction check/witness clients through shared core_cli_client transport","description":"Reduce duplicated wrapper transport in tools/ci/instruction_check_client.py by using core_cli_client helpers for both instruction-check and instruction-witness command paths while preserving existing failure-class semantics.\nAcceptance:\n- instruction-check uses shared path-input transport,\n- instruction-witness uses shared payload-input transport with optional pre-execution flags,\n- instruction client tests + ci-pipeline-test pass.","notes":"Completed in one slice.\n\nDelivered:\n- Refactored `tools/ci/instruction_check_client.py` to use shared `tools/ci/core_cli_client.py` transport for both instruction-check and instruction-witness flows.\n- Added shared helper support for path-input commands (`run_core_json_command_from_path`) and optional extra args, and explicit invalid-json failure-class override support.\n- Preserved instruction-specific failure classes and pre-execution witness argument semantics.\n\nValidation:\n- `python3 tools/ci/test_instruction_check_client.py`\n- `mise run ci-pipeline-test`\n\nOutcome: instruction client wrappers now align with minimum-encoding transport architecture used by required/proposal clients.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T09:51:52.112256Z","updated_at":"2026-02-22T09:52:04.164266Z","closed_at":"2026-02-22T09:52:04.164268Z","ephemeral":false,"dependencies":[{"issue_id":"bd-71","depends_on_id":"bd-34","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-72","title":"[bd-33] Enforce client-transport parity for CI command wrappers","description":"Add deterministic parity test ensuring CI command wrapper clients use shared `tools/ci/core_cli_client.py` transport surface and do not reintroduce duplicate transport loops.\nAcceptance:\n- parity test covers required/proposal/instruction client modules,\n- test is wired into `mise run ci-pipeline-test`,\n- documented in issue notes with validation evidence.","notes":"Completed in one slice.\n\nDelivered:\n- Added `tools/ci/test_client_transport_parity.py` to enforce wrapper transport parity over CI command clients.\n- Test asserts shared helper import/usage (`core_cli_client`) and bans legacy local transport patterns.\n- Wired test into `.mise.toml` under `ci-pipeline-test`.\n\nValidation:\n- `python3 tools/ci/test_client_transport_parity.py`\n- `mise run ci-pipeline-test`\n\nOutcome: wrapper command-surface parity now has deterministic executable enforcement, reducing risk of semantic drift back into Python wrappers.","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T09:53:32.048533Z","updated_at":"2026-02-22T09:54:11.036074Z","closed_at":"2026-02-22T09:54:11.036075Z","ephemeral":false,"dependencies":[{"issue_id":"bd-72","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-72","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-73","title":"[bd-33] Enforce PREMATH-COHERENCE obligation-set parity in scope checker","description":"Add executable parity invariant in `scope_noncontradiction` requiring `PREMATH-COHERENCE` §3 obligation IDs to stay aligned with checker required obligation IDs.\nAcceptance:\n- coherence contract surfaces bind PREMATH-COHERENCE section bounds,\n- checker emits deterministic failures for missing/unknown obligation IDs in the spec list,\n- unit test + pipeline tests pass.","notes":"Completed in one slice.\n\nDelivered:\n- Extended `scope_noncontradiction` to parse `PREMATH-COHERENCE` §3 and enforce parity with executable required coherence obligations.\n- Added deterministic failure classes:\n  - `coherence.scope_noncontradiction.coherence_spec_missing_obligation`\n  - `coherence.scope_noncontradiction.coherence_spec_unknown_obligation`\n- Added contract surface bindings:\n  - `coherenceSpecPath`\n  - `coherenceSpecObligationStart`\n  - `coherenceSpecObligationEnd`\n- Added unit test `validate_required_obligation_parity_reports_missing_and_unknown`.\n- Updated `PREMATH-COHERENCE` normative text and recorded Decision 0068.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run ci-pipeline-test`\n- `mise run coherence-check`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T09:59:02.906074Z","updated_at":"2026-02-22T09:59:15.697323Z","closed_at":"2026-02-22T09:59:15.697326Z","ephemeral":false,"dependencies":[{"issue_id":"bd-73","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-73","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-74","title":"[bd-33] Add CLI smoke for PREMATH obligation drift rejection","description":"Add an end-to-end premath-cli smoke test that mutates PREMATH-COHERENCE §3 obligation IDs via a temp coherence contract binding and asserts `coherence-check` rejects with deterministic scope failure classes.\nAcceptance:\n- test drives CLI `coherence-check --json`,\n- asserts rejected result + expected failure classes,\n- included in existing cli_smoke suite and passes with baseline pipeline.","notes":"Completed in one slice.\n\nDelivered:\n- Added end-to-end CLI smoke `coherence_check_rejects_on_coherence_spec_obligation_drift` in `crates/premath-cli/tests/cli_smoke.rs`.\n- Test mutates `PREMATH-COHERENCE` obligation list through a temp contract binding (`coherenceSpecPath`) and runs canonical command surface `premath coherence-check --json`.\n- Asserts rejected witness and deterministic failure classes:\n  - `coherence.scope_noncontradiction.coherence_spec_missing_obligation`\n  - `coherence.scope_noncontradiction.coherence_spec_unknown_obligation`\n- Recorded Decision 0069.\n\nValidation:\n- `cargo test -p premath-cli --test cli_smoke coherence_check_rejects_on_coherence_spec_obligation_drift`\n- `mise run ci-pipeline-test`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:01:16.373090Z","updated_at":"2026-02-22T10:02:14.935034Z","closed_at":"2026-02-22T10:02:14.935035Z","ephemeral":false,"dependencies":[{"issue_id":"bd-74","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-74","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-75","title":"[bd-33] Make coherence-contract cache inputs closed over contract surfaces","description":"Fix conformance cache validity for `coherence-contract` suite by deriving cache input paths from `COHERENCE-CONTRACT.json` surface/operation path declarations, so cache hits cannot skip runs when checker-read docs/surfaces change.\nAcceptance:\n- `run_fixture_suites.py` coherence-contract suite input closure includes contract-declared paths,\n- deterministic unit test verifies inclusion of key paths (`coherenceSpecPath`, `specIndexPath`, capability manifest root, expected operation path),\n- `ci-pipeline-test` runs new test.","notes":"Completed in one slice.\n\nDelivered:\n- Updated `tools/conformance/run_fixture_suites.py` so `coherence-contract` suite cache inputs are derived from `COHERENCE-CONTRACT.json` declarations:\n  - include `surfaces.*Path` and `surfaces.*Root`,\n  - include top-level `expectedOperationPaths[]`,\n  - retain deterministic fallback baseline paths if contract parse fails.\n- Added `tools/conformance/test_run_fixture_suites.py` verifying closure includes key checker-read surfaces and remains duplicate-free.\n- Wired new test into `.mise.toml` `ci-pipeline-test`.\n- Recorded Decision 0070.\n\nValidation:\n- `python3 tools/conformance/test_run_fixture_suites.py`\n- `mise run ci-pipeline-test`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:03:53.220799Z","updated_at":"2026-02-22T10:04:30.750870Z","closed_at":"2026-02-22T10:04:30.750873Z","ephemeral":false,"dependencies":[{"issue_id":"bd-75","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-75","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-76","title":"[bd-33] Prove coherence-contract cache ref drifts on coherence spec edits","description":"Add deterministic test showing `coherence-contract` suite cache material/cache refs change when `PREMATH-COHERENCE` content changes (without changing params hash), using suite-plan construction.\nAcceptance:\n- test uses actual coherence-contract input closure,\n- test asserts cache/material drift on coherence-spec content mutation,\n- wired through existing `ci-pipeline-test` run.","notes":"Completed in one slice.\n\nDelivered:\n- Extended `tools/conformance/test_run_fixture_suites.py` with drift proof `test_coherence_contract_cache_ref_changes_when_coherence_spec_changes`.\n- Test uses actual `coherence-contract` suite closure, mutates only `PREMATH-COHERENCE` input via temporary file substitution, and asserts:\n  - `params_hash` unchanged,\n  - `material_digest` changed,\n  - `cache_ref` changed.\n- Recorded Decision 0071.\n\nValidation:\n- `python3 tools/conformance/test_run_fixture_suites.py`\n- `mise run ci-pipeline-test`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:05:44.517127Z","updated_at":"2026-02-22T10:06:20.660860Z","closed_at":"2026-02-22T10:06:20.660863Z","ephemeral":false,"dependencies":[{"issue_id":"bd-76","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-76","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-77","title":"[bd-33] Include overlayDocs-derived files in coherence-contract cache closure","description":"Close cache parity gap by adding `overlayDocs`-derived markdown file paths (e.g. `specs/premath/<overlay>.md`) to `coherence-contract` suite cache inputs, because coherence-check reads these paths in `overlay_traceability`.\nAcceptance:\n- loader includes overlay file paths from contract `overlayDocs`,\n- unit test asserts overlay path inclusion,\n- pipeline tests remain green.","notes":"Completed in one slice.\n\nDelivered:\n- Extended `tools/conformance/run_fixture_suites.py::load_coherence_contract_input_paths()` to include overlay docs derived from `COHERENCE-CONTRACT.json` `overlayDocs` entries (`specs/premath/{overlay}.md`).\n- Added/updated unit coverage in `tools/conformance/test_run_fixture_suites.py` to assert inclusion of `specs/premath/profile/ADJOINTS-AND-SITES.md`.\n- Recorded Decision 0072.\n\nValidation:\n- `python3 tools/conformance/test_run_fixture_suites.py`\n- `mise run ci-pipeline-test`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:07:10.695042Z","updated_at":"2026-02-22T10:07:39.948697Z","closed_at":"2026-02-22T10:07:39.948700Z","ephemeral":false,"dependencies":[{"issue_id":"bd-77","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-77","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-78","title":"[bd-33] Include premath-kernel authority source in coherence-contract cache closure","description":"Close cache parity gap by including `crates/premath-kernel/src` in `coherence-contract` suite cache inputs, since coherence-check reads kernel obligation registry authority via `premath-kernel`.\nAcceptance:\n- cache input loader includes premath-kernel source path,\n- unit test asserts path inclusion,\n- pipeline tests pass.","notes":"Completed in one slice.\n\nDelivered:\n- Added `crates/premath-kernel/src` to `coherence-contract` cache input closure in `tools/conformance/run_fixture_suites.py`.\n- Updated `tools/conformance/test_run_fixture_suites.py` to assert kernel source inclusion.\n- Recorded Decision 0073.\n\nValidation:\n- `python3 tools/conformance/test_run_fixture_suites.py`\n- `mise run ci-pipeline-test`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:08:18.913545Z","updated_at":"2026-02-22T10:08:46.777011Z","closed_at":"2026-02-22T10:08:46.777013Z","ephemeral":false,"dependencies":[{"issue_id":"bd-78","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-78","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-79","title":"[bd-33] Include Cargo manifest surfaces in coherence-contract cache closure","description":"Add `Cargo.toml` and `Cargo.lock` to coherence-contract cache inputs so dependency/feature changes affecting coherence-check invalidate cache refs.\nAcceptance:\n- cache input loader includes repo Cargo manifests,\n- unit test asserts inclusion,\n- ci-pipeline-test remains green.","notes":"Completed in one slice.\n\nDelivered:\n- Added `Cargo.toml` and `Cargo.lock` to `coherence-contract` cache input closure in `tools/conformance/run_fixture_suites.py`.\n- Updated `tools/conformance/test_run_fixture_suites.py` to assert both manifest paths are included.\n- Recorded Decision 0074.\n\nValidation:\n- `python3 tools/conformance/test_run_fixture_suites.py`\n- `mise run ci-pipeline-test`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:10:22.474886Z","updated_at":"2026-02-22T10:10:50.286748Z","closed_at":"2026-02-22T10:10:50.286751Z","ephemeral":false,"dependencies":[{"issue_id":"bd-79","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-79","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-8","title":"[Coherence v1] Capability-Gated Issue Mutation Policy","description":"Bind issue/dep mutation permission to instruction witness capabilities (not only instruction presence). Enforce per-action capability claims and policy scoping for issue_add/update/claim/discover/dep_add.","notes":"Implemented capability-gated instruction-linked mutation policy. MCP issue/dep mutations now require accepted instruction witness with allowed policyDigest scope and capabilityClaims containing base capabilities.change_morphisms plus per-action claim (or capabilities.change_morphisms.all). Added Rust unit tests for unscoped policy reject, missing action claim reject, and dep_add action claim enforcement. Instruction envelopes/witnesses now support optional capabilityClaims; checker validates list shape and runner emits claims into witness.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T23:06:58.248792Z","updated_at":"2026-02-21T23:50:37.219793Z","closed_at":"2026-02-21T23:50:37.219795Z","ephemeral":false,"dependencies":[{"issue_id":"bd-8","depends_on_id":"bd-5","type":"blocks"},{"issue_id":"bd-8","depends_on_id":"bd-4","type":"discovered-from"}]}
{"id":"bd-80","title":"[bd-28] Add span/square schema + coherence checker hook for pipeline/base-change commutation","description":"Introduce minimum-encoding span/square layer for pipeline transport semantics.\nScope:\n- draft spec for `SpanRef` and `SquareWitness` shapes + commutation contract,\n- machine fixture surface for initial witness set,\n- coherence-check hook validating typed shape and basic square consistency (accepted=>no failure classes, rejected=>failure classes present).\nAcceptance:\n- spec document added and linked from index,\n- coherence checker reads configured span/square witness path and emits deterministic failure classes on invalid artifacts,\n- tests + pipeline green.","notes":"Completed in one slice.\n\nDelivered:\n- Added new required coherence obligation `span_square_commutation` with checker hook in `premath-coherence`.\n- Added typed evaluator `evaluate_site_case_span_square_commutation` enforcing:\n  - span/square typed shape,\n  - square digest determinism (`sqw1_`),\n  - accepted square contract (no failures + top/bottom commutation),\n  - rejected square contract (non-empty failure classes).\n- Added coherence-site executable vectors:\n  - `golden/span_square_commutation_accept`\n  - `adversarial/span_square_commutation_reject`\n- Added new draft spec `specs/premath/draft/SPAN-SQUARE-CHECKING.md`.\n- Glued spec/docs scope updates:\n  - `SPEC-INDEX.md` informative list,\n  - `draft/README.md` start-here list,\n  - `UNIFICATION-DOCTRINE.md` relationship section,\n  - `SPEC-TRACEABILITY.md` matrix row.\n- Updated coherence normative surfaces:\n  - `PREMATH-COHERENCE.md` obligation set + semantics,\n  - `COHERENCE-CONTRACT.json` obligation registry.\n- Recorded Decision 0075.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `python3 tools/conformance/check_spec_traceability.py`\n- `mise run ci-pipeline-test`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache`","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:13:45.422293Z","updated_at":"2026-02-22T10:19:12.603914Z","closed_at":"2026-02-22T10:19:12.603916Z","ephemeral":false,"dependencies":[{"issue_id":"bd-80","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-80","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-81","title":"[bd-33] Extend span/square vectors with invariance + digest-mismatch adversarial cases","description":"Tighten span/square checker coverage with one invariance vector (permuted span ordering) and one adversarial digest mismatch vector.\nAcceptance:\n- coherence-site manifest includes new vectors for `span_square_commutation`,\n- coherence-check accepts invariance case and rejects digest mismatch case deterministically,\n- pipeline tests and coherence-check pass.","notes":"Added span/square invariance + digest-mismatch adversarial vectors and wired into coherence-site manifest. Validation: mise run coherence-check; python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache; mise run ci-pipeline-test; cargo run --package premath-cli -- coherence-check --contract specs/premath/draft/COHERENCE-CONTRACT.json --repo-root . --json (verified span_square_commutation vector matching).","status":"closed","priority":1,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:20:33.313265Z","updated_at":"2026-02-22T10:22:33.007268Z","closed_at":"2026-02-22T10:22:33.007272Z","ephemeral":false,"dependencies":[{"issue_id":"bd-81","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-81","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-82","title":"[bd-33] Enforce coherence-site obligation polarity coverage (golden + adversarial)","description":"Tighten site fixture contract so each coherence-site obligation has both acceptance and rejection vectors.\nAcceptance:\n- coherence checker fails when an obligation has no matched golden vectors,\n- coherence checker fails when an obligation has no matched adversarial vectors,\n- unit tests cover both failure modes and one passing mixed case.","notes":"Implemented coherence-site polarity enforcement in checker: each matched obligation now requires at least one `golden/` and at least one `adversarial/` vector. Added deterministic failure classes `coherence.<obligation_id>.missing_golden_vector` and `.missing_adversarial_vector`, plus matched-vector kind counters in witness details. Added Rust unit tests for missing-golden, missing-adversarial, and both-present passing cases. Updated PREMATH-COHERENCE spec with Site Vector Polarity Coverage clause and recorded Decision 0077. Validation: cargo test -p premath-coherence; mise run coherence-check; python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache; mise run ci-pipeline-test; python3 tools/conformance/check_spec_traceability.py.","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:23:46.060043Z","updated_at":"2026-02-22T10:26:52.780375Z","closed_at":"2026-02-22T10:26:52.780378Z","ephemeral":false,"dependencies":[{"issue_id":"bd-82","depends_on_id":"bd-33","type":"discovered-from","created_by":"codex"},{"issue_id":"bd-82","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-83","title":"[bd-28] Isolate coherence-site obligation input scope to reduce cross-obligation blast radius","description":"Current coherence-site obligations share one manifest. A malformed unrelated vector can fail multiple obligations.\nAcceptance:\n- define and implement obligation-scoped fixture loading or equivalent isolation contract,\n- preserve deterministic witness output,\n- add regression test proving unrelated malformed vectors do not fail untouched obligations.","notes":"Implemented obligation-scoped coherence-site vector loading to eliminate cross-obligation blast radius.\n\nDelivered:\n- Extended `coherence-site` manifest schema with `obligationVectors` map (obligation id -> vector ids).\n- Updated `check_site_obligation` to parse/evaluate only mapped vectors for the active obligation.\n- Added deterministic scope failures for missing/inconsistent mapping:\n  - `coherence.<obligation_id>.manifest_missing_obligation_vectors`\n  - `coherence.<obligation_id>.manifest_obligation_vector_not_declared`\n  - `coherence.<obligation_id>.manifest_obligation_vector_mismatch`\n- Added checker details surface: `manifestObligationVectors` + `scopedVectors`.\n- Updated repository fixture manifest with full obligation-to-vector map.\n- Added regression test `check_site_obligation_ignores_unscoped_malformed_vectors` proving malformed unscoped vectors do not fail unrelated obligations.\n- Updated PREMATH-COHERENCE site vector clause and recorded Decision 0079.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache`\n- `mise run ci-pipeline-test`\n- `python3 tools/conformance/check_spec_traceability.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:31:08.973232Z","updated_at":"2026-02-22T10:36:01.782415Z","closed_at":"2026-02-22T10:36:01.782417Z","ephemeral":false,"dependencies":[{"issue_id":"bd-83","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-84","title":"[bd-28] Enforce semantic polarity coverage for coherence-site obligations","description":"Prefix polarity (`golden/`/`adversarial/`) is insufficient alone. Require semantic polarity from expect payloads.\nAcceptance:\n- checker requires at least one matched expectedResult=accepted vector and one matched expectedResult=rejected vector per site obligation,\n- deterministic failure classes emitted when missing,\n- unit tests cover missing-accept, missing-reject, and passing mixed case.","notes":"Implemented semantic polarity enforcement for coherence-site obligations in `check_site_obligation`.\n\nDelivered:\n- Added semantic result counters from `expect.result` (`accepted`/`rejected`) for matched vectors.\n- Added deterministic failures when missing:\n  - `coherence.<obligation_id>.missing_expected_accepted_vector`\n  - `coherence.<obligation_id>.missing_expected_rejected_vector`\n- Added witness details surface `matchedExpectedResults` with accepted/rejected counts.\n- Extended Rust tests:\n  - missing expected-accept vector,\n  - missing expected-reject vector,\n  - passing mixed semantic polarity case.\n- Updated draft spec clause (`PREMATH-COHERENCE` §4.15) and recorded Decision 0078.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache`\n- `mise run ci-pipeline-test`\n- `python3 tools/conformance/check_spec_traceability.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:31:08.984224Z","updated_at":"2026-02-22T10:33:09.020566Z","closed_at":"2026-02-22T10:33:09.020567Z","ephemeral":false,"dependencies":[{"issue_id":"bd-84","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-85","title":"[bd-28] Add invariance-pair contract enforcement for coherence-site fixtures","description":"coherence-site currently does not enforce invariance pair structure like capability fixtures.\nAcceptance:\n- checker enforces invariance scenario pairing contract for site vectors,\n- invariance pairing failures are deterministic,\n- regression tests cover missing pair and mismatched pair.","notes":"Implemented invariance-pair contract enforcement for `coherence-site` obligations in `premath-coherence`.\n\nDelivered:\n- Added `invariance/` contract checks in `check_site_obligation`:\n  - require non-empty `semanticScenarioId` and `profile` in case payloads,\n  - group invariance vectors by `semanticScenarioId`,\n  - require exactly two rows per scenario,\n  - require distinct profiles,\n  - require matched `actualResult` and `actualFailureClasses` across pair.\n- Added deterministic failures:\n  - `coherence.<obligation_id>.invariance_missing_semantic_scenario`\n  - `coherence.<obligation_id>.invariance_missing_profile`\n  - `coherence.<obligation_id>.invariance_pair_count_mismatch`\n  - `coherence.<obligation_id>.invariance_profile_not_distinct`\n  - `coherence.<obligation_id>.invariance_result_mismatch`\n  - `coherence.<obligation_id>.invariance_failure_class_mismatch`\n- Extended unit tests:\n  - pair-count mismatch,\n  - pair-result mismatch,\n  - passing local/external invariance pair.\n- Updated coherence-site fixtures:\n  - added `semanticScenarioId` + `profile` to existing invariance cases,\n  - added external-profile pair vectors for glue-or-witness and span-square invariance scenarios,\n  - updated manifest vector scopes.\n- Updated `PREMATH-COHERENCE` §4.15 and recorded Decision 0080.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache`\n- `mise run ci-pipeline-test`\n- `python3 tools/conformance/check_spec_traceability.py`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:31:08.992004Z","updated_at":"2026-02-22T10:40:43.649947Z","closed_at":"2026-02-22T10:40:43.649949Z","ephemeral":false,"dependencies":[{"issue_id":"bd-85","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-86","title":"[bd-28] Harmonize invariance-pair contract across coherence fixture families","description":"`coherence-site` now enforces invariance pairs by semantic scenario/profile, but `coherence-transport` still treats invariance as single-vector coverage.\nAcceptance:\n- define one invariance contract shape for both fixture families (site + transport) or document a principled exception,\n- enforce deterministic checker behavior for the chosen shape,\n- add/update fixtures and tests so conformance vectors prove the contract.","notes":"Harmonized invariance-pair contract across coherence fixture families by extending transport checker semantics to match site invariance rules.\n\nDelivered:\n- Added shared invariance helpers in `premath-coherence` used by both site and transport checker paths.\n- Extended `check_transport_functoriality` to enforce `invariance/` pair contract:\n  - require non-empty `semanticScenarioId` and `profile`,\n  - group by `semanticScenarioId`,\n  - require exactly two rows with distinct profiles,\n  - require same evaluated result and failure-class set.\n- Added deterministic transport failures aligned with site semantics:\n  - `coherence.transport_functoriality.invariance_missing_semantic_scenario`\n  - `coherence.transport_functoriality.invariance_missing_profile`\n  - `coherence.transport_functoriality.invariance_pair_count_mismatch`\n  - `coherence.transport_functoriality.invariance_profile_not_distinct`\n  - `coherence.transport_functoriality.invariance_result_mismatch`\n  - `coherence.transport_functoriality.invariance_failure_class_mismatch`\n- Added transport unit tests:\n  - missing pair count,\n  - pair result mismatch,\n  - passing local/external invariance pair.\n- Updated coherence-transport fixtures:\n  - annotated existing invariance case with `profile=local`,\n  - added external pair vector `invariance/permuted_payload_accept_external`,\n  - updated manifest vectors.\n- Updated PREMATH-COHERENCE §4.15 to define invariance-pair contract across both fixture families; recorded Decision 0081.\n\nValidation:\n- `cargo test -p premath-coherence`\n- `mise run coherence-check`\n- `python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache`\n- `mise run ci-pipeline-test`\n- `python3 tools/conformance/check_spec_traceability.py`\n- `mise run ci-required-attested`","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:42:13.925451Z","updated_at":"2026-02-22T10:48:36.067062Z","closed_at":"2026-02-22T10:48:36.067066Z","ephemeral":false,"dependencies":[{"issue_id":"bd-86","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-87","title":"[bd-28] Enforce transport vector polarity coverage parity with site fixtures","description":"`coherence-site` enforces path + semantic polarity (golden/adversarial and accepted/rejected), but `coherence-transport` does not yet enforce equivalent polarity constraints.\nAcceptance:\n- `check_transport_functoriality` rejects when golden/adversarial path polarity is missing,\n- rejects when expected result polarity (accepted/rejected) is missing,\n- deterministic failure classes and unit tests for missing-golden, missing-adversarial, missing-accepted, missing-rejected, and passing mixed case,\n- PREMATH-COHERENCE and decision log updated.","notes":"Completed transport polarity parity in premath-coherence.\n- Extended `check_transport_functoriality` to enforce golden/adversarial presence and accepted/rejected expected-result coverage, with deterministic failure classes.\n- Added witness detail counters (`matchedVectorKinds`, `matchedExpectedResults`) for transport vectors.\n- Added transport parity unit tests for golden/adversarial and accepted/rejected polarity constraints.\n- Updated PREMATH-COHERENCE draft spec and decision log (Decision 0082).\nValidation run:\n- cargo fmt --all\n- cargo test -p premath-coherence\n- mise run coherence-check\n- python3 tools/conformance/run_fixture_suites.py --suite coherence-contract --no-cache\n- mise run ci-pipeline-test\n- python3 tools/conformance/check_spec_traceability.py\n- mise run ci-required-attested","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:49:19.214394Z","updated_at":"2026-02-22T10:52:39.494540Z","closed_at":"2026-02-22T10:52:39.494543Z","ephemeral":false,"dependencies":[{"issue_id":"bd-87","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-88","title":"[bd-28] Factor shared polarity coverage accounting across coherence-site and transport","description":"Both `check_site_obligation` and `check_transport_functoriality` implement near-identical counting/checking for vector-kind polarity (`golden`/`adversarial`/`invariance`) and expected-result polarity (`accepted`/`rejected`).\n\nAcceptance:\n- introduce one shared helper for polarity accounting + deterministic missing-polarity failure emission,\n- preserve existing failure class strings and witness detail fields (`matchedVectorKinds`, `matchedExpectedResults`),\n- keep existing transport/site polarity tests passing with no fixture/schema changes.","notes":"Completed shared polarity accounting extraction in `premath-coherence`.\n\nDelivered:\n- added `PolarityCoverage` helper with shared methods:\n  - `record_vector_id`\n  - `record_expected_result`\n  - `emit_missing_failures`\n  - detail render helpers for `matchedVectorKinds` and `matchedExpectedResults`\n- replaced duplicate site/transport polarity counting and missing-polarity failure emission with the shared helper.\n- preserved existing failure class strings and witness detail field names.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-coherence\n- mise run coherence-check","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:53:30.379424Z","updated_at":"2026-02-22T10:54:44.135156Z","closed_at":"2026-02-22T10:54:44.135159Z","ephemeral":false,"dependencies":[{"issue_id":"bd-88","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-89","title":"[bd-28] Add deterministic issue backend-status surface (jsonl/surreal/jj)","description":"Add a first-class issue command that reports current backend integration state for work memory:\n- canonical JSONL authority path/existence,\n- surreal projection path/existence,\n- JJ availability + workspace/root/head metadata when available.\n\nAcceptance:\n- new CLI command `premath issue backend-status` (JSON + text modes),\n- deterministic JSON payload shape suitable for MCP/automation,\n- command does not fail when JJ is unavailable (returns explicit availability/error state),\n- CLI smoke test coverage.","notes":"Implemented deterministic backend integration status surface for issue memory.\n\nDelivered:\n- added new CLI subcommand: `premath issue backend-status`\n  - args: `--issues`, `--repo`, `--projection`, `--json`\n- JSON payload reports:\n  - canonical JSONL authority path/existence,\n  - surreal projection cache path/existence (`premath.surreal.issue_projection.v0`),\n  - JJ integration state (`ready|error|unavailable`) with availability, discovered repo root, head change id, and error message (when present).\n- command is fail-soft for JJ: reports explicit unavailable/error state without failing command execution.\n- added CLI smoke coverage: `issue_backend_status_json_smoke`.\n- updated command docs in `README.md` and `AGENTS.md`.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli\n- cargo run --package premath-cli -- issue backend-status --issues .premath/issues.jsonl --repo . --projection .premath/surreal_issue_cache.json --json","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T10:56:57.636471Z","updated_at":"2026-02-22T10:58:48.990987Z","closed_at":"2026-02-22T10:58:48.990988Z","ephemeral":false,"dependencies":[{"issue_id":"bd-89","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-9","title":"[Coherence v1] Multiagent Claim/Lease Protocol","description":"Add deterministic claim leases for ready issues (owner, lease_id, expiry, renew/release) to reduce multiagent collision and implicit work stealing. Include failure classes and observation projections for stale/contended leases.","notes":"Implemented deterministic multiagent claim-lease protocol in premath runtime: added first-class Issue lease state (lease_id, owner, acquired_at, expires_at, renewed_at), lease-aware issue_claim with deterministic failure classes, new MCP mutations issue_lease_renew and issue_lease_release, and read model issue_lease_projection for stale/contended leases. Mutation policy gating extended with per-action capability claims for lease renew/release. Added Rust unit tests for claim/renew/release/projection behavior and stale renew rejection. Extended capabilities.change_morphisms executable vectors with lease claim/lease projection golden/adversarial cases. Updated CAPABILITY-VECTORS, CONFORMANCE, README, ARCHITECTURE-MAP, and decision log (Decision 0019).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T23:07:01.386807Z","updated_at":"2026-02-22T00:03:33.408910Z","closed_at":"2026-02-22T00:03:33.408912Z","ephemeral":false,"dependencies":[{"issue_id":"bd-9","depends_on_id":"bd-8","type":"blocks"},{"issue_id":"bd-9","depends_on_id":"bd-4","type":"discovered-from"}]}
{"id":"bd-90","title":"[bd-28] Expose issue backend-status as MCP read tool","description":"Expose backend integration state through MCP so agents can query authority/projection/VCS posture without shelling out.\n\nAcceptance:\n- add read-only MCP tool `issue_backend_status`,\n- output includes canonical memory (jsonl) path/existence, surreal projection path/existence, configured query backend, and JJ state (`ready|error|unavailable`) with metadata,\n- deterministic JSON payload shape,\n- unit test coverage in `mcp_serve` tests,\n- README MCP tool list updated.","notes":"Implemented MCP read tool `issue_backend_status`.\n\nDelivered:\n- added new MCP tool: `issue_backend_status` (read-only),\n- payload reports deterministic integration state:\n  - canonical JSONL authority path/existence,\n  - surreal issue projection path/existence,\n  - configured query backend,\n  - JJ state (`ready|error|unavailable`) with availability, discovered repo root, head change id, and error when present,\n- wired tool into MCP dispatch and registry (`tool_box`),\n- updated server guidance text to mention `issue_backend_status`,\n- added unit test: `issue_backend_status_reports_integration_state`,\n- updated README MCP data-plane tool list.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:01:04.304109Z","updated_at":"2026-02-22T11:02:26.618849Z","closed_at":"2026-02-22T11:02:26.618852Z","ephemeral":false,"dependencies":[{"issue_id":"bd-90","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-91","title":"[bd-28] Unify backend-status evaluation across CLI and MCP","description":"`premath issue backend-status` and MCP `issue_backend_status` currently duplicate integration-state logic.\n\nAcceptance:\n- extract one shared helper in `crates/premath-cli/src/support.rs` for backend-status evaluation,\n- route both CLI and MCP surfaces through that helper,\n- preserve existing payload shapes and failure behavior,\n- keep tests green for both surfaces.","notes":"Unified backend-status evaluation across CLI and MCP surfaces.\n\nDelivered:\n- added shared helper in `crates/premath-cli/src/support.rs`:\n  - `collect_backend_status(...)`\n  - `BackendStatus` shared struct\n  - shared constant `ISSUE_QUERY_PROJECTION_KIND`\n- refactored CLI `issue backend-status` implementation (`commands/issue.rs`) to use shared helper.\n- refactored MCP `issue_backend_status` implementation (`commands/mcp_serve.rs`) to use shared helper.\n- removed duplicated per-surface JJ/projection/status logic while preserving payload shape.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:03:25.852855Z","updated_at":"2026-02-22T11:04:31.496027Z","closed_at":"2026-02-22T11:04:31.496030Z","ephemeral":false,"dependencies":[{"issue_id":"bd-91","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-92","title":"[bd-28] Unify backend-status payload rendering across CLI and MCP","description":"Backend-status state collection is shared, but JSON payload rendering is still duplicated between CLI and MCP paths.\n\nAcceptance:\n- add one shared payload builder for backend-status in `support.rs`,\n- route both CLI issue command and MCP tool through it,\n- preserve existing payload semantics and deterministic field set,\n- keep cli + mcp tests green.","notes":"Unified backend-status payload rendering across CLI and MCP.\n\nDelivered:\n- added shared payload builder in `support.rs`: `backend_status_payload(action, status, query_backend)`.\n- routed CLI `issue backend-status` JSON mode through shared payload builder.\n- routed MCP `issue_backend_status` tool through shared payload builder.\n- preserved payload semantics while reducing duplicated encoding logic.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:05:52.663185Z","updated_at":"2026-02-22T11:07:00.375577Z","closed_at":"2026-02-22T11:07:00.375580Z","ephemeral":false,"dependencies":[{"issue_id":"bd-92","depends_on_id":"bd-28","type":"discovered-from"}]}
{"id":"bd-93","title":"[bd-28] Bind issue projection provenance to authority snapshot refs","description":"Current issue backend-status reports projection presence only. Add deterministic provenance so projection freshness can be evaluated against canonical JSONL authority with minimal extra encoding.\n\nAcceptance:\n- issue query projection payload carries optional `sourceSnapshotRef` bound to `store_snapshot_ref`.\n- backend-status surfaces authority/projection snapshot refs and deterministic projection freshness state (`fresh|stale|invalid|missing|unknown`).\n- MCP and CLI backend-status share the same payload surface.\n- projection loader remains backward-compatible with existing projection files.\n- tests cover fresh and stale/invalid projection status paths.","notes":"Implemented projection provenance/freshness binding across issue backend surfaces.\n\nDelivered:\n- Added optional `sourceSnapshotRef` to issue query projection payloads written by MCP (`IssueQueryProjection`) bound to `store_snapshot_ref`.\n- Extended shared backend status model/payload with deterministic authority+projection provenance:\n  - `canonicalMemory.snapshotRef` + `canonicalMemory.error`\n  - `queryProjection.state` (`fresh|stale|invalid|missing|unknown`)\n  - projection metadata (`schema`, `projectionKind`, `sourceIssuesPath`, `sourceSnapshotRef`) and match booleans (`sourcePathMatchesAuthority`, `snapshotRefMatchesAuthority`) plus `queryProjection.error`.\n- Kept projection load backward-compatible via optional projection snapshot field.\n- Added MCP tests for fresh and stale projection states.\n- Updated CLI smoke to assert deterministic invalid-state behavior for malformed projection payload (`{}`).\n- Updated command docs in README + AGENTS.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli\n- mise run baseline","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:10:41.223236Z","updated_at":"2026-02-22T11:13:11.355798Z","closed_at":"2026-02-22T11:13:11.355800Z","ephemeral":false,"dependencies":[{"issue_id":"bd-93","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-94","title":"[bd-28] Enforce projection source-path parity on surreal query loads","description":"Surreal projection reads currently accept any projection payload with matching schema/kind when mtime appears fresh. Add deterministic source-path parity so a projection built from a different authority file path is never served as current.\n\nAcceptance:\n- projection load path validates `sourceIssuesPath` against requested authority issues path,\n- mismatch triggers projection refresh from canonical authority store before serving reads,\n- behavior remains backward-compatible for legacy projection payloads,\n- unit test coverage for mismatch refresh path.","notes":"Enforced source-path parity for surreal projection query loads.\n\nDelivered:\n- Updated projection load path to validate `sourceIssuesPath` against requested authority issues path.\n- On mismatch, loader now refreshes projection deterministically from canonical authority store before serving reads.\n- Preserved backward compatibility for existing projection payloads.\n- Added regression test `surreal_issue_backend_refreshes_when_projection_source_path_mismatches` that seeds a mismatched projection and verifies refreshed read results + rewritten projection metadata.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:14:02.166820Z","updated_at":"2026-02-22T11:15:23.111339Z","closed_at":"2026-02-22T11:15:23.111342Z","ephemeral":false,"dependencies":[{"issue_id":"bd-94","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-95","title":"[bd-28] Share path-equivalence normalization across backend status and projection loader","description":"Path-equivalence normalization is currently duplicated in `support.rs` and `mcp_serve.rs`.\n\nAcceptance:\n- expose one shared helper for path equivalence in CLI support layer,\n- route backend-status provenance checks and surreal projection source-path checks through the helper,\n- preserve existing behavior/tests while reducing duplicate encoding.","notes":"Reduced duplicate path normalization encoding by sharing one helper.\n\nDelivered:\n- Added shared helper `paths_equivalent(&Path, &Path)` in `crates/premath-cli/src/support.rs`.\n- Routed backend-status projection provenance check to shared helper.\n- Routed surreal projection source-path parity check in MCP loader to shared helper.\n- Removed duplicated normalization routines from `mcp_serve.rs`.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli","status":"closed","priority":3,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:16:04.076732Z","updated_at":"2026-02-22T11:16:43.086103Z","closed_at":"2026-02-22T11:16:43.086105Z","ephemeral":false,"dependencies":[{"issue_id":"bd-95","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-96","title":"[bd-28] Enforce projection payload/sourceSnapshotRef integrity on surreal loads","description":"Projection files now carry `sourceSnapshotRef`, but surreal query loads do not yet verify that ref against the projection payload itself.\n\nAcceptance:\n- projection loader validates `sourceSnapshotRef` (when present) equals `store_snapshot_ref` of hydrated projection issues,\n- mismatch triggers deterministic refresh from authority path before serving reads,\n- legacy projections without `sourceSnapshotRef` remain backward compatible,\n- unit test covers mismatch-refresh behavior.","notes":"Enforced projection payload/sourceSnapshotRef integrity for surreal query loads.\n\nDelivered:\n- `load_store_from_projection` now validates `sourceSnapshotRef` (when present) against `store_snapshot_ref` of hydrated projection issues.\n- Snapshot-ref mismatch is treated as projection invalidity; surreal load path refreshes from authority before serving reads.\n- Legacy projections without `sourceSnapshotRef` remain accepted (backward compatibility).\n- Added regression test `surreal_issue_backend_refreshes_when_projection_snapshot_ref_mismatches`.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:18:41.680656Z","updated_at":"2026-02-22T11:19:18.608980Z","closed_at":"2026-02-22T11:19:18.608983Z","ephemeral":false,"dependencies":[{"issue_id":"bd-96","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-97","title":"[bd-28] Enforce projection payload integrity in backend-status surface","description":"`issue backend-status` currently parses projection header only; it may report `fresh` when projection payload contradicts `sourceSnapshotRef`.\n\nAcceptance:\n- backend-status validates projection payload integrity when schema/kind parse succeeds,\n- expose deterministic boolean for `sourceSnapshotRef` vs projection payload match,\n- mark projection state invalid when payload integrity check fails,\n- add/adjust tests for malformed and mismatched projection payload cases.","notes":"Aligned backend-status projection semantics with loader integrity boundary.\n\nDelivered:\n- `collect_backend_status` now parses projection payloads (not only headers) and validates `sourceSnapshotRef` against the payload issue set snapshot.\n- Added new status field `queryProjection.snapshotRefMatchesProjection`.\n- Projection state is fail-closed to `invalid` when payload/source snapshot refs diverge.\n- Added/updated tests:\n  - `issue_backend_status_reports_integration_state` (asserts snapshotRefMatchesProjection=true)\n  - `issue_backend_status_reports_stale_projection_on_authority_change` (still true for projection integrity)\n  - `issue_backend_status_marks_invalid_when_projection_payload_snapshot_mismatches` (new regression)\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:19:55.321230Z","updated_at":"2026-02-22T11:21:16.013514Z","closed_at":"2026-02-22T11:21:16.013516Z","ephemeral":false,"dependencies":[{"issue_id":"bd-97","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-98","title":"[bd-28] Auto-refresh legacy surreal projections missing sourceSnapshotRef","description":"Legacy projection payloads without `sourceSnapshotRef` are still accepted and reported as partially unknown. Tighten determinism by auto-refreshing once into the current projection contract.\n\nAcceptance:\n- surreal projection load path refreshes when projection payload lacks `sourceSnapshotRef`,\n- refreshed payload includes deterministic `sourceSnapshotRef`,\n- backward compatibility preserved (legacy payload still results in successful reads),\n- regression test covers legacy-upgrade refresh behavior.","notes":"Implemented one-shot legacy projection upgrade for missing `sourceSnapshotRef`.\n\nDelivered:\n- Added `ProjectionLoad` metadata contract in surreal load path.\n- Projection reads now auto-refresh from authority when loaded projection payload lacks `sourceSnapshotRef`.\n- Existing source-path and snapshot-ref mismatch refresh behavior preserved.\n- Added regression test `surreal_issue_backend_refreshes_when_projection_missing_source_snapshot_ref` proving legacy payloads are upgraded while reads still succeed.\n\nValidation:\n- cargo fmt --all\n- cargo test -p premath-cli","status":"closed","priority":2,"issue_type":"task","assignee":"codex","created_at":"2026-02-22T11:21:58.408554Z","updated_at":"2026-02-22T11:22:36.030899Z","closed_at":"2026-02-22T11:22:36.030901Z","ephemeral":false,"dependencies":[{"issue_id":"bd-98","depends_on_id":"bd-28","type":"discovered-from","created_by":"codex"}]}
{"id":"bd-99","title":"[EPIC] Unified Evidence Plane: one typed authority artifact, many deterministic projections","description":"Unify instruction/proposal/coherence/CI/issue-memory outputs behind one canonical typed evidence artifact boundary.\n\nScope:\n- define canonical authority artifact + identity binding,\n- preserve lane separation (semantic doctrine vs strict checker vs witness commutation vs runtime transport),\n- remove duplicate semantic encodings in adapters/wrappers.\n\nAcceptance:\n1) lane contract documented and traceable,\n2) control-plane schema carries lane/kind binding deterministically,\n3) conformance vectors prove cross-lane invariance and fail-closed behavior,\n4) implementation surfaces consume one projector path with no parallel authority semantics.","notes":"Closed after final lifecycle/deprecation slice completion.\n\nAcceptance evidence:\n1) Lane contract documented/traceable:\n- `draft/UNIFICATION-DOCTRINE` §9 (lane separation) + `draft/PREMATH-COHERENCE` gate-chain parity lane checks.\n\n2) Control-plane schema carries lane/kind binding deterministically:\n- `draft/CONTROL-PLANE-CONTRACT.json` now includes lane bindings + `schemaLifecycle` canonical kind families and alias windows.\n- `tools/ci/control_plane_contract.py` is the shared typed resolver (`resolve_schema_kind`) used by CI clients.\n\n3) Conformance vectors prove cross-lane invariance + fail-closed behavior:\n- coherence-site and capability vectors already cover lane ownership + span/square routing + invariance/adversarial paths; baseline and conformance suites pass.\n\n4) One projector path / no parallel authority semantics:\n- prior closure work consolidated projection paths (observation + control-plane clients), and lifecycle resolver removed ad-hoc string authority checks.\n\nValidation:\n- `mise run ci-pipeline-test` passed.\n- `mise run baseline` passed.","status":"closed","priority":1,"issue_type":"epic","assignee":"codex","created_at":"2026-02-22T17:20:54.059059Z","updated_at":"2026-02-22T19:14:23.776118Z","closed_at":"2026-02-22T19:14:23.776120Z","ephemeral":false,"dependencies":[{"issue_id":"bd-99","depends_on_id":"bd-108","type":"blocks","created_by":"codex"},{"issue_id":"bd-99","depends_on_id":"bd-107","type":"blocks","created_by":"codex"},{"issue_id":"bd-99","depends_on_id":"bd-102","type":"blocks","created_by":"codex"},{"issue_id":"bd-99","depends_on_id":"bd-103","type":"blocks","created_by":"codex"},{"issue_id":"bd-99","depends_on_id":"bd-110","type":"blocks","created_by":"codex"},{"issue_id":"bd-99","depends_on_id":"bd-109","type":"blocks","created_by":"codex"},{"issue_id":"bd-99","depends_on_id":"bd-112","type":"blocks","created_by":"codex"},{"issue_id":"bd-99","depends_on_id":"bd-113","type":"blocks","created_by":"codex"},{"issue_id":"bd-99","depends_on_id":"bd-115","type":"blocks","created_by":"codex"}]}
{"id":"bd200-smoke-1","title":"smoke epic","notes":"Temporary smoke issue created during bd-200 reproduction; closed for queue hygiene.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T03:33:09.338421Z","updated_at":"2026-02-23T03:35:53.292802Z","closed_at":"2026-02-23T03:35:53.292804Z","ephemeral":false}
{"id":"bd200-smoke-2","title":"[EPIC] smoke epic fixed","notes":"Temporary smoke issue created during bd-200 reproduction; closed for queue hygiene.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-23T03:35:21.770789Z","updated_at":"2026-02-23T03:35:53.316602Z","closed_at":"2026-02-23T03:35:53.316603Z","ephemeral":false}
