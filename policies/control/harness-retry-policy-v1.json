{
  "schema": 1,
  "policyKind": "ci.harness.retry.policy.v1",
  "policyId": "policy.harness.retry.v1",
  "defaultRule": {
    "maxAttempts": 1,
    "backoffClass": "none",
    "escalationAction": "stop"
  },
  "rules": [
    {
      "ruleId": "transient_retry",
      "failureClasses": [
        "executor_unavailable",
        "flaky_execution",
        "flaky_io",
        "gate_timeout",
        "network_timeout",
        "pipeline_witness_io_error"
      ],
      "maxAttempts": 3,
      "backoffClass": "exponential_short",
      "escalationAction": "issue_discover"
    },
    {
      "ruleId": "operational_retry",
      "failureClasses": [
        "instruction_runtime_invalid",
        "pipeline_missing_failure_class",
        "pipeline_invalid_witness_json",
        "pipeline_invalid_witness_shape",
        "pipeline_missing_witness",
        "required_decision_verify_invalid",
        "required_gate_ref_invalid",
        "required_witness_decide_invalid",
        "required_witness_runtime_invalid"
      ],
      "maxAttempts": 2,
      "backoffClass": "fixed_short",
      "escalationAction": "issue_discover"
    },
    {
      "ruleId": "semantic_no_retry",
      "failureClasses": [
        "check_failed",
        "instruction_check_not_allowed",
        "instruction_envelope_invalid",
        "instruction_envelope_invalid_json",
        "instruction_envelope_invalid_shape",
        "instruction_invalid_normalizer",
        "instruction_unknown_unroutable",
        "proposal_binding_mismatch",
        "proposal_discharge_failed",
        "proposal_invalid_shape",
        "proposal_invalid_step",
        "proposal_kcir_ref_mismatch",
        "proposal_nondeterministic",
        "proposal_unbound_policy"
      ],
      "maxAttempts": 1,
      "backoffClass": "none",
      "escalationAction": "mark_blocked"
    }
  ],
  "policyDigest": "pol1_2e1753b503e957e7c7f60da2bc1d9c1cb18c989904a13e20eb98cc9bbbb27398"
}
